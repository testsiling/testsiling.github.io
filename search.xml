<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>最近</title>
      <link href="2021/08/22/update0822/"/>
      <url>2021/08/22/update0822/</url>
      
        <content type="html"><![CDATA[<p>好久没更新啦，大家还好吗？也不知道这个blog有没有人在看。我最后一次更新是02/21/21，之后我换了一个工作。新公司在湾区，不过目前是remote from Philly。计划明年Q1会搬到湾区，如果疫情好转的话。</p><p>我是4月离开老东家，然后跟Lawrence度了一个长假，5月中入职新公司。8月刚过了我的社畜两周年纪念日。</p><span id="more"></span><h2 id="关于新工作"><a href="#关于新工作" class="headerlink" title="关于新工作"></a>关于新工作</h2><p>新工作跟以前完全不一样！现在是backend engineer，写API，micro service。刚进去啥都不会，连java都不会，不过边看边写感觉还蛮容易pickup的。关键是新公司的codebase很清晰！ramp up的时候感觉简直像“乡下人进城”一样，全都“哇好厉害”， “哇原来是这样”！用的工具全都没见过，在老东家手动完成的东西，新公司都有健全的工具链，然后各种guideline也很清晰，文档我觉得很健全（反正老东家是完全没有）。同事们都很友善，问什么问题都会得到回应，就整个反馈都很正向，work life balance我觉得客观来讲是很好的，业务熟悉之后很快就完成。很舒适！</p><p>刚开始的时候好多东西不会，学了一些grpc，java，restful，还有一些乱七八糟的东西（有时间会总结出来）。最大的感受就是“有些东西就是你见过就会知道，没见过就是不知道”。很多东西不是多高深，就是没听说过。前三个月读很多文档，我们组管很多个service，每一个都有设计文档，一些自己以前“希望做到但不知道best practice”的东西，这里都有。就收获很多吧。读文档跟挖矿一样，学到很多。</p><p>最近在做一个数据库的项目，一开始是先看了项目的设计文档，然后就觉得哇好厉害啊，每一步给出很多potential solution，分析优缺，跟其他组讨论推进，最后得到这个文档的我，看着就知道我应该要做什么，很清晰。跟别的同事闲聊的时候我就赞这个项目很清晰，同事说lead这个项目的engineer其实跟我差不多经验，相信我很快也可以做到。然后就感叹觉得自己其实并没有从上一份工作中得到很多软件工程上的指引，毕竟是一个非科技公司的偏硬件的组。也感谢自己去新公司的决定。希望不久的将来能成长成独当一面的工程师吧。</p><h2 id="关于找工作"><a href="#关于找工作" class="headerlink" title="关于找工作"></a>关于找工作</h2><p>其实一开始是Sherry老师要跳槽，喊我一起刷题。于是我们俩从12月开始正式刷题，还开了一个刷题打卡群，每天至少刷一题。我们一般新题一天5题，复习的时候高频题一天5-10题也有。最后一共刷了240题(101 easy, 111 medium, 28 hard)。wepay是我收到的第一个offer，觉得聊得挺好，包裹也满意，就接了，后面其他的就推了不想面了。Sherry老师很快拿到了相当好的offer，比我先走一步去西雅图。刷题打卡还蛮有用的！</p><p>感觉是觉得招工市场真的很好，开始海投之后就拿到了一些不错的面试，都懒得找内推了，跟newgrad的时候简历石沉大海真的差别很大。</p><h2 id="关于生活"><a href="#关于生活" class="headerlink" title="关于生活"></a>关于生活</h2><p>在我找工的时候就跟Lawrence达成一致：我去哪他去哪。所以当我确定湾区之后，他也开始学习啦。虽然他也是软件工程师，但不知道刷题为何物。给了他Sherry老师留下的cracking the technical interview，对他来说比直接上leetcode硬刷有用。其实我觉得问题不大，毕竟有工作经验。又不是每个公司都考很难的algorithm。我会支持他的！</p><p>最近半年就很顺利，感情甜蜜，工作轻松。5月刚度假完，又定了11月跟朋友们再去一次夏威夷。</p><p>唯一问题可能是之前欠太多信用卡，今年又想max out 401k，现在基本就是月欠族，paycheck还没到手已经被信用卡债/房租预定了，算了一下2022年之前我的财务状况大概不会有任何改善。</p><p>“那没钱怎么去度假呢？” —- 刷信用卡呀。看出来了吧这就是我没钱剩的原因。</p><p>真的好穷。加州税太贵了。我现在交加州税+Philly城市税。没房贷没孩子未婚，税务就一言难尽吧。</p><h2 id="Bottom-Line"><a href="#Bottom-Line" class="headerlink" title="Bottom Line"></a>Bottom Line</h2><p>工作顺利，感情甜蜜。</p><p>希望明年升职加薪。</p><p>希望疫情尽快结束。希望中美关系缓和，签证/运输早日无障碍互通，好久没回国了。</p><p>祝各位万事顺遂！</p>]]></content>
      
      
      
        <tags>
            
            <tag> 日常 </tag>
            
            <tag> Daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - KMP - Overview</title>
      <link href="2021/02/21/al-kmp-0/"/>
      <url>2021/02/21/al-kmp-0/</url>
      
        <content type="html"><![CDATA[<p>Knuth–Morris–Pratt algorithm, efficient single pattern searching algorithm.<br><span id="more"></span></p><h2 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">build</span>(<span class="params">p</span>):</span></span><br><span class="line">    kmp = [<span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">    j = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(p)):</span><br><span class="line">        <span class="keyword">while</span> j &gt; <span class="number">0</span> <span class="keyword">and</span> p[i] != p[j]:</span><br><span class="line">            j = kmp[j]</span><br><span class="line">        <span class="keyword">if</span> p[i] == p[j]:</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">        kmp.append(j)</span><br><span class="line">    <span class="keyword">return</span> kmp</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">match</span>(<span class="params">s, p</span>):</span></span><br><span class="line">    kmp = build(p)</span><br><span class="line">    ans = []</span><br><span class="line">    j = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s)):</span><br><span class="line">        <span class="keyword">while</span> j &gt; <span class="number">0</span> <span class="keyword">and</span> s[i] != p[j]:</span><br><span class="line">            j = kmp[j]</span><br><span class="line">        <span class="keyword">if</span> s[i] == p[j]:</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> j == <span class="built_in">len</span>(p):</span><br><span class="line">            ans.append(i - <span class="built_in">len</span>(p) + <span class="number">1</span>)</span><br><span class="line">            j = kmp[j]</span><br><span class="line">    <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure><h2 id="Exercises"><a href="#Exercises" class="headerlink" title="Exercises"></a>Exercises</h2><h3 id="1392-Longest-Happy-Prefix"><a href="#1392-Longest-Happy-Prefix" class="headerlink" title="1392. Longest Happy Prefix"></a>1392. Longest Happy Prefix</h3><p>using the KMP table.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">longestPrefix</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span></span><br><span class="line">    nxt = [<span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">    j = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(s)):</span><br><span class="line">        <span class="keyword">while</span> j &gt; <span class="number">0</span> <span class="keyword">and</span> s[i] != s[j]:</span><br><span class="line">            j = nxt[j]</span><br><span class="line">        <span class="keyword">if</span> s[i] == s[j]:</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">        nxt.append(j)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> s[:nxt[-<span class="number">1</span>]]</span><br></pre></td></tr></table></figure></p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://zxi.mytechroad.com/blog/sp/kmp-algorithm-sp19/">huahua</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> KMP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Union Find - Overview</title>
      <link href="2021/02/02/al-union-find-0/"/>
      <url>2021/02/02/al-union-find-0/</url>
      
        <content type="html"><![CDATA[<p>Union find is a algorithm that widly used in check connectivity in a graph. </p><span id="more"></span><p>Imagine connecting node as tree. Need to balance it while union and find, or else the time complexity for traversal would be O(N) instead of the height of the tree.</p><h2 id="Sample-Implementation"><a href="#Sample-Implementation" class="headerlink" title="Sample Implementation"></a>Sample Implementation</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UF</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, n=<span class="number">0</span></span>):</span></span><br><span class="line">        <span class="comment"># n disconnected node</span></span><br><span class="line">        <span class="comment"># number of tree</span></span><br><span class="line">        self.count = n</span><br><span class="line"></span><br><span class="line">        <span class="comment"># the parent of each node</span></span><br><span class="line">        self.parent = &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># size of each tree</span></span><br><span class="line">        self.size = &#123;&#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            self.parent[i] = i</span><br><span class="line">            self.size[i] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">union</span>(<span class="params">self, p, q</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        connect p and q</span></span><br><span class="line"><span class="string">        Parameter:</span></span><br><span class="line"><span class="string">            p: int</span></span><br><span class="line"><span class="string">            q: int</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        rootP = self.find(p)</span><br><span class="line">        rootQ = self.find(q)</span><br><span class="line">        <span class="keyword">if</span> rootP == rootQ:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># for balance purpose </span></span><br><span class="line">        <span class="comment"># append the smaller party to the larger party</span></span><br><span class="line">        <span class="keyword">if</span> self.size[rootP] &gt; self.size[rootQ]:</span><br><span class="line">            self.parent[rootQ] = rootP</span><br><span class="line">            self.size[rootP] += self.size[rootQ]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.parent[rootP] = rootQ</span><br><span class="line">            self.size[rootQ] += self.size[rootQ]</span><br><span class="line">        self.count -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">connected</span>(<span class="params">self, p, q</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        check connectivity between p and q</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.find(p) == self.find(q)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find</span>(<span class="params">self, x</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        find the root of x</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">while</span> self.parent[x] != x:</span><br><span class="line"></span><br><span class="line">            <span class="comment"># balance the tree while finding</span></span><br><span class="line">            self.parent[x] = self.parent[self.parent[x]]</span><br><span class="line">            x = self.parent[x]</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://en.wikipedia.org/wiki/Disjoint-set_data_structure">wiki</a><br><a href="https://mp.weixin.qq.com/s?__biz=MzAxODQxMDM0Mw==&amp;mid=2247484751&amp;idx=1&amp;sn=a873c1f51d601bac17f5078c408cc3f6&amp;chksm=9bd7fb47aca07251dd9146e745b4cc5cfdbc527abe93767691732dfba166dfc02fbb7237ddbf&amp;scene=21#wechat_redirect">labuladong - union find (in Chinese)</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Union Find </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Data Structure - Trie - Overview</title>
      <link href="2021/01/30/al-trie-0/"/>
      <url>2021/01/30/al-trie-0/</url>
      
        <content type="html"><![CDATA[<p>In computer science, a trie, also called digital tree or prefix tree, is a kind of search tree—an ordered tree data structure used to store a dynamic set or associative array where the keys are usually strings.</p><span id="more"></span><p><img src="/images/trie1.png" alt="tire"></p><h2 id="Implement-a-Basic-Trie"><a href="#Implement-a-Basic-Trie" class="headerlink" title="Implement a Basic Trie"></a>Implement a Basic Trie</h2><p>Great trie explaination:<br><a href="https://leetcode.com/problems/implement-trie-prefix-tree/solution/">https://leetcode.com/problems/implement-trie-prefix-tree/solution/</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.<span class="built_in">next</span> = collections.defaultdict(TrieNode)</span><br><span class="line">        self.is_word = <span class="literal">False</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Trie</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.root = TrieNode()</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">insert</span>(<span class="params">self, word: <span class="built_in">str</span></span>) -&gt; <span class="literal">None</span>:</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Inserts a word into the trie.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        cur = self.root</span><br><span class="line">        <span class="keyword">for</span> w <span class="keyword">in</span> word:</span><br><span class="line">            cur = cur.<span class="built_in">next</span>[w]</span><br><span class="line">        cur.is_word = <span class="literal">True</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">search</span>(<span class="params">self, word: <span class="built_in">str</span></span>) -&gt; <span class="built_in">bool</span>:</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Returns if the word is in the trie.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        cur = self.root</span><br><span class="line">        <span class="keyword">for</span> w <span class="keyword">in</span> word:</span><br><span class="line">            <span class="keyword">if</span> w <span class="keyword">not</span> <span class="keyword">in</span> cur.<span class="built_in">next</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            cur = cur.<span class="built_in">next</span>[w]</span><br><span class="line">        <span class="keyword">return</span> cur.is_word</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">startsWith</span>(<span class="params">self, prefix: <span class="built_in">str</span></span>) -&gt; <span class="built_in">bool</span>:</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Returns if there is any word in the trie that starts with the given prefix.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        cur = self.root</span><br><span class="line">        <span class="keyword">for</span> w <span class="keyword">in</span> prefix:</span><br><span class="line">            <span class="comment"># print(w, cur.next, cur.is_word)</span></span><br><span class="line">            <span class="keyword">if</span> w <span class="keyword">not</span> <span class="keyword">in</span> cur.<span class="built_in">next</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            cur = cur.<span class="built_in">next</span>[w]</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure><h3 id="Complexity"><a href="#Complexity" class="headerlink" title="Complexity"></a>Complexity</h3><p><strong>M</strong> is the length of the word</p><h4 id="Insert"><a href="#Insert" class="headerlink" title="Insert"></a>Insert</h4><ul><li>time: O(M)</li><li>space: O(M)</li></ul><h4 id="Search"><a href="#Search" class="headerlink" title="Search"></a>Search</h4><ul><li>time: O(M)</li><li>space: O(1)</li></ul><h2 id="Implement-a-Trie-with-Fuzzy-Search"><a href="#Implement-a-Trie-with-Fuzzy-Search" class="headerlink" title="Implement a Trie with Fuzzy Search"></a>Implement a Trie with Fuzzy Search</h2><p>A great article here:<br><a href="https://leetcode.com/problems/design-add-and-search-words-data-structure/solution/">https://leetcode.com/problems/design-add-and-search-words-data-structure/solution/</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TrieNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.<span class="built_in">next</span> = collections.defaultdict(TrieNode)</span><br><span class="line">        self.isword = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WordDictionary</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.root = TrieNode()</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addWord</span>(<span class="params">self, word: <span class="built_in">str</span></span>) -&gt; <span class="literal">None</span>:</span></span><br><span class="line">        cur = self.root</span><br><span class="line">        <span class="keyword">for</span> w <span class="keyword">in</span> word:</span><br><span class="line">            cur = cur.<span class="built_in">next</span>[w]</span><br><span class="line">        cur.isword = <span class="literal">True</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">search</span>(<span class="params">self, word: <span class="built_in">str</span></span>) -&gt; <span class="built_in">bool</span>:</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Fuzzy Search</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">match</span>(<span class="params">node, word</span>):</span></span><br><span class="line">            <span class="keyword">for</span> i, w <span class="keyword">in</span> <span class="built_in">enumerate</span>(word):</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> w == <span class="string">&#x27;.&#x27;</span>:</span><br><span class="line">                    <span class="comment"># meet . search all children</span></span><br><span class="line">                    <span class="keyword">for</span> child <span class="keyword">in</span> node.<span class="built_in">next</span>.values():</span><br><span class="line">                        <span class="keyword">if</span> match(child, word[i+<span class="number">1</span>:]):</span><br><span class="line">                            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">elif</span> w <span class="keyword">not</span> <span class="keyword">in</span> node.<span class="built_in">next</span>:</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    node = node.<span class="built_in">next</span>[w]</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> node.isword</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> match(self.root, word)</span><br></pre></td></tr></table></figure><h3 id="Complexity-1"><a href="#Complexity-1" class="headerlink" title="Complexity"></a>Complexity</h3><p><strong>M</strong> is the length of the word<br><strong>N</strong> is the number of keys in the trie</p><h4 id="Insert-1"><a href="#Insert-1" class="headerlink" title="Insert"></a>Insert</h4><ul><li>time: O(M)</li><li>space: O(M)</li></ul><h4 id="Search-1"><a href="#Search-1" class="headerlink" title="Search"></a>Search</h4><ul><li>time: O(N * 26^M)</li><li>space: O(M)</li></ul><p>Each word has 26 char, for M length of searched word, need to search 26^M times.<br>to search all keys, time complexity is O(N * 26^M)</p><h2 id="Double-Array-Trie"><a href="#Double-Array-Trie" class="headerlink" title="Double-Array Trie"></a>Double-Array Trie</h2><p>If the trie is static and huge, use Double-Array Trie is very fast to save/load and very fast to lookup. But insert/remove can be costly.<br><a href="https://linux.thai.net/~thep/datrie/">https://linux.thai.net/~thep/datrie/</a></p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference:"></a>Reference:</h2><p><a href="https://en.wikipedia.org/wiki/Trie">https://en.wikipedia.org/wiki/Trie</a><br><a href="https://leetcode.com/problems/implement-trie-prefix-tree/solution/">https://leetcode.com/problems/implement-trie-prefix-tree/solution/</a><br><a href="https://leetcode.com/problems/design-add-and-search-words-data-structure/solution/">https://leetcode.com/problems/design-add-and-search-words-data-structure/solution/</a><br><a href="https://stackoverflow.com/questions/18963783/build-trie-faster">https://stackoverflow.com/questions/18963783/build-trie-faster</a><br><a href="https://linux.thai.net/~thep/datrie/">https://linux.thai.net/~thep/datrie/</a><br><a href="https://en.wikipedia.org/wiki/Deterministic_acyclic_finite_state_automaton">https://en.wikipedia.org/wiki/Deterministic_acyclic_finite_state_automaton</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Trie </tag>
            
            <tag> Data Structure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Some Useful Tricks in Python 3</title>
      <link href="2021/01/15/python2/"/>
      <url>2021/01/15/python2/</url>
      
        <content type="html"><![CDATA[<ul><li>f-string</li><li>:= Walrus Operator</li></ul><span id="more"></span><h2 id="f-string"><a href="#f-string" class="headerlink" title="f-string"></a>f-string</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">&#x27;Celine&#x27;</span></span><br><span class="line">score = <span class="number">123.4567</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plus</span>(<span class="params">x</span>)</span></span><br><span class="line"><span class="function">    <span class="title">return</span> <span class="title">score</span> + <span class="title">x</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">print</span>(<span class="params"><span class="string">f&#x27;name = <span class="subst">&#123;name&#125;</span>, score = <span class="subst">&#123;score:<span class="number">.3</span>f&#125;</span>&#x27;</span></span>)  # <span class="title">python</span> 3.6+</span></span><br><span class="line"><span class="function"><span class="title">print</span>(<span class="params"><span class="string">f&#x27;<span class="subst">&#123;name = &#125;</span>, <span class="subst">&#123;score = :<span class="number">.3</span>f&#125;</span>&#x27;</span></span>)  #<span class="title">python</span> 3.8+</span></span><br><span class="line"><span class="function"><span class="title">print</span>(<span class="params"><span class="string">f&#x27;<span class="subst">&#123;score = &#125;</span>, <span class="subst">&#123;plus(<span class="number">100</span>) = &#125;</span>&#x27;</span></span>)</span></span><br></pre></td></tr></table></figure><p>I usually use the first one, just found the new feature in after 3.8.</p><h2 id=""><a href="#" class="headerlink" title=":="></a>:=</h2><p>:= Assignment Expressions (after 3.8)</p><h3 id="scenario-1-local-variable"><a href="#scenario-1-local-variable" class="headerlink" title="scenario 1: local variable"></a>scenario 1: local variable</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">0</span>] * <span class="number">11</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># call len(a) twice</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(a) &gt; <span class="number">10</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;list too long, <span class="subst">&#123;<span class="built_in">len</span>(a)&#125;</span> elements&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># call len(a) once</span></span><br><span class="line">n = <span class="built_in">len</span>(a)</span><br><span class="line"><span class="keyword">if</span> n &gt; <span class="number">10</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;list too long, <span class="subst">&#123;n&#125;</span> elements&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># call len(a) once and assign it to x</span></span><br><span class="line"><span class="comment"># needs parenthesis, := piority lower than other operator</span></span><br><span class="line"><span class="keyword">if</span> (x := <span class="built_in">len</span>(a)) &gt; <span class="number">10</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;list too long, <span class="subst">&#123;x&#125;</span> elements&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;list too long, <span class="subst">&#123;x&#125;</span> elements&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="scanrio-2-while-loop"><a href="#scanrio-2-while-loop" class="headerlink" title="scanrio 2: while loop"></a>scanrio 2: while loop</h3><p>read a string flow till the end.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># basic</span></span><br><span class="line">f1 = io.StringIO(<span class="string">&#x27;123456789&#x27;</span>)</span><br><span class="line">x1 = f1.read(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">while</span> x1:</span><br><span class="line">    <span class="built_in">print</span>(x1)</span><br><span class="line">    x1 = f1.read(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># better</span></span><br><span class="line">f2 = io.StringIO(<span class="string">&#x27;123456789&#x27;</span>)</span><br><span class="line"><span class="keyword">while</span> (x2 := f2.read(<span class="number">2</span>)) != <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(x2)</span><br></pre></td></tr></table></figure></p><h3 id="scenario-3-in-list-comprehension"><a href="#scenario-3-in-list-comprehension" class="headerlink" title="scenario 3: in list comprehension"></a>scenario 3: in list comprehension</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">targets = [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>]</span><br><span class="line">my = [<span class="string">&#x27;Apple&#x27;</span>, <span class="string">&#x27;Orange&#x27;</span>, <span class="string">&#x27;Melon&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># print all element in my list match in target list</span></span><br><span class="line"><span class="comment"># call lower() twice</span></span><br><span class="line">l1 = [f.lower() <span class="keyword">for</span> f <span class="keyword">in</span> my <span class="keyword">if</span> f.lower() <span class="keyword">in</span> targets]</span><br><span class="line"><span class="built_in">print</span>(l1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># call lower() once</span></span><br><span class="line">l2 = [f <span class="keyword">for</span> fruit <span class="keyword">in</span> my <span class="keyword">if</span> (f:= fruit.lower()) <span class="keyword">in</span> targets]</span><br><span class="line"><span class="built_in">print</span>(l2)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Design (1)</title>
      <link href="2021/01/12/al-design-1/"/>
      <url>2021/01/12/al-design-1/</url>
      
        <content type="html"><![CDATA[<p>Leetcode Data Structure Design Problem Set (1)</p><ul><li>146.LRU Cache</li><li>284.Peeking Iterator</li><li>341.Flatten Nested List Iterator</li><li>295.Find Median from Data Stream</li></ul><span id="more"></span><h2 id="146-LRU-Cache"><a href="#146-LRU-Cache" class="headerlink" title="146. LRU Cache"></a>146. LRU Cache</h2><p>Design Least Recently Used (LRU) Cache<br>Use double-linked list as cache, disconnect the old node and reconnect it to the tail of the list when <code>get</code> an value. add new node to the tail and drop the first (the least used) node if exceed capacity.<br>use a dictionary to log {key: node}<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, k=<span class="number">0</span>, v=<span class="number">0</span></span>):</span></span><br><span class="line">        self.k = k</span><br><span class="line">        self.v = v</span><br><span class="line">        self.prev = <span class="literal">None</span></span><br><span class="line">        self.<span class="built_in">next</span> = <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, capacity: <span class="built_in">int</span></span>):</span></span><br><span class="line">        self.head = Node()</span><br><span class="line">        self.tail = Node()</span><br><span class="line">        self.head.<span class="built_in">next</span> = self.tail</span><br><span class="line">        self.tail.prev = self.head</span><br><span class="line">        self.<span class="built_in">dict</span> = &#123;&#125;</span><br><span class="line">        self.cap = capacity</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_remove</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        <span class="comment"># remove the least used node</span></span><br><span class="line">        node.prev.<span class="built_in">next</span> = node.<span class="built_in">next</span></span><br><span class="line">        node.<span class="built_in">next</span>.prev = node.prev</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_add</span>(<span class="params">self, node</span>):</span></span><br><span class="line">        last = self.tail.prev</span><br><span class="line">        self.tail.prev = node</span><br><span class="line">        last.<span class="built_in">next</span> = node</span><br><span class="line">        node.<span class="built_in">next</span> = self.tail</span><br><span class="line">        node.prev = last</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, key: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">not</span> <span class="keyword">in</span> self.<span class="built_in">dict</span>:</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># move recent used node to tail</span></span><br><span class="line">        node = self.<span class="built_in">dict</span>[key]</span><br><span class="line">        self._remove(node)</span><br><span class="line">        self._add(node)</span><br><span class="line">        <span class="keyword">return</span> node.v</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span>(<span class="params">self, key: <span class="built_in">int</span>, value: <span class="built_in">int</span></span>) -&gt; <span class="literal">None</span>:</span></span><br><span class="line">        <span class="comment"># remove the existed key first, we will add new anyway</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> self.<span class="built_in">dict</span>:</span><br><span class="line">            node = self.<span class="built_in">dict</span>[key]</span><br><span class="line">            self._remove(node)</span><br><span class="line">            <span class="keyword">del</span> self.<span class="built_in">dict</span>[key]</span><br><span class="line">        </span><br><span class="line">        node = Node(key, value)</span><br><span class="line">        self._add(node)</span><br><span class="line">        self.<span class="built_in">dict</span>[key] = node</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(self.<span class="built_in">dict</span>) &gt; self.cap:</span><br><span class="line">            least = self.head.<span class="built_in">next</span></span><br><span class="line">            self._remove(least)</span><br><span class="line">            <span class="keyword">del</span> self.<span class="built_in">dict</span>[least.k]</span><br></pre></td></tr></table></figure></p><h2 id="284-Peeking-Iterator"><a href="#284-Peeking-Iterator" class="headerlink" title="284. Peeking Iterator"></a>284. Peeking Iterator</h2><p>My initial idea was create a one-way linked list, or initialize a normal list, which is too easy. But if so, it lose the meaning as iterator. Then I second thought, I don’t even need a list, I just need a buffer for the peak value.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PeekingIterator</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, iterator</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Initialize your data structure here.</span></span><br><span class="line"><span class="string">        :type iterator: Iterator</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self._iterator = iterator</span><br><span class="line">        self._peak = <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">peek</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Returns the next element in the iteration without advancing the iterator.</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> self._peak <span class="keyword">and</span> self._iterator.hasNext():</span><br><span class="line">            self._peak = self._iterator.<span class="built_in">next</span>()</span><br><span class="line">        <span class="keyword">return</span> self._peak</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">next</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> self._peak:</span><br><span class="line">            peak = self._peak</span><br><span class="line">            self._peak = <span class="literal">None</span></span><br><span class="line">            <span class="keyword">return</span> peak</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> self._iterator.<span class="built_in">next</span>()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hasNext</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        :rtype: bool</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> self._peak:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> self._iterator.hasNext()</span><br></pre></td></tr></table></figure></p><h2 id="341-Flatten-Nested-List-Iterator"><a href="#341-Flatten-Nested-List-Iterator" class="headerlink" title="341. Flatten Nested List Iterator"></a>341. Flatten Nested List Iterator</h2><p>Flatten nested list in init. Use deque to faster pop the first element.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NestedIterator</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, nestedList: [NestedInteger]</span>):</span></span><br><span class="line">        self.ls = deque()</span><br><span class="line">        self.flatten(nestedList)</span><br><span class="line">        </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">flatten</span>(<span class="params">self, nestedList</span>):</span></span><br><span class="line">        <span class="keyword">for</span> l <span class="keyword">in</span> nestedList:</span><br><span class="line">            <span class="keyword">if</span> l.isInteger():</span><br><span class="line">                self.ls.append(l.getInteger())</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                self.flatten(l.getList())      </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">next</span>(<span class="params">self</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.ls.popleft() <span class="keyword">if</span> self.hasNext <span class="keyword">else</span> <span class="literal">None</span></span><br><span class="line">            </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hasNext</span>(<span class="params">self</span>) -&gt; <span class="built_in">bool</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.ls) &gt; <span class="number">0</span></span><br></pre></td></tr></table></figure></p><h2 id="295-Find-Median-from-Data-Stream"><a href="#295-Find-Median-from-Data-Stream" class="headerlink" title="295. Find Median from Data Stream"></a>295. Find Median from Data Stream</h2><p>Dividing data into 2 heaps (length as equal as possible):</p><ul><li>Use max heap to store a chunk of smaller elements</li><li>Use min heap to store another chunk of larger elements.<br>Reference:<br><a href="https://mp.weixin.qq.com/s/oklQN_xjYy--_fbFkd9wMg">https://mp.weixin.qq.com/s/oklQN_xjYy--_fbFkd9wMg</a></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> heapq</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MedianFinder</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        initialize your data structure here.</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.small = []  <span class="comment"># store smaller data, maxHeap</span></span><br><span class="line">        self.large = []  <span class="comment"># store larger data, minHeap</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addNum</span>(<span class="params">self, num: <span class="built_in">int</span></span>) -&gt; <span class="literal">None</span>:</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># insert into large</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(self.small) &gt;= <span class="built_in">len</span>(self.large):</span><br><span class="line">            heapq.heappush(self.small, -num)</span><br><span class="line">            heapq.heappush(self.large, -heapq.heappop(self.small))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            heapq.heappush(self.large, num)</span><br><span class="line">            heapq.heappush(self.small, -heapq.heappop(self.large))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findMedian</span>(<span class="params">self</span>) -&gt; <span class="built_in">float</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(self.small) &gt; <span class="built_in">len</span>(self.large):</span><br><span class="line">            <span class="keyword">return</span>  -self.small[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">len</span>(self.large) &gt; <span class="built_in">len</span>(self.small):</span><br><span class="line">            <span class="keyword">return</span> self.large[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># even len</span></span><br><span class="line">            <span class="keyword">return</span> (-self.small[<span class="number">0</span>] + self.large[<span class="number">0</span>]) / <span class="number">2</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Data Structure </tag>
            
            <tag> Design </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Dynamic Programming (3) - Buy &amp; Sell Stock!</title>
      <link href="2021/01/10/al-dp-3/"/>
      <url>2021/01/10/al-dp-3/</url>
      
        <content type="html"><![CDATA[<h1 id="Best-Time-to-Buy-and-Sell-Stock-Problem-Set"><a href="#Best-Time-to-Buy-and-Sell-Stock-Problem-Set" class="headerlink" title="[Best Time to Buy and Sell Stock] Problem Set"></a>[Best Time to Buy and Sell Stock] Problem Set</h1><p>Leetcode Dynamic Programming Problem Set (3)</p><ul><li>121.Best Time to Buy and Sell Stock</li><li>122.Best Time to Buy and Sell Stock II</li><li>123.Best Time to Buy and Sell Stock III</li><li>188.Best Time to Buy and Sell Stock IV</li><li>309.Best Time to Buy and Sell Stock with Cooldown</li><li>714.Best Time to Buy and Sell Stock with Transaction Fee</li></ul><span id="more"></span><p>There are 3 options in each trade day: <strong>buy, sell, hold</strong><br>We can use a 3d array to log all situations:<br><code>dp[i][k][1 or 0]</code> = <code>the maximum profit at the end of the i-th day with at most k transactions and with 0 or 1 stock in our hand AFTER taking the action</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># either always haven&#x27;t got stock, or sold a stock. </span></span><br><span class="line">dp[i][k][<span class="number">0</span>] = <span class="built_in">max</span>(dp[i-<span class="number">1</span>][k][<span class="number">0</span>], dp[i-<span class="number">1</span>][k][<span class="number">1</span>] + prices[i])</span><br><span class="line"></span><br><span class="line"><span class="comment"># either I kept the existed stock, or bought one.</span></span><br><span class="line">dp[i][k][<span class="number">1</span>] = <span class="built_in">max</span>(dp[i-<span class="number">1</span>][k][<span class="number">1</span>], dp[i-<span class="number">1</span>][k-<span class="number">1</span>][<span class="number">0</span>] - prices[i])</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Base case：dp[-1] means before day 0, haven&#x27;t start yet.</span></span><br><span class="line">dp[-<span class="number">1</span>][k][<span class="number">0</span>] = dp[i][<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">dp[-<span class="number">1</span>][k][<span class="number">1</span>] = dp[i][<span class="number">0</span>][<span class="number">1</span>] = <span class="built_in">float</span>(<span class="string">&#x27;-inf&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Recurrence relations:</span></span><br><span class="line">dp[i][k][<span class="number">0</span>] = <span class="built_in">max</span>(dp[i-<span class="number">1</span>][k][<span class="number">0</span>], dp[i-<span class="number">1</span>][k][<span class="number">1</span>] + prices[i])</span><br><span class="line">dp[i][k][<span class="number">1</span>] = <span class="built_in">max</span>(dp[i-<span class="number">1</span>][k][<span class="number">1</span>], dp[i-<span class="number">1</span>][k-<span class="number">1</span>][<span class="number">0</span>] - prices[i])</span><br></pre></td></tr></table></figure><h2 id="121-Best-Time-to-Buy-and-Sell-Stock"><a href="#121-Best-Time-to-Buy-and-Sell-Stock" class="headerlink" title="121. Best Time to Buy and Sell Stock"></a>121. Best Time to Buy and Sell Stock</h2><p>k = 1.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span>(<span class="params">self, prices: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(prices) &lt; <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    buy = prices[<span class="number">0</span>]</span><br><span class="line">    profit = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(prices)):</span><br><span class="line">        buy = <span class="built_in">min</span>(prices[i], buy)</span><br><span class="line">        profit = <span class="built_in">max</span>(profit, prices[i] - buy)</span><br><span class="line">    <span class="keyword">return</span> profit</span><br></pre></td></tr></table></figure></p><h2 id="122-Best-Time-to-Buy-and-Sell-Stock-II"><a href="#122-Best-Time-to-Buy-and-Sell-Stock-II" class="headerlink" title="122. Best Time to Buy and Sell Stock II"></a>122. Best Time to Buy and Sell Stock II</h2><p>k = inf<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span>(<span class="params">self, prices: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    last_buy = -prices[<span class="number">0</span>]  <span class="comment"># have one stock, either bought or kept</span></span><br><span class="line">    last_sell = <span class="number">0</span>  <span class="comment"># have no stock, either sold or kept</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(prices)):</span><br><span class="line">        cur_buy = <span class="built_in">max</span>(last_buy, last_sell - prices[i])</span><br><span class="line">        cur_sell = <span class="built_in">max</span>(last_sell, last_buy+ prices[i])</span><br><span class="line">        last_buy = cur_buy</span><br><span class="line">        last_sell = cur_sell</span><br><span class="line">    <span class="keyword">return</span> last_sell</span><br></pre></td></tr></table></figure></p><h2 id="123-Best-Time-to-Buy-and-Sell-Stock-III"><a href="#123-Best-Time-to-Buy-and-Sell-Stock-III" class="headerlink" title="123. Best Time to Buy and Sell Stock III"></a>123. Best Time to Buy and Sell Stock III</h2><p>k = 2<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span>(<span class="params">self, prices: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    <span class="comment"># last_k_numberOfStock</span></span><br><span class="line">    gain_1_1, gain_2_1 = <span class="built_in">float</span>(<span class="string">&#x27;-inf&#x27;</span>), <span class="built_in">float</span>(<span class="string">&#x27;-inf&#x27;</span>)</span><br><span class="line">    gain_1_0, gain_2_0 = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> prices:</span><br><span class="line">        gain_2_0 = <span class="built_in">max</span>(gain_2_0, gain_2_1 + p)</span><br><span class="line">        gain_2_1 = <span class="built_in">max</span>(gain_2_1, gain_1_0 - p)</span><br><span class="line">        gain_1_0 = <span class="built_in">max</span>(gain_1_0, gain_1_1 + p)</span><br><span class="line">        gain_1_1 = <span class="built_in">max</span>(gain_1_1, -p)</span><br><span class="line">    <span class="keyword">return</span> gain_2_0</span><br></pre></td></tr></table></figure></p><h2 id="188-Best-Time-to-Buy-and-Sell-Stock-IV"><a href="#188-Best-Time-to-Buy-and-Sell-Stock-IV" class="headerlink" title="188. Best Time to Buy and Sell Stock IV"></a>188. Best Time to Buy and Sell Stock IV</h2><p>k = inf<br>The most general case. Very hard to understand<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span>(<span class="params">self, k: <span class="built_in">int</span>, prices: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(prices) &lt; <span class="number">2</span> <span class="keyword">or</span> <span class="keyword">not</span> k:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        n = <span class="built_in">len</span>(prices)</span><br><span class="line">        k = <span class="built_in">min</span>(k, n // <span class="number">2</span>)</span><br><span class="line">        </span><br><span class="line">        stock0 = [<span class="number">0</span>] * (k + <span class="number">1</span>)</span><br><span class="line">        stock1 = [<span class="built_in">float</span>(<span class="string">&#x27;-inf&#x27;</span>)] * (k + <span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> price <span class="keyword">in</span> prices:</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(k, <span class="number">0</span>, -<span class="number">1</span>):</span><br><span class="line">                stock0[j] = <span class="built_in">max</span>(stock0[j], stock1[j] + price)</span><br><span class="line">                stock1[j] = <span class="built_in">max</span>(stock1[j], stock0[j-<span class="number">1</span>] - price)</span><br><span class="line">        <span class="keyword">return</span> stock0[k]</span><br></pre></td></tr></table></figure></p><h2 id="309-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown"><a href="#309-Best-Time-to-Buy-and-Sell-Stock-with-Cooldown" class="headerlink" title="309. Best Time to Buy and Sell Stock with Cooldown"></a>309. Best Time to Buy and Sell Stock with Cooldown</h2><p>k = inf + cooldown<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span>(<span class="params">self, prices: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(prices) &lt; <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    buy = <span class="built_in">float</span>(<span class="string">&#x27;-inf&#x27;</span>)</span><br><span class="line">    sell = <span class="number">0</span></span><br><span class="line">    prev_sell = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> prices:</span><br><span class="line">        temp = sell</span><br><span class="line">        sell = <span class="built_in">max</span>(sell, buy + p)</span><br><span class="line">        buy = <span class="built_in">max</span>(buy, prev_sell - p)</span><br><span class="line">        prev_sell = temp</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> sell</span><br></pre></td></tr></table></figure></p><h2 id="714-Best-Time-to-Buy-and-Sell-Stock-with-Transaction-Fee"><a href="#714-Best-Time-to-Buy-and-Sell-Stock-with-Transaction-Fee" class="headerlink" title="714. Best Time to Buy and Sell Stock with Transaction Fee"></a>714. Best Time to Buy and Sell Stock with Transaction Fee</h2><p>The same as <strong>Best Time to Buy and Sell Stock II</strong>, just need to deduct fee from profit.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span>(<span class="params">self, prices: <span class="type">List</span>[<span class="built_in">int</span>], fee: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(prices) &lt; <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    buy = <span class="built_in">float</span>(<span class="string">&#x27;-inf&#x27;</span>)</span><br><span class="line">    sell = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> prices:</span><br><span class="line">        sell = <span class="built_in">max</span>(sell, buy + p - fee)</span><br><span class="line">        buy = <span class="built_in">max</span>(buy, sell - p)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> sell</span><br></pre></td></tr></table></figure></p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/discuss/108870/Most-consistent-ways-of-dealing-with-the-series-of-stock-problems">Most consistent ways of dealing with the series of stock problems</a></p></li><li><p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/discuss/75927/share-my-thinking-process">https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/discuss/75927/share-my-thinking-process</a></p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Dynamic Programming </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Dynamic Programming (2)</title>
      <link href="2021/01/06/al-dp-2/"/>
      <url>2021/01/06/al-dp-2/</url>
      
        <content type="html"><![CDATA[<p>Leetcode Dynamic Programming Problem Collection (2)</p><ul><li>322.Coin Change</li><li>55.Jump Game</li><li>62.Unique Paths</li><li>300.Longest Increasing Subsequence</li><li>91.Decode Way</li></ul><span id="more"></span><h2 id="322-Coin-Change"><a href="#322-Coin-Change" class="headerlink" title="322. Coin Change"></a>322. Coin Change</h2><p>for example coins = [1,2,5], x = 11<br>Three cases for selecting the last coin:</p><ol><li>the last coin is $1, f(x) = f(x - 1) + 1</li><li>the last coin is $2, f(x) = f(x - 2) + 1</li><li>the last coin is $5, f(x) = f(x - 5) + 1</li></ol><p>Hense, <code>f(x) = min(f(x - 1), f(x - 2), f(x - 5)) + 1</code><br>we can use recursion to eaisly get the global optimized result, with lot of redandunt calculation (TLE)<br>Or we can pre-calculate and save f(0) ~ f(x), to avoid repeating calculation.<br><code>f(0) = 0</code> is the base case. <code>x - coin &lt; 0</code> is invalid, for instance, f(1) = -1, no result. </p><h3 id="Bottom-up"><a href="#Bottom-up" class="headerlink" title="Bottom up"></a>Bottom up</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">coinChange</span>(<span class="params">self, coins: <span class="type">List</span>[<span class="built_in">int</span>], amount: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    dp = [amount + <span class="number">1</span>] * (amount + <span class="number">1</span>)</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(dp)):</span><br><span class="line">        <span class="keyword">for</span> coin <span class="keyword">in</span> coins:</span><br><span class="line">            <span class="keyword">if</span> i - coin &gt;= <span class="number">0</span>:</span><br><span class="line">                dp[i] = <span class="built_in">min</span>(dp[i], <span class="number">1</span> + dp[i - coin])</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span> <span class="keyword">if</span> dp[amount] == amount + <span class="number">1</span> <span class="keyword">else</span> dp[amount]</span><br></pre></td></tr></table></figure><h3 id="Top-down"><a href="#Top-down" class="headerlink" title="Top down"></a>Top down</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">coinChange</span>(<span class="params">self, coins: <span class="type">List</span>[<span class="built_in">int</span>], amount: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">change</span>(<span class="params">amount</span>):</span></span><br><span class="line">        <span class="keyword">if</span> amount <span class="keyword">in</span> found:</span><br><span class="line">            <span class="keyword">return</span> found[amount]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> amount == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> amount &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        res = <span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> coin <span class="keyword">in</span> coins:</span><br><span class="line">            cur = change(amount - coin)</span><br><span class="line">            <span class="keyword">if</span> cur != -<span class="number">1</span>:</span><br><span class="line">                res = <span class="built_in">min</span>(res, <span class="number">1</span> + cur)</span><br><span class="line">        </span><br><span class="line">        found[amount] = res <span class="keyword">if</span> res != <span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>) <span class="keyword">else</span> -<span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    </span><br><span class="line">    found = &#123;&#125;</span><br><span class="line">    change(amount)</span><br><span class="line">    <span class="keyword">return</span> found[amount] <span class="keyword">if</span> amount != <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span></span><br></pre></td></tr></table></figure><h2 id="55-Jump-Game"><a href="#55-Jump-Game" class="headerlink" title="55. Jump Game"></a>55. Jump Game</h2><p>This is a top-down solution. start the the second last element, if <code>nums[i] + i &gt;= last element</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">canJump</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">bool</span>:</span></span><br><span class="line">    last = <span class="built_in">len</span>(nums) - <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># from the second last element</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums) - <span class="number">2</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> (nums[i] + i) &gt;= last:</span><br><span class="line">            last = i</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> last == <span class="number">0</span></span><br></pre></td></tr></table></figure><h2 id="62-Unique-Paths"><a href="#62-Unique-Paths" class="headerlink" title="62. Unique Paths"></a>62. Unique Paths</h2><p>If you draw the board, for example m = 3, n = 7, then fill in the number of ways you can get to that a cell, the right-bottom coner is thr right resule. A bottom-up solution.<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1, 1, 1, 1,  1,  1,  1</span><br><span class="line">1, 2, 3, 4,  5,  6,  7</span><br><span class="line">1, 3, 6, 10, 15, 21, 28</span><br></pre></td></tr></table></figure><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">uniquePaths</span>(<span class="params">self, m: <span class="built_in">int</span>, n: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    paths = [[<span class="number">1</span>] * n <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(m)]</span><br><span class="line">    <span class="keyword">for</span> r <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, m):</span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n):</span><br><span class="line">            paths[r][c] = paths[r - <span class="number">1</span>][c] + paths[r][c - <span class="number">1</span>]</span><br><span class="line">    <span class="keyword">return</span> paths[-<span class="number">1</span>][-<span class="number">1</span>]</span><br></pre></td></tr></table></figure></p><h2 id="300-Longest-Increasing-Subsequence"><a href="#300-Longest-Increasing-Subsequence" class="headerlink" title="300. Longest Increasing Subsequence"></a>300. Longest Increasing Subsequence</h2><p>I don’t think anyone can really thinkof the greedy + binary search solution. Probaly excepting the author, and pro poker players?<br>Anyway, here’s the DP solution. Time complexity is O(n^2). dp table logs the LIS ending with <code>nums[i]</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lengthOfLIS</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    dp = [<span class="number">1</span>] * <span class="built_in">len</span>(nums)</span><br><span class="line">    res = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums)):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i):</span><br><span class="line">            <span class="keyword">if</span> nums[i] &gt; nums[j]:</span><br><span class="line">                dp[i] = <span class="built_in">max</span>(dp[i], dp[j] + <span class="number">1</span>)</span><br><span class="line">        res = <span class="built_in">max</span>(res, dp[i])</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></p><h2 id="91-Decode-Way"><a href="#91-Decode-Way" class="headerlink" title="91. Decode Way"></a>91. Decode Way</h2><p>Recursion with memorization. If you draw down the decision tree, that will be pretty straightward.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">numDecodings</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decode</span>(<span class="params">s</span>):</span></span><br><span class="line">        <span class="keyword">if</span> s <span class="keyword">in</span> memo:</span><br><span class="line">            <span class="keyword">return</span> memo[s]</span><br><span class="line">        <span class="keyword">if</span> s[<span class="number">0</span>] == <span class="string">&#x27;0&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(s) == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        ways = decode(s[<span class="number">1</span>:])</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">int</span>(s[:<span class="number">2</span>]) &lt;= <span class="number">26</span>:</span><br><span class="line">            ways += decode(s[<span class="number">2</span>:])</span><br><span class="line">        memo[s] = ways</span><br><span class="line">        <span class="keyword">return</span> ways</span><br><span class="line">    </span><br><span class="line">    memo = &#123;<span class="string">&#x27;&#x27;</span>: <span class="number">1</span>&#125;</span><br><span class="line">    <span class="keyword">return</span> decode(s)</span><br></pre></td></tr></table></figure></p><p>DP<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">numDecodings</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    <span class="keyword">if</span> s[<span class="number">0</span>] == <span class="string">&#x27;0&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">elif</span> <span class="built_in">len</span>(s) &lt; <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    dp = [<span class="number">0</span>] * <span class="built_in">len</span>(s)</span><br><span class="line">    dp[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    dp[<span class="number">1</span>] += s[<span class="number">1</span>] != <span class="string">&#x27;0&#x27;</span></span><br><span class="line">    dp[<span class="number">1</span>] += <span class="number">10</span> &lt;= <span class="built_in">int</span>(s[:<span class="number">2</span>]) &lt;= <span class="number">26</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="built_in">len</span>(s)):</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># single digit</span></span><br><span class="line">        <span class="keyword">if</span> s[i] != <span class="string">&#x27;0&#x27;</span>:</span><br><span class="line">            dp[i] += dp[i - <span class="number">1</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># double digits</span></span><br><span class="line">        <span class="keyword">if</span> <span class="number">10</span> &lt;= <span class="built_in">int</span>(s[i - <span class="number">1</span> : i + <span class="number">1</span>]) &lt;= <span class="number">26</span>:</span><br><span class="line">            dp[i] += dp[i - <span class="number">2</span>]</span><br><span class="line">    <span class="keyword">return</span> dp[-<span class="number">1</span>]</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Dynamic Programming </tag>
            
            <tag> Greedy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Two Pointers (2)</title>
      <link href="2021/01/03/al-two-pointers-2/"/>
      <url>2021/01/03/al-two-pointers-2/</url>
      
        <content type="html"><![CDATA[<p>Two pointers problem set (2)</p><ul><li>11.Container With Most Water</li><li>532.K-diff Pairs in an Array</li></ul><p>N Sum problem set:</p><ul><li>1.Two Sum</li><li>167.Two Sum II - Input array is sorted</li><li>15.3Sum</li><li>16.3Sum Closest</li><li>18.4Sum</li></ul><span id="more"></span><h2 id="11-Container-With-Most-Water"><a href="#11-Container-With-Most-Water" class="headerlink" title="11. Container With Most Water"></a>11. Container With Most Water</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maxArea</span>(<span class="params">self, height: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    left = <span class="number">0</span></span><br><span class="line">    right = <span class="built_in">len</span>(height) - <span class="number">1</span></span><br><span class="line">    res = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> left &lt; right:</span><br><span class="line">        cur = (right - left) * <span class="built_in">min</span>(height[left], height[right])</span><br><span class="line">        res = <span class="built_in">max</span>(cur, res)</span><br><span class="line">        <span class="keyword">if</span> height[left] &lt; height[right]:</span><br><span class="line">            left += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            right -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><h2 id="532-K-diff-Pairs-in-an-Array"><a href="#532-K-diff-Pairs-in-an-Array" class="headerlink" title="532. K-diff Pairs in an Array"></a>532. K-diff Pairs in an Array</h2><h3 id="Two-Pointers"><a href="#Two-Pointers" class="headerlink" title="Two Pointers"></a>Two Pointers</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findPairs</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    res = <span class="number">0</span></span><br><span class="line">    l, r = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    nums.sort()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> r &lt; <span class="built_in">len</span>(nums) <span class="keyword">and</span> l &lt; <span class="built_in">len</span>(nums):</span><br><span class="line">        <span class="keyword">if</span> l == r <span class="keyword">or</span> (nums[r] - nums[l]) &lt; k:</span><br><span class="line">            r += <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> nums[r] - nums[l] &gt; k:</span><br><span class="line">            l += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            l += <span class="number">1</span></span><br><span class="line">            res += <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> l &lt; <span class="built_in">len</span>(nums) <span class="keyword">and</span> nums[l] == nums[l - <span class="number">1</span>]:</span><br><span class="line">                l += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><h3 id="Hashmap"><a href="#Hashmap" class="headerlink" title="Hashmap"></a>Hashmap</h3><p>Much eaiser than two pointers solution, time is O(n)<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findPairs</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    counter = Counter(nums)</span><br><span class="line">    res = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> counter:</span><br><span class="line">        <span class="keyword">if</span> k == <span class="number">0</span> <span class="keyword">and</span> counter[x] &gt; <span class="number">1</span>:</span><br><span class="line">            res += <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> k &gt; <span class="number">0</span> <span class="keyword">and</span> x + k <span class="keyword">in</span> counter:</span><br><span class="line">            res += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></p><h2 id="N-Sum-Problem"><a href="#N-Sum-Problem" class="headerlink" title="N Sum Problem:"></a>N Sum Problem:</h2><h3 id="1-Two-Sum"><a href="#1-Two-Sum" class="headerlink" title="1. Two Sum"></a>1. Two Sum</h3><p>Unsort array, use hash map<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">twoSum</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], target: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span></span><br><span class="line">    dic = &#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i, n <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):</span><br><span class="line">        <span class="keyword">if</span> n <span class="keyword">in</span> dic:</span><br><span class="line">            <span class="keyword">return</span> [dic[n], i]</span><br><span class="line">        dic[target - n] = i</span><br></pre></td></tr></table></figure></p><h3 id="167-Two-Sum-II-Input-array-is-sorted"><a href="#167-Two-Sum-II-Input-array-is-sorted" class="headerlink" title="167. Two Sum II - Input array is sorted"></a>167. Two Sum II - Input array is sorted</h3><p>Sorted array use 2 pointers<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">twoSum</span>(<span class="params">self, numbers: <span class="type">List</span>[<span class="built_in">int</span>], target: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span></span><br><span class="line">    lo, hi = <span class="number">0</span>, <span class="built_in">len</span>(numbers) - <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> lo &lt; hi:</span><br><span class="line">        cur = numbers[lo] + numbers[hi]</span><br><span class="line">        <span class="keyword">if</span> cur == target:</span><br><span class="line">            <span class="keyword">return</span> (lo + <span class="number">1</span>, hi + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">elif</span> cur &lt; target:</span><br><span class="line">            lo += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            hi -= <span class="number">1</span></span><br></pre></td></tr></table></figure></p><h3 id="15-3Sum"><a href="#15-3Sum" class="headerlink" title="15. 3Sum"></a>15. 3Sum</h3><h4 id="Two-Pointers-1"><a href="#Two-Pointers-1" class="headerlink" title="Two Pointers"></a>Two Pointers</h4><p>Remember to skip duplicate result.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">threeSum</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">twoSum</span>(<span class="params">nums, target, start</span>):</span></span><br><span class="line">        res = []</span><br><span class="line">        lo, hi = start, <span class="built_in">len</span>(nums) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> lo &lt; hi:</span><br><span class="line">            cur = nums[lo] + nums[hi]</span><br><span class="line">            <span class="keyword">if</span> cur &lt; target:</span><br><span class="line">                lo += <span class="number">1</span></span><br><span class="line">                <span class="keyword">while</span> lo &lt; hi <span class="keyword">and</span> nums[lo] == nums[lo - <span class="number">1</span>]:</span><br><span class="line">                    lo += <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> cur &gt; target:</span><br><span class="line">                hi -= <span class="number">1</span></span><br><span class="line">                <span class="keyword">while</span> lo &lt; hi <span class="keyword">and</span> nums[hi] == nums[hi + <span class="number">1</span>]:</span><br><span class="line">                    hi -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                res.append([nums[lo], nums[hi]])</span><br><span class="line">                lo += <span class="number">1</span></span><br><span class="line">                hi -= <span class="number">1</span></span><br><span class="line">                <span class="keyword">while</span> lo &lt; hi <span class="keyword">and</span> nums[lo] == nums[lo - <span class="number">1</span>]:</span><br><span class="line">                    lo += <span class="number">1</span></span><br><span class="line">                <span class="keyword">while</span> lo &lt; hi <span class="keyword">and</span> nums[hi] == nums[hi + <span class="number">1</span>]:</span><br><span class="line">                    hi -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">    res = []</span><br><span class="line">    nums.sort()</span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(nums) - <span class="number">2</span>:</span><br><span class="line">        two_sums = twoSum(nums, -nums[i], i + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">for</span> s <span class="keyword">in</span> two_sums:</span><br><span class="line">            res.append([nums[i]] + s)</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(nums) - <span class="number">2</span> <span class="keyword">and</span> nums[i] == nums[i - <span class="number">1</span>]:</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></p><h4 id="Hashmap-1"><a href="#Hashmap-1" class="headerlink" title="Hashmap"></a>Hashmap</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">threeSum</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">twoSum</span>(<span class="params">nums, target, res</span>):</span></span><br><span class="line">        seen = <span class="built_in">set</span>()</span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(nums):</span><br><span class="line">            x = target - nums[i]</span><br><span class="line">            <span class="keyword">if</span> x <span class="keyword">in</span> seen:</span><br><span class="line">                res.append([-target, nums[i], x])</span><br><span class="line">                <span class="keyword">while</span> i + <span class="number">1</span> &lt; <span class="built_in">len</span>(nums) <span class="keyword">and</span> nums[i] == nums[i + <span class="number">1</span>]:</span><br><span class="line">                    i += <span class="number">1</span></span><br><span class="line">            seen.add(nums[i])</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    res = []</span><br><span class="line">    nums.sort()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums)):</span><br><span class="line"></span><br><span class="line">        <span class="comment"># all following nums are greater than 0</span></span><br><span class="line">        <span class="keyword">if</span> nums[i] &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">0</span> <span class="keyword">or</span> nums[i - <span class="number">1</span>] != nums[i]:</span><br><span class="line">            twoSum(nums[i + <span class="number">1</span>:], -nums[i], res)</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><h3 id="16-3Sum-Closest"><a href="#16-3Sum-Closest" class="headerlink" title="16. 3Sum Closest"></a>16. 3Sum Closest</h3><p>Similar with 3Sum<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">threeSumClosest</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], target: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">twoSum</span>(<span class="params">nums, target, start</span>):</span></span><br><span class="line">        res = <span class="literal">None</span></span><br><span class="line">        diff = <span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>)</span><br><span class="line">        lo, hi = start, <span class="built_in">len</span>(nums) - <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> lo &lt; hi:</span><br><span class="line">            cur = nums[lo] + nums[hi]</span><br><span class="line">            <span class="keyword">if</span> cur == target:</span><br><span class="line">                <span class="keyword">return</span> cur</span><br><span class="line"></span><br><span class="line">            cur_diff = <span class="built_in">abs</span>(target - cur)</span><br><span class="line">            <span class="keyword">if</span> cur_diff &lt; diff:</span><br><span class="line">                res = cur</span><br><span class="line">                diff = cur_diff</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> cur &lt; target:</span><br><span class="line">                lo += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                hi -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    </span><br><span class="line">    nums.sort()</span><br><span class="line">    res = <span class="literal">None</span></span><br><span class="line">    diff = <span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(nums) - <span class="number">2</span>):</span><br><span class="line">        cur_sum = nums[i] + twoSum(nums, target - nums[i], i + <span class="number">1</span>)</span><br><span class="line">        cur_diff = <span class="built_in">abs</span>(target - cur_sum)</span><br><span class="line">        <span class="keyword">if</span> cur_diff == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> cur_sum</span><br><span class="line">        <span class="keyword">if</span> cur_diff &lt; diff:</span><br><span class="line">            res = cur_sum</span><br><span class="line">            diff = cur_diff</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></p><h3 id="18-4Sum"><a href="#18-4Sum" class="headerlink" title="18. 4Sum"></a>18. 4Sum</h3><p>The same as 3 sum.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">twoSum</span>(<span class="params">self, nums, target, start</span>):</span></span><br><span class="line">        res = []</span><br><span class="line">        lo, hi = start, <span class="built_in">len</span>(nums) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> lo &lt; hi:</span><br><span class="line">            cur = nums[lo] + nums[hi]</span><br><span class="line">            <span class="keyword">if</span> cur &lt; target:</span><br><span class="line">                lo += <span class="number">1</span></span><br><span class="line">                <span class="keyword">while</span> lo &lt; hi <span class="keyword">and</span> nums[lo] == nums[lo - <span class="number">1</span>]:</span><br><span class="line">                    lo += <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> cur &gt; target:</span><br><span class="line">                hi -= <span class="number">1</span></span><br><span class="line">                <span class="keyword">while</span> lo &lt; hi <span class="keyword">and</span> nums[hi] == nums[hi + <span class="number">1</span>]:</span><br><span class="line">                    hi -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                res.append([nums[lo], nums[hi]])</span><br><span class="line">                lo += <span class="number">1</span></span><br><span class="line">                hi -= <span class="number">1</span></span><br><span class="line">                <span class="keyword">while</span> lo &lt; hi <span class="keyword">and</span> nums[lo] == nums[lo - <span class="number">1</span>]:</span><br><span class="line">                    lo += <span class="number">1</span></span><br><span class="line">                <span class="keyword">while</span> lo &lt; hi <span class="keyword">and</span> nums[hi] == nums[hi + <span class="number">1</span>]:</span><br><span class="line">                    hi -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">threeSum</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], target, start, </span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span></span><br><span class="line">        res = []</span><br><span class="line">        i = start</span><br><span class="line">        <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(nums) - <span class="number">2</span>:</span><br><span class="line">            two_sums = self.twoSum(nums, target - nums[i], i + <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">for</span> s <span class="keyword">in</span> two_sums:</span><br><span class="line">                res.append([nums[i]] + s)</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(nums) - <span class="number">2</span> <span class="keyword">and</span> nums[i] == nums[i - <span class="number">1</span>]:</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fourSum</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], target: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span></span><br><span class="line">        nums.sort()</span><br><span class="line">        res = []</span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(nums) - <span class="number">3</span>:</span><br><span class="line">            triples = self.threeSum(nums, target - nums[i], i + <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">for</span> t <span class="keyword">in</span> triples:</span><br><span class="line">                res.append([nums[i]] + t)</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(nums) - <span class="number">3</span> <span class="keyword">and</span> nums[i] == nums[i - <span class="number">1</span>]:</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></p><p>But, we can generlize it to a N Sum function</p><h3 id="N-Sum"><a href="#N-Sum" class="headerlink" title="N Sum"></a>N Sum</h3><p>The list <code>nums</code> should sort outside of the function, or else the list will resort in every recursion.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nSum</span>(<span class="params">self, nums, target, n, start=<span class="number">0</span></span>):</span></span><br><span class="line">        <span class="comment"># nums.sort()  # assume the nums is sorted.</span></span><br><span class="line">        res = []</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 2 sum is base case.</span></span><br><span class="line">        <span class="keyword">if</span> n &lt; <span class="number">2</span> <span class="keyword">or</span> <span class="built_in">len</span>(nums) &lt; n:</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">2</span>:</span><br><span class="line">            lo, hi = start, <span class="built_in">len</span>(nums) - <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> lo &lt; hi:</span><br><span class="line">                cur = nums[lo] + nums[hi]</span><br><span class="line">                <span class="keyword">if</span> cur &lt; target:</span><br><span class="line">                    lo += <span class="number">1</span></span><br><span class="line">                    <span class="keyword">while</span> lo &lt; hi <span class="keyword">and</span> nums[lo] == nums[lo - <span class="number">1</span>]:</span><br><span class="line">                        lo += <span class="number">1</span></span><br><span class="line">                <span class="keyword">elif</span> cur &gt; target:</span><br><span class="line">                    hi -= <span class="number">1</span></span><br><span class="line">                    <span class="keyword">while</span> lo &lt; hi <span class="keyword">and</span> nums[hi] == nums[hi + <span class="number">1</span>]:</span><br><span class="line">                        hi -= <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    res.append([nums[lo], nums[hi]])</span><br><span class="line">                    lo += <span class="number">1</span></span><br><span class="line">                    hi -= <span class="number">1</span></span><br><span class="line">                    <span class="keyword">while</span> lo &lt; hi <span class="keyword">and</span> nums[lo] == nums[lo - <span class="number">1</span>]:</span><br><span class="line">                        lo += <span class="number">1</span></span><br><span class="line">                    <span class="keyword">while</span> lo &lt; hi <span class="keyword">and</span> nums[hi] == nums[hi + <span class="number">1</span>]:</span><br><span class="line">                        hi -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">        i = start</span><br><span class="line">        <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(nums) - (n - <span class="number">1</span>):</span><br><span class="line">            nsum = self.nSum(nums, target - nums[i], n - <span class="number">1</span>, i + <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">for</span> s <span class="keyword">in</span> nsum:</span><br><span class="line">                res.append([nums[i]] + s)</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(nums) - (n - <span class="number">1</span>) <span class="keyword">and</span> nums[i] == nums[i - <span class="number">1</span>]:</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></p><p>So, for the four sum problem, just simplly call<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fourSum</span>(<span class="params">self, nums, target</span>):</span></span><br><span class="line">    nums.sort()</span><br><span class="line">    <span class="keyword">return</span> self.nSum(nums, target, <span class="number">4</span>)</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Two Pointers </tag>
            
            <tag> Sliding windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Two Pointers (1) - Sliding Window</title>
      <link href="2021/01/01/al-two-pointers-1/"/>
      <url>2021/01/01/al-two-pointers-1/</url>
      
        <content type="html"><![CDATA[<p>Two pointers problem set (1) - Sliding Window</p><ul><li>76.Minimum Window Substring</li><li>567.Permutation in String</li><li>438.Find All Anagrams in a String</li><li>3.Longest Substring Without Repeating Characters</li><li>239.Sliding Window Maximum</li></ul><span id="more"></span><h2 id="Template"><a href="#Template" class="headerlink" title="Template"></a>Template</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># find string t in string s</span></span><br><span class="line"><span class="keyword">from</span> collection <span class="keyword">import</span> Counter, defaultdict</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sliding_window</span>(<span class="params">s, t</span>):</span></span><br><span class="line">need = Counter(t)</span><br><span class="line">valid = <span class="number">0</span></span><br><span class="line">left = right = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> right &lt; <span class="built_in">len</span>(s):</span><br><span class="line">c = s[right]</span><br><span class="line">right += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># do something</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> window needs shrink:</span><br><span class="line">d = s[left]</span><br><span class="line">left += <span class="number">1</span></span><br><span class="line"><span class="comment"># do something</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="76-Minimum-Window-Substring"><a href="#76-Minimum-Window-Substring" class="headerlink" title="76. Minimum Window Substring"></a>76. Minimum Window Substring</h2><ol><li>Extend right pointer until all characters found</li><li>Log smallest window</li><li>Shrink left pointer until found the next valid window</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter, defaultdict</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">minWindow</span>(<span class="params">self, s: <span class="built_in">str</span>, t: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span></span><br><span class="line">    needs = <span class="built_in">dict</span>(Counter(t))</span><br><span class="line">    left = right = <span class="number">0</span></span><br><span class="line">    counter = <span class="built_in">len</span>(t)</span><br><span class="line">    min_len = <span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>)</span><br><span class="line">    res = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># search [left. right)</span></span><br><span class="line">    <span class="keyword">while</span> right &lt; <span class="built_in">len</span>(s):</span><br><span class="line">        </span><br><span class="line">        c = s[right]</span><br><span class="line">        <span class="keyword">if</span> c <span class="keyword">in</span> needs:</span><br><span class="line">        <span class="comment"># is a valid character</span></span><br><span class="line">        needs[c] -= <span class="number">1</span></span><br><span class="line">            counter -= needs[c] &gt;= <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        right += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">not</span> counter:</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># update res</span></span><br><span class="line">            <span class="keyword">if</span> (right - left) &lt; min_len:</span><br><span class="line">                min_len = right - left</span><br><span class="line">                res = s[left: right]</span><br><span class="line">            </span><br><span class="line">            c = s[left]</span><br><span class="line">            <span class="keyword">if</span> c <span class="keyword">in</span> needs:</span><br><span class="line">                needs[c] += <span class="number">1</span></span><br><span class="line">                counter += needs[c] &gt; <span class="number">0</span></span><br><span class="line">            </span><br><span class="line">            left += <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><h2 id="567-Permutation-in-String"><a href="#567-Permutation-in-String" class="headerlink" title="567. Permutation in String"></a>567. Permutation in String</h2><p>True criteria is <code>len(s1) == window size</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">checkInclusion</span>(<span class="params">self, s1: <span class="built_in">str</span>, s2: <span class="built_in">str</span></span>) -&gt; <span class="built_in">bool</span>:</span></span><br><span class="line">    </span><br><span class="line">    needs = Counter(s1)</span><br><span class="line">    counter = <span class="built_in">len</span>(s1)</span><br><span class="line">    </span><br><span class="line">    left = right = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> right &lt; <span class="built_in">len</span>(s2):</span><br><span class="line">        </span><br><span class="line">        c = s2[right]</span><br><span class="line">        <span class="keyword">if</span> c <span class="keyword">in</span> needs:</span><br><span class="line">            needs[c] -= <span class="number">1</span></span><br><span class="line">            counter -= needs[c] &gt;= <span class="number">0</span></span><br><span class="line">        right += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">not</span> counter:</span><br><span class="line">            <span class="keyword">if</span> right - left == <span class="built_in">len</span>(s1):</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            c = s2[left]</span><br><span class="line">            <span class="keyword">if</span> c <span class="keyword">in</span> needs:</span><br><span class="line">                needs[c] += <span class="number">1</span></span><br><span class="line">                counter += needs[c] &gt; <span class="number">0</span></span><br><span class="line">            left += <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure></p><h2 id="438-Find-All-Anagrams-in-a-String"><a href="#438-Find-All-Anagrams-in-a-String" class="headerlink" title="438. Find All Anagrams in a String"></a>438. Find All Anagrams in a String</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findAnagrams</span>(<span class="params">self, s: <span class="built_in">str</span>, p: <span class="built_in">str</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span></span><br><span class="line">    needs = Counter(p)</span><br><span class="line">    counter = <span class="built_in">len</span>(p)</span><br><span class="line">    left = right = <span class="number">0</span></span><br><span class="line">    res = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> right &lt; <span class="built_in">len</span>(s):</span><br><span class="line">        c = s[right]</span><br><span class="line">        <span class="keyword">if</span> c <span class="keyword">in</span> needs:</span><br><span class="line">            needs[c] -= <span class="number">1</span></span><br><span class="line">            counter -= needs[c] &gt;= <span class="number">0</span></span><br><span class="line">        right += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># is a valid window</span></span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">not</span> counter:</span><br><span class="line">            c = s[left]</span><br><span class="line">            <span class="keyword">if</span> (right - left) == <span class="built_in">len</span>(p):</span><br><span class="line">                res.append(left)</span><br><span class="line">            <span class="keyword">if</span> c <span class="keyword">in</span> needs:</span><br><span class="line">                needs[c] += <span class="number">1</span></span><br><span class="line">                counter += needs[c] &gt; <span class="number">0</span></span><br><span class="line">            left += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><h2 id="3-Longest-Substring-Without-Repeating-Characters"><a href="#3-Longest-Substring-Without-Repeating-Characters" class="headerlink" title="3. Longest Substring Without Repeating Characters"></a>3. Longest Substring Without Repeating Characters</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lengthOfLongestSubstring</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    </span><br><span class="line">    cur = defaultdict(<span class="built_in">int</span>)</span><br><span class="line">    left = right = <span class="number">0</span></span><br><span class="line">    res = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> right &lt; <span class="built_in">len</span>(s):</span><br><span class="line">        cur[s[right]] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> cur[s[right]] &gt; <span class="number">1</span>:</span><br><span class="line">            cur[s[left]] -= <span class="number">1</span></span><br><span class="line">            left += <span class="number">1</span></span><br><span class="line">        right += <span class="number">1</span></span><br><span class="line">        res = <span class="built_in">max</span>(res, right - left)</span><br><span class="line">            </span><br><span class="line">    <span class="keyword">return</span> res </span><br></pre></td></tr></table></figure><h2 id="239-Sliding-Window-Maximum"><a href="#239-Sliding-Window-Maximum" class="headerlink" title="239. Sliding Window Maximum"></a>239. Sliding Window Maximum</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maxSlidingWindow</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], k: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">window_push</span>(<span class="params">n</span>):</span></span><br><span class="line">        <span class="comment"># delete all element less than n</span></span><br><span class="line">        <span class="keyword">while</span> window <span class="keyword">and</span> window[-<span class="number">1</span>] &lt; n:</span><br><span class="line">            window.pop()</span><br><span class="line">        window.append(n)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">window_get_max</span>():</span></span><br><span class="line">        <span class="keyword">return</span> window[<span class="number">0</span>] <span class="keyword">if</span> window <span class="keyword">else</span> <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">window_pop</span>(<span class="params">n</span>):</span></span><br><span class="line">        <span class="keyword">return</span> window.popleft() <span class="keyword">if</span> window <span class="keyword">and</span> n == window[<span class="number">0</span>] <span class="keyword">else</span> <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    window = deque([])</span><br><span class="line">    res = []</span><br><span class="line">    <span class="keyword">for</span> i, n <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):</span><br><span class="line">        window_push(n)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> i &gt;= k - <span class="number">1</span>:</span><br><span class="line">            <span class="comment"># generate res when i &gt;= k - 1</span></span><br><span class="line">            res.append(window_get_max())</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># remove left</span></span><br><span class="line">            window_pop(nums[i - k + <span class="number">1</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Two Pointers </tag>
            
            <tag> Sliding windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Binary Search (2)</title>
      <link href="2020/12/30/al-binary-search-2/"/>
      <url>2020/12/30/al-binary-search-2/</url>
      
        <content type="html"><![CDATA[<p>Leetcode Binary Search Problem Set (2) - Hard</p><ul><li>410.Split Array Largest Sum</li></ul><span id="more"></span><h2 id="410-Split-Array-Largest-Sum"><a href="#410-Split-Array-Largest-Sum" class="headerlink" title="410. Split Array Largest Sum"></a>410. Split Array Largest Sum</h2><p>min largest sum in range: <code>[max(nums), sum(nums) + 1)</code><br>Basic idea is directly search the correct answer.</p><p>Given upper bound [max_sum], calculate the number of subarray that nums need to split into [cnt]<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if cnt &gt; m:  # given max_sum is too small</span><br><span class="line">    lo = max_sum + 1</span><br><span class="line">else:</span><br><span class="line">    hi = max_sum</span><br></pre></td></tr></table></figure><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">splitArray</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], m: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">splitable</span>(<span class="params">max_sum</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        split nums into k groups, sum of each group &lt;= max_sum</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        cur_sum = <span class="number">0</span></span><br><span class="line">        cnt = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> nums:</span><br><span class="line">            cur_sum += n</span><br><span class="line">            <span class="keyword">if</span> cur_sum &gt; max_sum:</span><br><span class="line">                cnt += <span class="number">1</span></span><br><span class="line">                cur_sum = n</span><br><span class="line">                <span class="keyword">if</span> cnt &gt; m:  <span class="comment"># max_sum too small</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">    lo = <span class="built_in">max</span>(nums)</span><br><span class="line">    hi = <span class="built_in">sum</span>(nums) + <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> lo &lt; hi:</span><br><span class="line">        max_sum = lo + (hi - lo ) // <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> splitable(max_sum):</span><br><span class="line">            lo = max_sum + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            hi = max_sum</span><br><span class="line">    <span class="keyword">return</span> lo</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Binary Search </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Binary Search (1)</title>
      <link href="2020/12/29/al-binary-search-1/"/>
      <url>2020/12/29/al-binary-search-1/</url>
      
        <content type="html"><![CDATA[<p>Classic binary search scenarios are find a number, and find boundaries.<br>Leetcode Binary Search Problem Set (1) - Medium</p><ul><li>278.First Bad Version</li><li>33.Search in Rotated Sorted Array</li><li>1283.Find the Smallest Divisor Given a Threshold</li><li>875.Koko Eating Bananas</li><li>1011.Capacity To Ship Packages Within D Days</li><li>981.Time Based Key-Value Store<span id="more"></span></li></ul><h2 id="Template"><a href="#Template" class="headerlink" title="Template"></a>Template</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">binary_search</span>(<span class="params">nums, target</span>):</span></span><br><span class="line">    left = <span class="number">0</span></span><br><span class="line">    right = ...</span><br><span class="line">    <span class="keyword">while</span> ...:</span><br><span class="line">        mid = left + (right - left) // <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> nums[mid] == target:</span><br><span class="line">            ...</span><br><span class="line">        <span class="keyword">elif</span> nums[mid] &lt; target:</span><br><span class="line">            left = ...</span><br><span class="line">        <span class="keyword">elif</span> nums[mid] &gt; target:</span><br><span class="line">            right = ...</span><br><span class="line">    <span class="keyword">return</span> ...</span><br></pre></td></tr></table></figure><ul><li><em>Using <strong>elif</strong> instead of <strong>else</strong> in binary search can show more details, which is better for beginner to debug.</em></li><li><em><code>left + (right - left) / 2</code> is the same as <code>(right + left) / 2</code>, is avoiding int overflow. Python int won’t overflow though.</em></li></ul><h3 id="Find-a-number"><a href="#Find-a-number" class="headerlink" title="Find a number"></a>Find a number</h3><p>Search interval <strong>[left, right]</strong>, <code>left == right + 1</code> is the terminal criteria, which is an empty interval.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">binary_search</span>(<span class="params">nums, target</span>):</span></span><br><span class="line"></span><br><span class="line">    left = <span class="number">0</span></span><br><span class="line">    right = <span class="built_in">len</span>(nums) - <span class="number">1</span>  <span class="comment"># the last element</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> left &lt;= right:</span><br><span class="line"></span><br><span class="line">        mid = left + (right - left) // <span class="number">2</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> nums[mid] == target:</span><br><span class="line">            <span class="keyword">return</span> mid</span><br><span class="line"></span><br><span class="line">        <span class="comment"># search[mid + 1, right]</span></span><br><span class="line">        <span class="keyword">elif</span> nums[mid] &lt; target:</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># search [left, mid - 1]</span></span><br><span class="line">        <span class="keyword">elif</span> nums[mid] &gt; target:</span><br><span class="line">            right = mid - <span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h3 id="Find-Left-Boundary"><a href="#Find-Left-Boundary" class="headerlink" title="Find Left Boundary"></a>Find Left Boundary</h3><p>Search <code>[left, right)</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find_left_bound</span>(<span class="params">nums, target</span>):</span></span><br><span class="line">    left = <span class="number">0</span></span><br><span class="line">    right = <span class="built_in">len</span>(nums)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> left &lt; right:</span><br><span class="line"></span><br><span class="line">        mid = left + (right - left) // <span class="number">2</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> nums[mid] == target:</span><br><span class="line">            right = mid</span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> nums[mid] &lt; target:</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> nums[mid] &gt; target:</span><br><span class="line">            right = mid</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> left</span><br></pre></td></tr></table></figure><p>Shrink right bound to get the </p><h3 id="Find-Right-Boundary"><a href="#Find-Right-Boundary" class="headerlink" title="Find Right Boundary"></a>Find Right Boundary</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find_right_bound</span>(<span class="params">nums, target</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line"></span><br><span class="line">    left = <span class="number">0</span></span><br><span class="line">    right = <span class="built_in">len</span>(nums)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> left &lt; right:</span><br><span class="line"></span><br><span class="line">        mid = left + (right - left) // <span class="number">2</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> nums[mid] == target:</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> nums[mid] &lt; target:</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> nums[mid] &gt; target:</span><br><span class="line">            right = mid</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> left - <span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="278-First-Bad-Version"><a href="#278-First-Bad-Version" class="headerlink" title="278. First Bad Version"></a>278. First Bad Version</h2><p>Finding the left bound of bad version interval<br>[G, G, G, G, G, G, G, B, B, B] =&gt; serch =&gt; [B, B, B]</p><p>The left pointer should point to the first bad version.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">firstBadVersion</span>(<span class="params">self, n</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    :type n: int</span></span><br><span class="line"><span class="string">    :rtype: int</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    left = <span class="number">1</span></span><br><span class="line">    right = n</span><br><span class="line">    <span class="keyword">while</span> left &lt; right:</span><br><span class="line">        mid = left + (right - left) // <span class="number">2</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> isBadVersion(mid):</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            right = mid</span><br><span class="line">    <span class="keyword">return</span> left</span><br></pre></td></tr></table></figure></p><h2 id="33-Search-in-Rotated-Sorted-Array"><a href="#33-Search-in-Rotated-Sorted-Array" class="headerlink" title="33. Search in Rotated Sorted Array"></a>33. Search in Rotated Sorted Array</h2><p>Use binary search 2 times: </p><ol><li>find pivot (actually is find left bound)</li><li>find target number. </li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">search</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], target: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    left = <span class="number">0</span></span><br><span class="line">    right = <span class="built_in">len</span>(nums) - <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> nums[left] &gt; nums[right]:</span><br><span class="line">        <span class="comment"># search pivot in [left, right)</span></span><br><span class="line">        <span class="keyword">while</span> left &lt; right:</span><br><span class="line">            mid = (left + right) // <span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> nums[mid] &gt; nums[right]:</span><br><span class="line">                left = mid + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                right = mid</span><br><span class="line"></span><br><span class="line">        p = left</span><br><span class="line">        <span class="comment"># search left</span></span><br><span class="line">        <span class="keyword">if</span> target &gt;= nums[<span class="number">0</span>]:</span><br><span class="line">            left = <span class="number">0</span></span><br><span class="line">            right = p - <span class="number">1</span></span><br><span class="line">        <span class="comment"># search right</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            left = p</span><br><span class="line">            right = <span class="built_in">len</span>(nums) - <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> left &lt;= right:</span><br><span class="line">        mid = (left + right) // <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> nums[mid] == target:</span><br><span class="line">            <span class="keyword">return</span> mid</span><br><span class="line">        <span class="keyword">elif</span> nums[mid] &lt; target:</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            right = mid - <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="1283-Find-the-Smallest-Divisor-Given-a-Threshold"><a href="#1283-Find-the-Smallest-Divisor-Given-a-Threshold" class="headerlink" title="1283. Find the Smallest Divisor Given a Threshold"></a>1283. Find the Smallest Divisor Given a Threshold</h2><p>divisor range: <em>[1, max(nums)]</em><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> ceil</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">smallestDivisor</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], threshold: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    lo = <span class="number">1</span></span><br><span class="line">    hi = <span class="built_in">max</span>(nums)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> lo &lt; hi:</span><br><span class="line">        mid = lo + (hi - lo) // <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">sum</span>([ceil(n / mid) <span class="keyword">for</span> n <span class="keyword">in</span> nums]) &gt; threshold:</span><br><span class="line">            <span class="comment"># divisor too small</span></span><br><span class="line">            lo = mid + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            hi = mid</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> lo</span><br></pre></td></tr></table></figure></p><h2 id="875-Koko-Eating-Bananas"><a href="#875-Koko-Eating-Bananas" class="headerlink" title="875. Koko Eating Bananas"></a>875. Koko Eating Bananas</h2><p>Typical find a number problem.<br>When jump out of the loop, left == right + 1, is the max number KOKO should eat.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> ceil</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">minEatingSpeed</span>(<span class="params">self, piles: <span class="type">List</span>[<span class="built_in">int</span>], H: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    left = <span class="number">1</span></span><br><span class="line">    right = <span class="built_in">max</span>(piles)  <span class="comment"># 1 pile / h</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> left &lt;= right:</span><br><span class="line">        mid = left + (right - left) // <span class="number">2</span></span><br><span class="line">        cur = <span class="built_in">sum</span>([ceil(p / mid) <span class="keyword">for</span> p <span class="keyword">in</span> piles])</span><br><span class="line">        <span class="keyword">if</span> cur == H:</span><br><span class="line">            <span class="keyword">return</span> mid</span><br><span class="line">        <span class="keyword">elif</span> cur &gt; H:</span><br><span class="line">            <span class="comment"># need less time, eat more banana each time</span></span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            right = mid - <span class="number">1</span></span><br><span class="line">    <span class="comment"># left == right + 1</span></span><br><span class="line">    <span class="keyword">return</span> left</span><br></pre></td></tr></table></figure></p><h2 id="1011-Capacity-To-Ship-Packages-Within-D-Days"><a href="#1011-Capacity-To-Ship-Packages-Within-D-Days" class="headerlink" title="1011. Capacity To Ship Packages Within D Days"></a>1011. Capacity To Ship Packages Within D Days</h2><p>Left bound: max -&gt; as least can move the heaviest item<br>Right bound: sum -&gt; move all in one day<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">shipWithinDays</span>(<span class="params">self, weights: <span class="type">List</span>[<span class="built_in">int</span>], D: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_min_days</span>(<span class="params">weights, cap</span>):</span></span><br><span class="line">        day, cur = <span class="number">1</span>, <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> w <span class="keyword">in</span> weights:</span><br><span class="line">            <span class="keyword">if</span> cur + w &gt; cap:</span><br><span class="line">                day += <span class="number">1</span></span><br><span class="line">                cur = <span class="number">0</span></span><br><span class="line">            cur += w</span><br><span class="line">        <span class="keyword">return</span> day   </span><br><span class="line">    </span><br><span class="line">    left = <span class="built_in">max</span>(weights)</span><br><span class="line">    right = <span class="built_in">sum</span>(weights)</span><br><span class="line">    <span class="keyword">while</span> left &lt;= right:</span><br><span class="line">        mid = left + (right - left) // <span class="number">2</span></span><br><span class="line">        day = get_min_days(weights, mid)</span><br><span class="line">        <span class="keyword">if</span> day &gt; D:</span><br><span class="line">            left = mid + <span class="number">1</span>  <span class="comment"># load more each day</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            right = mid - <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> left</span><br></pre></td></tr></table></figure></p><h2 id="981-Time-Based-Key-Value-Store"><a href="#981-Time-Based-Key-Value-Store" class="headerlink" title="981. Time Based Key-Value Store"></a>981. Time Based Key-Value Store</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TimeMap</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.keymap = defaultdict(<span class="built_in">list</span>)</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set</span>(<span class="params">self, key: <span class="built_in">str</span>, value: <span class="built_in">str</span>, timestamp: <span class="built_in">int</span></span>) -&gt; <span class="literal">None</span>:</span></span><br><span class="line">        self.keymap[key].append((timestamp, value))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, key: <span class="built_in">str</span>, timestamp: <span class="built_in">int</span></span>) -&gt; <span class="built_in">str</span>:</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">not</span> <span class="keyword">in</span> self.keymap:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line">        values = self.keymap[key]</span><br><span class="line">        <span class="keyword">if</span> timestamp &lt; values[<span class="number">0</span>][<span class="number">0</span>]:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> timestamp &gt;= values[-<span class="number">1</span>][<span class="number">0</span>]:</span><br><span class="line">            <span class="keyword">return</span> values[-<span class="number">1</span>][<span class="number">1</span>]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># find right bound</span></span><br><span class="line">        left = <span class="number">0</span></span><br><span class="line">        right = <span class="built_in">len</span>(values)</span><br><span class="line">        <span class="keyword">while</span> left &lt; right:</span><br><span class="line">            mid = (left + right) // <span class="number">2</span></span><br><span class="line">            stamp, value = values[mid]</span><br><span class="line">            <span class="keyword">if</span> stamp == timestamp:</span><br><span class="line">                <span class="keyword">return</span> value</span><br><span class="line">            <span class="keyword">elif</span> stamp &lt; timestamp:</span><br><span class="line">                left = mid + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                right = mid</span><br><span class="line">        <span class="keyword">return</span> values[left - <span class="number">1</span>][<span class="number">1</span>]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Binary Search </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Backtracking (2)</title>
      <link href="2020/12/28/al-backtracking-2/"/>
      <url>2020/12/28/al-backtracking-2/</url>
      
        <content type="html"><![CDATA[<p>Leetcode backtracking problem collection (2) - Hard</p><ul><li>51.N-Queens</li><li>37.Sudoku Solver</li></ul><span id="more"></span><h2 id="51-N-Queens"><a href="#51-N-Queens" class="headerlink" title="51. N-Queens"></a>51. N-Queens</h2><p>For this problem, the trickiest part for me is how to store diagonals.<br>check this <a href="https://www.youtube.com/watch?v=Xa-yETqFNEQ">video</a><br>use 2 array to index dale and hill diagonals, both length are <script type="math/tex">n * 2 - 1</script></p><p>Hill Diagonals: idx = row + col<br>0    1    2    3    4<br>1    2    3    4    5<br>2    3    4    5    6<br>3    4    5    6    7<br>4    5    6    7    8</p><p>Dale Diagonals: idx = row - col</p><p>0    -1    -2    -3    -4<br>1    0    -1    -2    -3<br>2    1    0    -1    -2<br>3    2    1    0    -1<br>4    3    2    1    0</p><p>Use <code>updateBoard(r, c, is_put)</code> to update private variables.<br>Bacause Python string cannot update element by index (need to slice), so store board in 2d array, then melt the array into string whtn solution found.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solveNQueens</span>(<span class="params">self, n: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">str</span>]]:</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">available</span>(<span class="params">r, c</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">not</span> cols[c] <span class="keyword">and</span> <span class="keyword">not</span> dale[r - c] <span class="keyword">and</span> <span class="keyword">not</span> hill[r + c]</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">updateBoard</span>(<span class="params">r, c, is_put</span>):</span></span><br><span class="line">        cols[c] = is_put</span><br><span class="line">        dale[r - c] = is_put</span><br><span class="line">        hill[r + c] = is_put</span><br><span class="line">        board[r][c] = <span class="string">&#x27;Q&#x27;</span> <span class="keyword">if</span> is_put <span class="keyword">else</span> <span class="string">&#x27;.&#x27;</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getBoard</span>(<span class="params">board</span>):</span></span><br><span class="line">        <span class="keyword">return</span> [<span class="string">&#x27;&#x27;</span>.join(x) <span class="keyword">for</span> x <span class="keyword">in</span> board]</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span>(<span class="params">r</span>):</span></span><br><span class="line">        <span class="keyword">if</span> r == n:</span><br><span class="line">            res.append(getBoard(board))</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> c <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> available(r, c):</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            updateBoard(r, c, <span class="number">1</span>)</span><br><span class="line">            backtrack(r + <span class="number">1</span>)</span><br><span class="line">            updateBoard(r, c, <span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">    cols = [<span class="number">0</span>] * n</span><br><span class="line">    dale = [<span class="number">0</span>] * (<span class="number">2</span> * n - <span class="number">1</span>)</span><br><span class="line">    hill = [<span class="number">0</span>] * (<span class="number">2</span> * n - <span class="number">1</span>)</span><br><span class="line">    board = [[<span class="string">&#x27;.&#x27;</span>] * n <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n)]</span><br><span class="line">    res = []</span><br><span class="line">    backtrack(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></p><h2 id="37-Sudoku-Solver"><a href="#37-Sudoku-Solver" class="headerlink" title="37. Sudoku Solver"></a>37. Sudoku Solver</h2><p>First, this one is really hard. Unlike the n-queen problem, indexing cubes is easy. But Desidning backtrack and how to end the track is pretty hard.<br>For indexing, I just assign an array from 0 - 9, 10 space to log the fill in number. Just ignore the 0.<br>For grids, draw it down on a paper then you will find in order to get</p><p>0, 1, 2,<br>3, 4, 5,<br>6, 7, 8</p><p>can be converted from</p><p>0, 1, 2<br>1, 2, 3<br>2, 3, 4</p><p>which is generate by <em>row // 3 + col // 3</em></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">solveSudoku</span>(<span class="params">self, board: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">str</span>]]</span>) -&gt; <span class="literal">None</span>:</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">updateBoard</span>(<span class="params">r, c, n, is_fill</span>):</span></span><br><span class="line">        board[r][c] = <span class="built_in">str</span>(n) <span class="keyword">if</span> is_fill <span class="keyword">else</span> <span class="string">&#x27;.&#x27;</span></span><br><span class="line">        rows[r][n] = is_fill</span><br><span class="line">        cols[c][n] = is_fill</span><br><span class="line">        grids[r // <span class="number">3</span> * <span class="number">3</span> + c // <span class="number">3</span>][n] = is_fill</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">available</span>(<span class="params">r, c, n</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">not</span> (rows[r][n] <span class="keyword">or</span> cols[c][n] <span class="keyword">or</span> grids[r // <span class="number">3</span> * <span class="number">3</span> + c // <span class="number">3</span>][n])</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span>(<span class="params">r, c</span>):</span></span><br><span class="line">        <span class="keyword">if</span> r == <span class="number">9</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">if</span> c == <span class="number">9</span>:</span><br><span class="line">            <span class="keyword">return</span> backtrack(r + <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> board[r][c] != <span class="string">&#x27;.&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> backtrack(r, c+<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> available(r, c, n):</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            updateBoard(r, c, n, <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">if</span> backtrack(r, c + <span class="number">1</span>):</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            updateBoard(r, c, n, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">    rows = [[<span class="number">0</span>] * <span class="number">10</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">9</span>)]</span><br><span class="line">    cols = [[<span class="number">0</span>] * <span class="number">10</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">9</span>)]</span><br><span class="line">    grids = [[<span class="number">0</span>] * <span class="number">10</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">9</span>)]  <span class="comment"># idx = row // 3 * 3 + col // 3</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># initial rows, cols, and grids</span></span><br><span class="line">    <span class="keyword">for</span> i, row <span class="keyword">in</span> <span class="built_in">enumerate</span>(board):</span><br><span class="line">        <span class="keyword">for</span> j, n <span class="keyword">in</span> <span class="built_in">enumerate</span>(row):</span><br><span class="line">            <span class="keyword">if</span> n != <span class="string">&#x27;.&#x27;</span>:</span><br><span class="line">                updateBoard(i, j, <span class="built_in">int</span>(n), <span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">    backtrack(<span class="number">0</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="http://zxi.mytechroad.com/blog/searching/leetcode-37-sudoku-solver/">http://zxi.mytechroad.com/blog/searching/leetcode-37-sudoku-solver/</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Backtracking </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Backtracking (1)</title>
      <link href="2020/12/27/al-backtracking-1/"/>
      <url>2020/12/27/al-backtracking-1/</url>
      
        <content type="html"><![CDATA[<p><a href="https://en.wikipedia.org/wiki/Backtracking">Backtracking</a> is a general algorithm for finding all (or some) solutions to some computational problems.</p><p>Leetcode backtracking problem collection (1)</p><ul><li>46.Permutations</li><li>78.Subsets</li><li>77.Combinations</li><li>39.Combination Sum</li><li>22.Generate Parentheses<span id="more"></span></li></ul><h2 id="Difference-between-backtracking-and-DFS"><a href="#Difference-between-backtracking-and-DFS" class="headerlink" title="Difference between backtracking and DFS:"></a>Difference between backtracking and DFS:</h2><p>Backtracking is an algorithem, DFS is a specific form of backtracking related to searching tree structures.<br>DFS handles an explicit tree.While Backtracking handles an implicit tree.</p><h2 id="How-to-backtrack"><a href="#How-to-backtrack" class="headerlink" title="How to backtrack?"></a>How to backtrack?</h2><p>Backtracking actually is searching a decision tree. Three keys:</p><ol><li>path: decisions you made</li><li>choices: remaining options</li><li>terminal criteria: reach the end of decision tree.</li></ol><h2 id="Template"><a href="#Template" class="headerlink" title="Template"></a>Template</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">res = []</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">backtracking</span>(<span class="params">path, choices</span>):</span></span><br><span class="line">    <span class="keyword">if</span> terminal criteria:</span><br><span class="line">        res.append(path)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">for</span> choice <span class="keyword">in</span> choices:</span><br><span class="line">        make decision</span><br><span class="line">        backtracking(path, choices)</span><br><span class="line">        cancel choose</span><br></pre></td></tr></table></figure><h2 id="46-Permutations"><a href="#46-Permutations" class="headerlink" title="46. Permutations"></a>46. Permutations</h2><p>Technically backtracking is brute force, it will exhaust all possible solutions. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">permute</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span>(<span class="params">nums, path</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(nums) == <span class="built_in">len</span>(path):</span><br><span class="line">            res.append(path)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">for</span> i, n <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums):</span><br><span class="line">            <span class="keyword">if</span> n <span class="keyword">in</span> path:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            backtrack(nums, path + [n])</span><br><span class="line">    </span><br><span class="line">    res = []</span><br><span class="line">    backtrack(nums, [])</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><h2 id="78-Subsets"><a href="#78-Subsets" class="headerlink" title="78. Subsets"></a>78. Subsets</h2><p>pre-order search.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">subsets</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span>(<span class="params">start, path</span>):</span></span><br><span class="line">        res.append(path)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start, <span class="built_in">len</span>(nums)):</span><br><span class="line">            backtrack(i + <span class="number">1</span>, path + [nums[i]])</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    </span><br><span class="line">    res = []</span><br><span class="line">    backtrack(<span class="number">0</span>, [])</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></p><h2 id="77-Combinations"><a href="#77-Combinations" class="headerlink" title="77. Combinations"></a>77. Combinations</h2><p>The same as finding subsets, but only attach path when length hit k.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">combine</span>(<span class="params">self, n: <span class="built_in">int</span>, k: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span>(<span class="params">start, path</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(path) == k:</span><br><span class="line">            res.append(path)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start, n + <span class="number">1</span>):</span><br><span class="line">            backtrack(i + <span class="number">1</span>, path + [i])</span><br><span class="line">    </span><br><span class="line">    res = []</span><br><span class="line">    backtrack(<span class="number">1</span>, [])</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></p><h2 id="39-Combination-Sum"><a href="#39-Combination-Sum" class="headerlink" title="39. Combination Sum"></a>39. Combination Sum</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">combinationSum</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>], target: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span>(<span class="params">start, path, cur</span>):</span></span><br><span class="line">        <span class="keyword">if</span> cur &gt; target:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> cur == target:</span><br><span class="line">            res.append(path)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(start, <span class="built_in">len</span>(nums)):</span><br><span class="line">            n = nums[i]</span><br><span class="line">            backtrack(i, path + [n], cur + n)</span><br><span class="line">    </span><br><span class="line">    res = []</span><br><span class="line">    backtrack(<span class="number">0</span>, [], <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><h2 id="22-Generate-Parentheses"><a href="#22-Generate-Parentheses" class="headerlink" title="22. Generate Parentheses"></a>22. Generate Parentheses</h2><p>use <code>left</code> and <code>right</code> to log reamining number of bracket. Remaining right should always greater or equal to left.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">generateParenthesis</span>(<span class="params">self, n: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="built_in">str</span>]:</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtrack</span>(<span class="params">left, right, path</span>):</span></span><br><span class="line">        <span class="comment"># right bracket should more than left</span></span><br><span class="line">        <span class="keyword">if</span> right &lt; left <span class="keyword">or</span> left &lt; <span class="number">0</span> <span class="keyword">or</span> right &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> right == <span class="number">0</span> <span class="keyword">and</span> left == <span class="number">0</span>:</span><br><span class="line">            res.append(path)</span><br><span class="line">        backtrack(left - <span class="number">1</span>, right, path + <span class="string">&#x27;(&#x27;</span>)</span><br><span class="line">        backtrack(left, right - <span class="number">1</span>, path + <span class="string">&#x27;)&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    res = []</span><br><span class="line">    backtrack(n, n, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://stackoverflow.com/questions/1294720/whats-the-difference-between-backtracking-and-depth-first-search">https://stackoverflow.com/questions/1294720/whats-the-difference-between-backtracking-and-depth-first-search</a></li><li><a href="https://leetcode.com/discuss/general-discussion/136503/what-is-difference-between-backtracking-and-depth-first-search">https://leetcode.com/discuss/general-discussion/136503/what-is-difference-between-backtracking-and-depth-first-search</a></li><li><a href="https://en.wikipedia.org/wiki/Backtracking">https://en.wikipedia.org/wiki/Backtracking</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Backtracking </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Tree (3)</title>
      <link href="2020/12/26/al-tree-3/"/>
      <url>2020/12/26/al-tree-3/</url>
      
        <content type="html"><![CDATA[<p>Leetcode Tree problem collection (3)</p><ul><li>99.Recover Binary Search Tree</li><li>94.Binary Tree Inorder Traversal</li><li>116.Populating Next Right Pointers in Each Node</li><li>114.Flatten Binary Tree to Linked List</li><li>654.Maximum Binary Tree</li><li>106.Construct Binary Tree from Inorder and Postorder Traversal</li></ul><span id="more"></span><p>Inorder (Left, Root, Right)<br>Preorder (Root, Left, Right)<br>Postorder (Left, Right, Root)</p><h2 id="99-Recover-Binary-Search-Tree"><a href="#99-Recover-Binary-Search-Tree" class="headerlink" title="99. Recover Binary Search Tree"></a>99. Recover Binary Search Tree</h2><p>In-order tranversal in a Binary Search Tree should get an ascending array. So when <script type="math/tex">Node_i < Node_{i-1}</script> means <script type="math/tex">Node_i</script> is the error node. It should swao with either <script type="math/tex">Node_{i-1}</script> or another error node if found.<br>x, y are pointers of error nodes, <em>pre</em> is used to log the previous node val. <em>node.val</em> shoule always less than <em>pre.val</em><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">recoverTree</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="literal">None</span>:</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Do not return anything, modify root in-place instead.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findError</span>(<span class="params">node</span>):</span></span><br><span class="line">        <span class="keyword">nonlocal</span> x, y, pre</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> node:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        findError(node.left)</span><br><span class="line">        <span class="keyword">if</span> pre <span class="keyword">and</span> node.val &lt; pre.val:</span><br><span class="line">            y = node</span><br><span class="line">            <span class="comment"># 1st error</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> x:</span><br><span class="line">                x = pre</span><br><span class="line">            <span class="comment"># 2nd error</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">        pre = node</span><br><span class="line">        findError(node.right)</span><br><span class="line">    </span><br><span class="line">    x = y = pre = <span class="literal">None</span></span><br><span class="line">    findError(root)</span><br><span class="line">    x.val, y.val = y.val, x.val</span><br></pre></td></tr></table></figure></p><h2 id="94-Binary-Tree-Inorder-Traversal"><a href="#94-Binary-Tree-Inorder-Traversal" class="headerlink" title="94. Binary Tree Inorder Traversal"></a>94. Binary Tree Inorder Traversal</h2><p>Classic in-order search: left - root-right<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">inorderTraversal</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">traversal</span>(<span class="params">root</span>):</span></span><br><span class="line">        <span class="keyword">nonlocal</span> res</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        traversal(root.left)</span><br><span class="line">        res.append(root.val)</span><br><span class="line">        traversal(root.right)</span><br><span class="line">    </span><br><span class="line">    res = []</span><br><span class="line">    traversal(root)</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></p><h2 id="116-Populating-Next-Right-Pointers-in-Each-Node"><a href="#116-Populating-Next-Right-Pointers-in-Each-Node" class="headerlink" title="116. Populating Next Right Pointers in Each Node"></a>116. Populating Next Right Pointers in Each Node</h2><h3 id="DFS"><a href="#DFS" class="headerlink" title="DFS"></a>DFS</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">connect</span>(<span class="params">self, root: <span class="string">&#x27;Node&#x27;</span></span>) -&gt; &#x27;Node&#x27;:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># connect local left, right</span></span><br><span class="line">    <span class="keyword">if</span> root.left:</span><br><span class="line">        root.left.<span class="built_in">next</span> = root.right</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> root.right <span class="keyword">and</span> root.<span class="built_in">next</span>:</span><br><span class="line">        root.right.<span class="built_in">next</span> = root.<span class="built_in">next</span>.left</span><br><span class="line">    self.connect(root.left)</span><br><span class="line">    self.connect(root.right)</span><br><span class="line">    <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure><h3 id="BFS-deque"><a href="#BFS-deque" class="headerlink" title="BFS / deque"></a>BFS / deque</h3><p>using Deque<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">connect</span>(<span class="params">self, root: <span class="string">&#x27;Node&#x27;</span></span>) -&gt; &#x27;Node&#x27;:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">    </span><br><span class="line">    q = deque([root])</span><br><span class="line">    <span class="keyword">while</span> q:</span><br><span class="line">        size = <span class="built_in">len</span>(q)</span><br><span class="line">        <span class="keyword">while</span> size &gt; <span class="number">0</span>:</span><br><span class="line">            node = q.popleft()</span><br><span class="line">            <span class="keyword">if</span> size &gt; <span class="number">1</span>: <span class="comment">## not the right most:</span></span><br><span class="line">                node.<span class="built_in">next</span> = q[<span class="number">0</span>]</span><br><span class="line">            size -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> node.left:</span><br><span class="line">                q.append(node.left)</span><br><span class="line">                q.append(node.right)</span><br><span class="line">    <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure></p><p>Or BFS with improvement, get rid of the deque, use the next pointer.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">connect</span>(<span class="params">self, root: <span class="string">&#x27;Node&#x27;</span></span>) -&gt; &#x27;Node&#x27;:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">    </span><br><span class="line">    cur  = root</span><br><span class="line">    <span class="built_in">next</span> = root.left</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">next</span> :</span><br><span class="line">        cur.left.<span class="built_in">next</span> = cur.right</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># not the right-most node</span></span><br><span class="line">        <span class="keyword">if</span> cur.<span class="built_in">next</span>:</span><br><span class="line">            cur.right.<span class="built_in">next</span> = cur.<span class="built_in">next</span>.left</span><br><span class="line">            cur = cur.<span class="built_in">next</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># go to the next level</span></span><br><span class="line">            <span class="comment"># start from the left most element</span></span><br><span class="line">            cur = <span class="built_in">next</span></span><br><span class="line">            <span class="built_in">next</span> = cur.left</span><br><span class="line">    <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure></p><h2 id="114-Flatten-Binary-Tree-to-Linked-List"><a href="#114-Flatten-Binary-Tree-to-Linked-List" class="headerlink" title="114. Flatten Binary Tree to Linked List"></a>114. Flatten Binary Tree to Linked List</h2><h3 id="DFS-1"><a href="#DFS-1" class="headerlink" title="DFS"></a>DFS</h3><p>post-order, flatten left, then flatten right, move left child to right and append the original right child to the end of new right child<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">flatten</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="literal">None</span>:</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Do not return anything, modify root in-place instead.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    self.flatten(root.left)</span><br><span class="line">    self.flatten(root.right)</span><br><span class="line">    </span><br><span class="line">    right = root.right</span><br><span class="line">    left = root.left</span><br><span class="line">    </span><br><span class="line">    root.left = <span class="literal">None</span></span><br><span class="line">    root.right = left</span><br><span class="line">    </span><br><span class="line">    p = root</span><br><span class="line">    <span class="keyword">while</span> p.right:</span><br><span class="line">        p = p.right</span><br><span class="line">    p.right = right</span><br><span class="line">    <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure></p><h3 id="Iteration"><a href="#Iteration" class="headerlink" title="Iteration"></a>Iteration</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">flatten</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="literal">None</span>:</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Do not return anything, modify root in-place instead.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">while</span> root:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root.left:</span><br><span class="line">            root = root.right</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># find rightest element</span></span><br><span class="line">            p = root.left</span><br><span class="line">            <span class="keyword">while</span> p.right:</span><br><span class="line">                p = p.right</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># move right child to left.right</span></span><br><span class="line">            p.right = root.right</span><br><span class="line">            <span class="comment"># move left child to right</span></span><br><span class="line">            root.right = root.left</span><br><span class="line">            root.left = <span class="literal">None</span></span><br><span class="line">            root = root.right</span><br></pre></td></tr></table></figure><h2 id="654-Maximum-Binary-Tree"><a href="#654-Maximum-Binary-Tree" class="headerlink" title="654. Maximum Binary Tree"></a>654. Maximum Binary Tree</h2><p>Classic recursion<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">constructMaximumBinaryTree</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; TreeNode:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    val = <span class="built_in">max</span>(nums)</span><br><span class="line">    i = nums.index(val)</span><br><span class="line">    root = TreeNode(val)</span><br><span class="line">    root.left = self.constructMaximumBinaryTree(nums[:i])</span><br><span class="line">    root.right = self.constructMaximumBinaryTree(nums[i + <span class="number">1</span>: ])</span><br><span class="line">    <span class="keyword">return</span> root  </span><br></pre></td></tr></table></figure></p><h2 id="106-Construct-Binary-Tree-from-Inorder-and-Postorder-Traversal"><a href="#106-Construct-Binary-Tree-from-Inorder-and-Postorder-Traversal" class="headerlink" title="106. Construct Binary Tree from Inorder and Postorder Traversal"></a>106. Construct Binary Tree from Inorder and Postorder Traversal</h2><p>Pretty straightforward solution, but not the best!<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">buildTree</span>(<span class="params">self, inorder: <span class="type">List</span>[<span class="built_in">int</span>], postorder: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; TreeNode:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> inorder <span class="keyword">or</span> <span class="keyword">not</span> postorder:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    val = postorder[-<span class="number">1</span>]</span><br><span class="line">    root = TreeNode(val)</span><br><span class="line">    </span><br><span class="line">    i = inorder.index(val)</span><br><span class="line">    in_left = inorder[:i]</span><br><span class="line">    in_right = inorder[i + <span class="number">1</span>:]</span><br><span class="line">    </span><br><span class="line">    post_left = postorder[:<span class="built_in">len</span>(in_left)]</span><br><span class="line">    post_right = postorder[<span class="built_in">len</span>(in_left): -<span class="number">1</span>]</span><br><span class="line">    </span><br><span class="line">    root.left = self.buildTree(in_left, post_left)</span><br><span class="line">    root.right = self.buildTree(in_right, post_right)</span><br><span class="line">    <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure><br>Finding index is O(n). Slicing array is O(k), k = slicing size. And extra space. Overall time and extra space is O(n^2)<br>So, to avoid finding index and slicing, use hash map<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">buildTree</span>(<span class="params">self, inorder: <span class="type">List</span>[<span class="built_in">int</span>], postorder: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; TreeNode:</span></span><br><span class="line">        </span><br><span class="line">    dic = &#123;v: i <span class="keyword">for</span> i, v <span class="keyword">in</span> <span class="built_in">enumerate</span>(inorder)&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">build</span>(<span class="params">lo, hi</span>):</span></span><br><span class="line">        <span class="keyword">if</span> lo &gt; hi:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        node = TreeNode(postorder.pop())</span><br><span class="line">        i = dic[node.val]</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># poping from post order, so should construct right child first</span></span><br><span class="line">        node.right = build(i + <span class="number">1</span>, hi)</span><br><span class="line">        node.left = build(lo, i - <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> node</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> build(<span class="number">0</span>, <span class="built_in">len</span>(inorder) - <span class="number">1</span>)</span><br></pre></td></tr></table></figure><br>And LC105 can be imporved in similar way.</p>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Data Structure </tag>
            
            <tag> Tree </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Data Structure Cheat Sheet</title>
      <link href="2020/12/26/data-strcture-cheatsheet/"/>
      <url>2020/12/26/data-strcture-cheatsheet/</url>
      
        <content type="html"><![CDATA[<p>Basically, there’re two ways to store data strctures: <strong>array</strong> and <strong>linked list</strong>.<br>All other data strctures, such as queue, stack, graph, hashmap, tree, heap, etc, all can be implemented by array and linked list.</p><span id="more"></span><p>In python, <strong>list = array</strong> is implemented by dynamic array, when it used up the original assigned space, it will point to new sapce.</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    PyObject_HEAD</span><br><span class="line">    Py_ssize_t ob_size;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Vector of pointers to list elements.  list[0] is ob_item[0], etc. */</span></span><br><span class="line">    PyObject **ob_item;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* ob_item contains space for &#x27;allocated&#x27; elements.  The number</span></span><br><span class="line"><span class="comment">     * currently in use is ob_size.</span></span><br><span class="line"><span class="comment">     * Invariants:</span></span><br><span class="line"><span class="comment">     *     0 &lt;= ob_size &lt;= allocated</span></span><br><span class="line"><span class="comment">     *     len(list) == ob_size</span></span><br><span class="line"><span class="comment">     *     ob_item == NULL implies ob_size == allocated == 0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Py_ssize_t allocated;</span><br><span class="line">&#125; PyListObject;</span><br></pre></td></tr></table></figure><p>The array itself stores a list of of pointers. Therefore, while using list, need to cautious to some traps like: during initialization, all pointers are pointing to the same list<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ls = [[]] * <span class="number">5</span></span><br><span class="line">ls[<span class="number">0</span>].append(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(ls)  <span class="comment">#[[1], [1], [1], [1], [1]]</span></span><br></pre></td></tr></table></figure><br>Also, time for popping the last element is O(1), but popping intermediate is O(n). </p><h2 id="Tranverseal"><a href="#Tranverseal" class="headerlink" title="Tranverseal"></a>Tranverseal</h2><h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">traverse</span>(<span class="params">arr</span>):</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> arr:</span><br><span class="line">    <span class="comment"># do something</span></span><br></pre></td></tr></table></figure><h3 id="Linked-List"><a href="#Linked-List" class="headerlink" title="Linked List"></a>Linked List</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, val=<span class="number">0</span>, <span class="built_in">next</span>=<span class="literal">None</span></span>):</span></span><br><span class="line">        self.val = val</span><br><span class="line">        self.<span class="built_in">next</span> = <span class="built_in">next</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># iterative</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tranverse</span>(<span class="params">head</span>):</span></span><br><span class="line">    <span class="keyword">while</span> p:</span><br><span class="line">        <span class="comment"># do something</span></span><br><span class="line">        p = p.<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># recursive</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tranverse</span>(<span class="params">head</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> head:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="comment"># do something</span></span><br><span class="line">    tranverse(head.<span class="built_in">next</span>)</span><br></pre></td></tr></table></figure><h3 id="Binary-Tree"><a href="#Binary-Tree" class="headerlink" title="Binary Tree"></a>Binary Tree</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, val=<span class="number">0</span>, left=<span class="literal">None</span>, right=<span class="literal">None</span></span>):</span></span><br><span class="line">        self.val = val</span><br><span class="line">        self.left = left</span><br><span class="line">        self.right = right</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tranverse</span>(<span class="params">root</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="comment"># pre-order</span></span><br><span class="line">    tranverse(root.left)</span><br><span class="line">    <span class="comment"># in-order</span></span><br><span class="line">    tranverse(root.right)</span><br><span class="line">    <span class="comment"># post-order</span></span><br></pre></td></tr></table></figure><h3 id="Practice"><a href="#Practice" class="headerlink" title="Practice:"></a>Practice:</h3><ul><li>124.Binary Tree Maximum Path Sum</li><li>105.Construct Binary Tree from Preorder and Inorder Traversal</li><li>94.Binary Tree Inorder Traversal</li><li>106.Construct Binary Tree from Inorder and Postorder Traversal</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Data Structure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Stack (1)</title>
      <link href="2020/12/16/al-stack-1/"/>
      <url>2020/12/16/al-stack-1/</url>
      
        <content type="html"><![CDATA[<p>Leetcode Stack Problem Collection (1)</p><ul><li>20.Valid Parentheses</li><li>1249.Minimum Remove to Make Valid Parentheses</li><li>394.Decode String</li><li>1209.Remove All Adjacent Duplicates in String II</li><li>739.Daily Temperatures</li><li><ol><li>Simplify Path</li></ol></li></ul><span id="more"></span><h2 id="20-Valid-Parentheses"><a href="#20-Valid-Parentheses" class="headerlink" title="20. Valid Parentheses"></a>20. Valid Parentheses</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isValid</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">bool</span>:</span></span><br><span class="line">    right = &#123;</span><br><span class="line">        <span class="string">&#x27;)&#x27;</span>: <span class="string">&#x27;(&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;&#125;&#x27;</span>: <span class="string">&#x27;&#123;&#x27;</span>, </span><br><span class="line">        <span class="string">&#x27;]&#x27;</span>: <span class="string">&#x27;[&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    stack = []</span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> s:</span><br><span class="line">        <span class="comment"># left bracket</span></span><br><span class="line">        <span class="keyword">if</span> c <span class="keyword">not</span> <span class="keyword">in</span> right:</span><br><span class="line">            stack.append(c)</span><br><span class="line">        <span class="comment"># right bracket</span></span><br><span class="line">        <span class="keyword">elif</span> <span class="keyword">not</span> stack <span class="keyword">or</span> stack.pop() != right[c]:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">not</span> stack</span><br></pre></td></tr></table></figure><h2 id="1249-Minimum-Remove-to-Make-Valid-Parentheses"><a href="#1249-Minimum-Remove-to-Make-Valid-Parentheses" class="headerlink" title="1249. Minimum Remove to Make Valid Parentheses"></a>1249. Minimum Remove to Make Valid Parentheses</h2><ul><li>for right bracket, must match to an existed left bracket, or remove it.</li><li>for left bracket, log its index<br>After scan the whole string, remove open left bracket<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">minRemoveToMakeValid</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span></span><br><span class="line">    open_left = []</span><br><span class="line">    res = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> s:</span><br><span class="line">        <span class="keyword">if</span> c == <span class="string">&#x27;(&#x27;</span>:</span><br><span class="line">            res += c</span><br><span class="line">            open_left.append(<span class="built_in">len</span>(res) - <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">elif</span> c == <span class="string">&#x27;)&#x27;</span>:</span><br><span class="line">            <span class="keyword">if</span> open_left:</span><br><span class="line">                res += c</span><br><span class="line">                open_left.pop()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            res += c</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">reversed</span>(open_left):</span><br><span class="line">        res = res[:i] + res[i + <span class="number">1</span>: ]</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></li></ul><h2 id="394-Decode-String"><a href="#394-Decode-String" class="headerlink" title="394. Decode String"></a>394. Decode String</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decodeString</span>(<span class="params">self, s: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span></span><br><span class="line">    stack = []</span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> s:</span><br><span class="line">        <span class="keyword">if</span> c == <span class="string">&#x27;]&#x27;</span>:</span><br><span class="line">            repeat = <span class="string">&#x27;&#x27;</span></span><br><span class="line">            <span class="keyword">while</span> stack:</span><br><span class="line">                x = stack.pop()</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># found substring</span></span><br><span class="line">                <span class="keyword">if</span> x == <span class="string">&#x27;[&#x27;</span>:</span><br><span class="line">                    <span class="comment"># find number</span></span><br><span class="line">                    num = <span class="string">&#x27;&#x27;</span></span><br><span class="line">                    <span class="keyword">while</span> stack <span class="keyword">and</span> stack[-<span class="number">1</span>].isdigit():</span><br><span class="line">                        num = stack.pop() + num</span><br><span class="line">                    num = <span class="built_in">int</span>(num)</span><br><span class="line">                    repeat = repeat * <span class="built_in">int</span>(num)</span><br><span class="line">                    stack.append(repeat)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                repeat = x + repeat</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            stack.append(c)</span><br><span class="line">            </span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(stack)</span><br></pre></td></tr></table></figure><h2 id="1209-Remove-All-Adjacent-Duplicates-in-String-II"><a href="#1209-Remove-All-Adjacent-Duplicates-in-String-II" class="headerlink" title="1209. Remove All Adjacent Duplicates in String II"></a>1209. Remove All Adjacent Duplicates in String II</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">removeDuplicates</span>(<span class="params">self, s: <span class="built_in">str</span>, k: <span class="built_in">int</span></span>) -&gt; <span class="built_in">str</span>:</span></span><br><span class="line">    stack = []  <span class="comment"># (element, cnt)</span></span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> s:</span><br><span class="line">        <span class="keyword">if</span> stack <span class="keyword">and</span> c == stack[-<span class="number">1</span>][<span class="number">0</span>]:</span><br><span class="line">            cnt = stack[-<span class="number">1</span>][<span class="number">1</span>] + <span class="number">1</span></span><br><span class="line">            stack.append((c, cnt))</span><br><span class="line">            <span class="keyword">if</span> cnt == k:</span><br><span class="line">                <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">                    stack.pop()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            stack.append((c, <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join([x[<span class="number">0</span>] <span class="keyword">for</span> x <span class="keyword">in</span> stack])</span><br></pre></td></tr></table></figure><h2 id="739-Daily-Temperatures"><a href="#739-Daily-Temperatures" class="headerlink" title="739. Daily Temperatures"></a>739. Daily Temperatures</h2><p>use index to calculate days<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dailyTemperatures</span>(<span class="params">self, T: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span></span><br><span class="line">    stack = []  <span class="comment"># temp, index</span></span><br><span class="line">    warmer = [<span class="number">0</span>] * <span class="built_in">len</span>(T)</span><br><span class="line">    <span class="keyword">for</span> i, temp <span class="keyword">in</span> <span class="built_in">enumerate</span>(T):</span><br><span class="line">        <span class="keyword">while</span> stack <span class="keyword">and</span> temp &gt; stack[-<span class="number">1</span>][<span class="number">0</span>]:</span><br><span class="line">            pre_temp, j = stack.pop()</span><br><span class="line">            warmer[j] = i - j</span><br><span class="line">        stack.append((temp, i))</span><br><span class="line">    <span class="keyword">return</span> warmer</span><br></pre></td></tr></table></figure></p><h2 id="71-Simplify-Path"><a href="#71-Simplify-Path" class="headerlink" title="71. Simplify Path"></a>71. Simplify Path</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">simplifyPath</span>(<span class="params">self, path: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span></span><br><span class="line">    stack = []</span><br><span class="line">    paths = path.split(<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> paths:</span><br><span class="line">        <span class="keyword">if</span> p == <span class="string">&#x27;..&#x27;</span>:</span><br><span class="line">            <span class="keyword">if</span> stack:</span><br><span class="line">                stack.pop()</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">elif</span> p == <span class="string">&#x27;.&#x27;</span> <span class="keyword">or</span> p == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            stack.append(p)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;/&#x27;</span> + <span class="string">&#x27;/&#x27;</span>.join(stack)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Stack </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Dynamic Programming (1)</title>
      <link href="2020/12/14/al-dp-1/"/>
      <url>2020/12/14/al-dp-1/</url>
      
        <content type="html"><![CDATA[<p>Leetcode Dynamic Programming Problem Collection (1)</p><p>Green hand in DP problem<br>The key of Dynamic Programming is to get local result, then get global result. </p><ul><li>70.Climbing Stairs</li><li>121.Best Time to Buy and Sell Stock *</li><li>53.Maximum Subarray</li><li>198.House Robber</li><li>746.Min Cost Climbing Stairs</li><li>42.Trapping Rain Water</li></ul><span id="more"></span><h2 id="70-Climbing-Stairs"><a href="#70-Climbing-Stairs" class="headerlink" title="70. Climbing Stairs"></a>70. Climbing Stairs</h2><script type="math/tex; mode=display">step_i = step_{i-1} + step_{i-2}</script><p>Tried to use recursion but it was super slow. Use iteration is much faster.</p><p>calculate the previous step 1 and step 2, keep tracking it. Time = O(n)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">climbStairs</span>(<span class="params">self, n: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span> <span class="keyword">or</span> n == <span class="number">2</span>:</span><br><span class="line">    <span class="keyword">return</span> n</span><br><span class="line">    p1, p2 = <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>, n + <span class="number">1</span>):</span><br><span class="line">        cur = p1 + p2</span><br><span class="line">        p1, p2 = p2, cur</span><br><span class="line">    <span class="keyword">return</span> cur</span><br></pre></td></tr></table></figure><h2 id="121-Best-Time-to-Buy-and-Sell-Stock"><a href="#121-Best-Time-to-Buy-and-Sell-Stock" class="headerlink" title="121. Best Time to Buy and Sell Stock"></a>121. Best Time to Buy and Sell Stock</h2><p>I like this one. logging the lowest buying price while updating max profit<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maxProfit</span>(<span class="params">self, prices: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(prices) &lt; <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    lowest = prices[<span class="number">0</span>]</span><br><span class="line">    profit = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> price <span class="keyword">in</span> prices:</span><br><span class="line">        lowest = <span class="built_in">min</span>(lowest, price)</span><br><span class="line">        profit = <span class="built_in">max</span>(profit, price - lowest)</span><br><span class="line">    <span class="keyword">return</span> profit</span><br></pre></td></tr></table></figure></p><h2 id="53-Maximum-Subarray"><a href="#53-Maximum-Subarray" class="headerlink" title="53. Maximum Subarray"></a>53. Maximum Subarray</h2><h3 id="Greedy"><a href="#Greedy" class="headerlink" title="Greedy"></a>Greedy</h3><p>find local max sum, update global max sum if greater.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maxSubArray</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    max_sum = nums[<span class="number">0</span>]</span><br><span class="line">    cur_sum = nums[<span class="number">0</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> num <span class="keyword">in</span> nums[<span class="number">1</span>:]:</span><br><span class="line">        cur_sum = <span class="built_in">max</span>(cur_sum + num, num)</span><br><span class="line">        max_sum = <span class="built_in">max</span>(cur_sum, max_sum)</span><br><span class="line">    <span class="keyword">return</span> max_sum</span><br></pre></td></tr></table></figure></p><h3 id="Dynamic-Programming"><a href="#Dynamic-Programming" class="headerlink" title="Dynamic Programming"></a>Dynamic Programming</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maxSubArray</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    dp = [<span class="number">0</span>] * <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">for</span> i, num <span class="keyword">in</span> <span class="built_in">enumerate</span>(nums)</span><br><span class="line">        dp[i] = <span class="built_in">max</span>(dp[i - <span class="number">1</span>] + num, num)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(dp)</span><br></pre></td></tr></table></figure><h2 id="198-House-Robber"><a href="#198-House-Robber" class="headerlink" title="198. House Robber"></a>198. House Robber</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rob</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(nums) &lt; <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">max</span>(nums, default=<span class="number">0</span>)</span><br><span class="line">    </span><br><span class="line">    gain = [<span class="number">0</span>] * <span class="built_in">len</span>(nums)</span><br><span class="line">    gain[<span class="number">0</span>], gain[<span class="number">1</span>] = nums[<span class="number">0</span>], <span class="built_in">max</span>(nums[<span class="number">0</span>], nums[<span class="number">1</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="built_in">len</span>(nums)):</span><br><span class="line">        <span class="comment"># Two options:</span></span><br><span class="line">        <span class="comment"># 1) rob it, gain(i) = gain(i-2) + current money</span></span><br><span class="line">        <span class="comment"># 2) don&#x27;t rob it, current max gain is gain(i - 1)</span></span><br><span class="line">        gain[i] = <span class="built_in">max</span>(gain[i - <span class="number">2</span>] + nums[i], gain[i - <span class="number">1</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> gain[-<span class="number">1</span>]</span><br></pre></td></tr></table></figure><h2 id="746-Min-Cost-Climbing-Stairs"><a href="#746-Min-Cost-Climbing-Stairs" class="headerlink" title="746. Min Cost Climbing Stairs"></a>746. Min Cost Climbing Stairs</h2><p>Either pay the last step, or pay the second last step<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">minCostClimbingStairs</span>(<span class="params">self, cost: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    s0, s1 = cost[<span class="number">0</span>], cost[<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="built_in">len</span>(cost)):</span><br><span class="line">        s1, s0 = <span class="built_in">min</span>(cost[i] + s0, cost[i] + s1), s1</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">min</span>(s0, s1)</span><br></pre></td></tr></table></figure></p><h2 id="42-Trapping-Rain-Water"><a href="#42-Trapping-Rain-Water" class="headerlink" title="42. Trapping Rain Water"></a>42. Trapping Rain Water</h2><p>DP solution, log left max, then log right max<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">trap</span>(<span class="params">self, height: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(height) &lt; <span class="number">3</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    left_max, right_max = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># left, right, rain</span></span><br><span class="line">    dp = [[<span class="number">0</span>, <span class="number">0</span>] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(height))]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># find left max:</span></span><br><span class="line">    <span class="keyword">for</span> i, h <span class="keyword">in</span> <span class="built_in">enumerate</span>(height):</span><br><span class="line">        dp[i][<span class="number">0</span>] = left_max</span><br><span class="line">        left_max = <span class="built_in">max</span>(h, left_max)</span><br><span class="line">    </span><br><span class="line">    res = <span class="number">0</span></span><br><span class="line">    <span class="comment"># find right max, calculate rain</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(height) - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">        dp[i][<span class="number">1</span>] = right_max</span><br><span class="line">        right_max = <span class="built_in">max</span>(right_max, height[i])</span><br><span class="line">        res += <span class="built_in">max</span>(<span class="built_in">min</span>(dp[i][<span class="number">0</span>], dp[i][<span class="number">1</span>]) - height[i], <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><br>It also has a stack solution.</p>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Dynamic Programming </tag>
            
            <tag> Greedy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Sorting (1)</title>
      <link href="2020/12/10/al-sort-search-1/"/>
      <url>2020/12/10/al-sort-search-1/</url>
      
        <content type="html"><![CDATA[<p>Leetcode Sorting Problem Collection (1)</p><ul><li>56.Merge Intervals</li><li>253.Meeting Rooms II</li><li>973.K Closest Points to Origin</li><li>148.Sort List *</li><li>88.Merge Sorted Array</li></ul><span id="more"></span><h2 id="56-Merge-Intervals"><a href="#56-Merge-Intervals" class="headerlink" title="56. Merge Intervals"></a>56. Merge Intervals</h2><p>Sort first, then merge. Pretty straight forward.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge</span>(<span class="params">self, intervals: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span></span><br><span class="line">    intervals.sort()</span><br><span class="line">    begin, end = intervals[<span class="number">0</span>]</span><br><span class="line">    res = []</span><br><span class="line">    <span class="keyword">for</span> cur_begin, cur_end <span class="keyword">in</span> intervals[<span class="number">1</span>:]:</span><br><span class="line">        <span class="keyword">if</span> cur_begin &lt;= end:</span><br><span class="line">            end = <span class="built_in">max</span>(end, cur_end)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            res.append([begin, end])</span><br><span class="line">            begin, end = cur_begin, cur_end</span><br><span class="line">    res.append([begin, end])</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></p><h2 id="253-Meeting-Rooms-II"><a href="#253-Meeting-Rooms-II" class="headerlink" title="253. Meeting Rooms II"></a>253. Meeting Rooms II</h2><p>I use hashmap to log current using rooms. <code>free</code> variable is for reducing times of <code>sum(rooms.values())</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">minMeetingRooms</span>(<span class="params">self, intervals: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    <span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line">    intervals.sort()</span><br><span class="line">    rooms = defaultdict(<span class="built_in">int</span>)</span><br><span class="line">    cnt, free = <span class="number">0</span>, <span class="number">0</span>  </span><br><span class="line">    <span class="keyword">for</span> start, end <span class="keyword">in</span> intervals:</span><br><span class="line">        <span class="keyword">for</span> time <span class="keyword">in</span> <span class="built_in">list</span>(rooms.keys()):</span><br><span class="line">            <span class="keyword">if</span> start &gt;= time[-<span class="number">1</span>]:</span><br><span class="line">                free += rooms[time]</span><br><span class="line">                <span class="keyword">del</span> rooms[time] </span><br><span class="line">        rooms[(start, end)] += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> free &gt; <span class="number">0</span>:</span><br><span class="line">            free -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            cnt += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> cnt</span><br></pre></td></tr></table></figure></p><h2 id="973-K-Closest-Points-to-Origin"><a href="#973-K-Closest-Points-to-Origin" class="headerlink" title="973. K Closest Points to Origin"></a>973. K Closest Points to Origin</h2><p>I feels like it is a hack… pretty straight forward though.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">kClosest</span>(<span class="params">self, points: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]], K: <span class="built_in">int</span></span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span></span><br><span class="line">    points.sort(key = <span class="keyword">lambda</span> p: p[<span class="number">0</span>]**<span class="number">2</span> + p[<span class="number">1</span>]**<span class="number">2</span>)</span><br><span class="line">    <span class="keyword">return</span> points[:K]</span><br></pre></td></tr></table></figure></p><h2 id="148-Sort-List"><a href="#148-Sort-List" class="headerlink" title="148. Sort List"></a>148. Sort List</h2><p>A nice one, bascially is a merge sort</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sortList</span>(<span class="params">self, head: ListNode</span>) -&gt; ListNode:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">merge</span>(<span class="params">l1, l2</span>):</span></span><br><span class="line">      dummy = ListNode()</span><br><span class="line">      cur = dummy</span><br><span class="line">      <span class="keyword">while</span> l1 <span class="keyword">and</span> l2:</span><br><span class="line">        <span class="keyword">if</span> l1.val &lt; l2.val:</span><br><span class="line">          cur.<span class="built_in">next</span> = l1</span><br><span class="line">          l1 = l1.<span class="built_in">next</span></span><br><span class="line">          <span class="keyword">else</span>:</span><br><span class="line">            cur.<span class="built_in">next</span> = l2</span><br><span class="line">            l2 = l2.<span class="built_in">next</span></span><br><span class="line">            cur = cur.<span class="built_in">next</span></span><br><span class="line">            cur.<span class="built_in">next</span> = l1 <span class="keyword">if</span> l1 <span class="keyword">else</span> l2</span><br><span class="line">            <span class="keyword">return</span> dummy.<span class="built_in">next</span></span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> <span class="keyword">not</span> head <span class="keyword">or</span> <span class="keyword">not</span> head.<span class="built_in">next</span>:</span><br><span class="line">            <span class="keyword">return</span> head</span><br><span class="line">          </span><br><span class="line">          <span class="comment"># use 2 pointers to divide into 2 lsits</span></span><br><span class="line">          <span class="comment"># slow is list 2</span></span><br><span class="line">          p, slow, fast = <span class="literal">None</span>, head, head</span><br><span class="line">          <span class="keyword">while</span> fast <span class="keyword">and</span> fast.<span class="built_in">next</span>:</span><br><span class="line">            p = slow</span><br><span class="line">            slow = slow.<span class="built_in">next</span></span><br><span class="line">            fast = fast.<span class="built_in">next</span>.<span class="built_in">next</span></span><br><span class="line">            p.<span class="built_in">next</span> = <span class="literal">None</span></span><br><span class="line">            <span class="keyword">return</span> merge(self.sortList(head), self.sortList(slow))</span><br></pre></td></tr></table></figure><h2 id="88-Merge-Sorted-Array"><a href="#88-Merge-Sorted-Array" class="headerlink" title="88. Merge Sorted Array"></a>88. Merge Sorted Array</h2><p>I don’t think it is an Easy at all.<br>My initial solution: maintain 2 pointers, current index of nums1, and nums2. If n1 &gt; n2, need ro insert n2 before n1. which means swap all the following digit from n1 till the end of num1.<br>This solution is pretty slow. Time complexity is O(m^n)<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge</span>(<span class="params">self, nums1: <span class="type">List</span>[<span class="built_in">int</span>], m: <span class="built_in">int</span>, nums2: <span class="type">List</span>[<span class="built_in">int</span>], n: <span class="built_in">int</span></span>) -&gt; <span class="literal">None</span>:</span></span><br><span class="line">    i1, i2 = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> i2 &lt; n <span class="keyword">and</span> i1 &lt; m:</span><br><span class="line">        <span class="keyword">if</span> nums1[i1 + i2] &gt; nums2[i2]:</span><br><span class="line">            pre = nums2[i2]</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(i1 + i2, m + i2 + <span class="number">1</span>):</span><br><span class="line">                temp = nums1[i]</span><br><span class="line">                nums1[i] = pre</span><br><span class="line">                pre = temp</span><br><span class="line">            i2 += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            i1 += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> i2 &lt; n:</span><br><span class="line">        nums1[i1 + i2: ] = nums2[i2:]</span><br></pre></td></tr></table></figure></p><p>Assign descending can avoid swapping.<br>time: O(n+m)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge</span>(<span class="params">self, nums1: <span class="type">List</span>[<span class="built_in">int</span>], m: <span class="built_in">int</span>, nums2: <span class="type">List</span>[<span class="built_in">int</span>], n: <span class="built_in">int</span></span>) -&gt; <span class="literal">None</span>:</span></span><br><span class="line">    i1 = m - <span class="number">1</span></span><br><span class="line">    i2 = n - <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m + n - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> i1 &lt; <span class="number">0</span>: </span><br><span class="line">            nums1[i] = nums2[i2]</span><br><span class="line">            i2 -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> i2 &lt; <span class="number">0</span>:</span><br><span class="line">            nums1[i] = nums1[i1]</span><br><span class="line">            i1 -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> nums2[i2] &gt; nums1[i1]:</span><br><span class="line">            nums1[i] = nums2[i2]</span><br><span class="line">            i2 -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            nums1[i] = nums1[i1]</span><br><span class="line">            i1 -= <span class="number">1</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Sorting </tag>
            
            <tag> Searching </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Classical Sorting Algorithms</title>
      <link href="2020/12/09/al-sort-classical/"/>
      <url>2020/12/09/al-sort-classical/</url>
      
        <content type="html"><![CDATA[<div class="table-container"><table><thead><tr><th>Name</th><th>Time Complexity</th><th>Sapce Complexity</th></tr></thead><tbody><tr><td>Bubble Sort</td><td>O(n^2)</td><td>O(1)</td></tr><tr><td>Selection Sort</td><td>O(n^2)</td><td>O(1)</td></tr><tr><td>Insertion Sort</td><td>O(n^2)</td><td>O(1)</td></tr><tr><td>Merge Sort</td><td>O(n log(n))</td><td>O(n)</td></tr><tr><td>Quick Sort</td><td>O(n^2)</td><td>O(log(n))</td></tr><tr><td>Heap Sort</td><td>O(n log(n))</td><td>O(1)</td></tr><tr><td>Counting Sort</td><td>O(n+k)</td><td>O(k)</td></tr><tr><td>Radix Sort</td><td>O(nk)</td><td>O(n+k)</td></tr></tbody></table></div><span id="more"></span><h2 id="Bubble-Sort"><a href="#Bubble-Sort" class="headerlink" title="Bubble Sort"></a>Bubble Sort</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bubbleSort</span>(<span class="params">ls</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(ls) - <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(ls) - <span class="number">1</span>  - i):</span><br><span class="line">            <span class="keyword">if</span> ls[j] &gt; ls[j + <span class="number">1</span>]:</span><br><span class="line">                ls[j], ls[j+<span class="number">1</span>] = ls[j+<span class="number">1</span>], ls[j]</span><br><span class="line">    <span class="keyword">return</span> ls</span><br></pre></td></tr></table></figure><h2 id="Selection-Sort"><a href="#Selection-Sort" class="headerlink" title="Selection Sort"></a>Selection Sort</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">selectSort</span>(<span class="params">ls</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(ls)):</span><br><span class="line">        mini = i</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i + <span class="number">1</span>, <span class="built_in">len</span>(ls)):</span><br><span class="line">            <span class="keyword">if</span> ls[j] &lt; ls[mini]:</span><br><span class="line">                mini = j</span><br><span class="line">            ls[mini], ls[i] = ls[i], ls[mini]</span><br><span class="line">    <span class="keyword">return</span> ls</span><br></pre></td></tr></table></figure><h2 id="Insertion-Sort"><a href="#Insertion-Sort" class="headerlink" title="Insertion Sort"></a>Insertion Sort</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">insertSort</span>(<span class="params">ls</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="built_in">len</span>(ls)):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i, <span class="number">0</span>, -<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> ls[j] &gt;= ls[j - <span class="number">1</span>]:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            ls[j], ls[j - <span class="number">1</span>] = ls[j - <span class="number">1</span>], ls[j]</span><br><span class="line">    <span class="keyword">return</span> ls</span><br></pre></td></tr></table></figure><h2 id="Merge-Sort"><a href="#Merge-Sort" class="headerlink" title="Merge Sort"></a>Merge Sort</h2><p>An <code>divide and conquer</code> approch.</p><ol><li>If the list is of length 0 or 1, then it is already sorted. Otherwise:</li><li>Divide the unsorted list into two sublists of about half the size.</li><li>Sort each sublist recursively by re-applying merge sort.</li><li>Merge the two sublists back into one sorted list.</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge</span>(<span class="params">arr1, arr2</span>):</span></span><br><span class="line">    res = []</span><br><span class="line">    <span class="keyword">while</span> arr1 <span class="keyword">and</span> arr2:</span><br><span class="line">        <span class="keyword">if</span> arr1[<span class="number">0</span>] &lt;= arr2[<span class="number">0</span>]:</span><br><span class="line">            res.append(arr1.pop(<span class="number">0</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            res.append(arr2.pop(<span class="number">0</span>))</span><br><span class="line">        res += arr1 <span class="keyword">if</span> arr1 <span class="keyword">else</span> arr2</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mergeSort</span>(<span class="params">arr</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(arr) &lt; <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> arr</span><br><span class="line">    left = arr[:<span class="built_in">len</span>(arr) // <span class="number">2</span>]</span><br><span class="line">    right = arr[<span class="built_in">len</span>(arr) // <span class="number">2</span>:]</span><br><span class="line">    <span class="keyword">return</span> merge(mergeSort(left), mergeSort(right))</span><br></pre></td></tr></table></figure><h2 id="Quick-Sort"><a href="#Quick-Sort" class="headerlink" title="Quick Sort"></a>Quick Sort</h2><p>An divide and conquer strategy. Select a <code>pivot</code>. elements less than pivot, move to the left side, else move to the right side.<br><em>set the first element as pivot</em><br>Sort in place:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">partition</span>(<span class="params">arr, left, right</span>):</span></span><br><span class="line">    pivot = arr[right]</span><br><span class="line">    i = left - <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(left, right):</span><br><span class="line">        <span class="keyword">if</span> arr[j] &lt;= pivot:</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">            arr[i], arr[j] = arr[j], arr[i]</span><br><span class="line">    arr[i + <span class="number">1</span>], arr[right] = arr[right], arr[i+<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">return</span> i + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">quickSort</span>(<span class="params">arr, left, right</span>):</span></span><br><span class="line">    <span class="keyword">if</span> left &lt; right:</span><br><span class="line">        q = partition(arr, left, right)</span><br><span class="line">        quickSort(arr, left, q - <span class="number">1</span>)</span><br><span class="line">        quickSort(arr, q + <span class="number">1</span>, right)</span><br></pre></td></tr></table></figure></p><h2 id="Heap-Sort"><a href="#Heap-Sort" class="headerlink" title="Heap Sort"></a>Heap Sort</h2><p><a href="https://github.com/python/cpython/blob/3.9/Lib/heapq.py">Heapq Module</a><br><a href="https://en.wikipedia.org/wiki/Heapsort">About Heap Sort</a></p><ol><li>Build a max heap</li><li>replace the root (current largest number) with the last item and reduce the heap size by 1. At this time, the largerst number is sorted and excluded from the heap. </li><li>repeat step 2</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">heapify</span>(<span class="params">arr, n, i</span>):</span></span><br><span class="line">    largest = i  <span class="comment"># Initialize largest as root</span></span><br><span class="line">    l = <span class="number">2</span> * i + <span class="number">1</span></span><br><span class="line">    r = <span class="number">2</span> * i + <span class="number">2</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment"># check if any child is greater than root</span></span><br><span class="line">    <span class="keyword">if</span> l &lt; n <span class="keyword">and</span> arr[largest] &lt; arr[l]:</span><br><span class="line">        largest = l</span><br><span class="line">    <span class="keyword">if</span> r &lt; n <span class="keyword">and</span> arr[largest] &lt; arr[r]:</span><br><span class="line">        largest = r</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># if child greater than node, bubble it up.</span></span><br><span class="line">    <span class="keyword">if</span> largest != i:</span><br><span class="line">        arr[i], arr[largest] = arr[largest], arr[i]  <span class="comment"># swap</span></span><br><span class="line"> </span><br><span class="line">        <span class="comment"># Heapify the root.</span></span><br><span class="line">        heapify(arr, n, largest)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">heapSort</span>(<span class="params">arr</span>):</span></span><br><span class="line">    n = <span class="built_in">len</span>(arr)</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># Build a maxheap.</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">reversed</span>(<span class="built_in">range</span>(n // <span class="number">2</span>)):</span><br><span class="line">        heapify(arr, n, i)</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># get sorted items one by one</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">reversed</span>(<span class="built_in">range</span>(<span class="number">1</span>, n)):</span><br><span class="line">        arr[i], arr[<span class="number">0</span>] = arr[<span class="number">0</span>], arr[i]  <span class="comment"># swap</span></span><br><span class="line">        heapify(arr, i, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><h2 id="Counting-Sort"><a href="#Counting-Sort" class="headerlink" title="Counting Sort"></a>Counting Sort</h2>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Sorting </tag>
            
            <tag> Heap </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Tree (2)</title>
      <link href="2020/12/06/al-tree-2/"/>
      <url>2020/12/06/al-tree-2/</url>
      
        <content type="html"><![CDATA[<p>Leetcode Tree problem collection (2)</p><ul><li>199.Binary Tree Right Side View</li><li>105.Construct Binary Tree from Preorder and Inorder Traversal</li><li>236.Lowest Common Ancestor of a Binary Tree</li><li>987.Vertical Order Traversal of a Binary Tree</li><li>103.Binary Tree Zigzag Level Order Traversal</li></ul><span id="more"></span><p>Basic About Tree:<br>Preorder: root - left - right<br>Inorder: left - root - right<br>Postorder: left - right - root</p><h2 id="199-Binary-Tree-Right-Side-View"><a href="#199-Binary-Tree-Right-Side-View" class="headerlink" title="199. Binary Tree Right Side View"></a>199. Binary Tree Right Side View</h2><p>dfs, root -&gt; right -&gt; left<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rightSideView</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="type">List</span>[<span class="built_in">int</span>]:</span></span><br><span class="line">    res = &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dfs</span>(<span class="params">node, level = <span class="number">1</span></span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> node:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">if</span> level <span class="keyword">not</span> <span class="keyword">in</span> res:</span><br><span class="line">            res[level] = node.val</span><br><span class="line">        dfs(node.right, level + <span class="number">1</span>)</span><br><span class="line">        dfs(node.left, level + <span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">    dfs(root)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">list</span>(res.values())</span><br></pre></td></tr></table></figure></p><h2 id="105-Construct-Binary-Tree-from-Preorder-and-Inorder-Traversal"><a href="#105-Construct-Binary-Tree-from-Preorder-and-Inorder-Traversal" class="headerlink" title="105. Construct Binary Tree from Preorder and Inorder Traversal"></a>105. Construct Binary Tree from Preorder and Inorder Traversal</h2><p>get root from 1st level of preorder<br>get child inorder by deviding inorder by root.val<br>get child preorder by number of child inorder</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">buildTree</span>(<span class="params">self, preorder: <span class="type">List</span>[<span class="built_in">int</span>], inorder: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; TreeNode:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> preorder:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    root = TreeNode(preorder.pop(<span class="number">0</span>))</span><br><span class="line">    i = inorder.index(root.val)</span><br><span class="line">    </span><br><span class="line">    left_inorder = inorder[:i]</span><br><span class="line">    left_preorder = preorder[:<span class="built_in">len</span>(left_inorder)]</span><br><span class="line">    </span><br><span class="line">    right_inorder = inorder[i + <span class="number">1</span>:]</span><br><span class="line">    right_preorder = preorder[<span class="built_in">len</span>(left_inorder): ]</span><br><span class="line">    </span><br><span class="line">    root.left = self.buildTree(left_preorder, left_inorder)</span><br><span class="line">    root.right = self.buildTree(right_preorder, right_inorder)</span><br><span class="line">    <span class="keyword">return</span> root</span><br></pre></td></tr></table></figure><h2 id="236-Lowest-Common-Ancestor-of-a-Binary-Tree"><a href="#236-Lowest-Common-Ancestor-of-a-Binary-Tree" class="headerlink" title="236. Lowest Common Ancestor of a Binary Tree"></a>236. Lowest Common Ancestor of a Binary Tree</h2><p>My initial AC is backtracking but only beats 5%… I searched all ancestor of p and q and find their LCA, which is super low. Here’s a more concise DFS solution<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lowestCommonAncestor</span>(<span class="params">self, root: <span class="string">&#x27;TreeNode&#x27;</span>, p: <span class="string">&#x27;TreeNode&#x27;</span>, q: <span class="string">&#x27;TreeNode&#x27;</span></span>) -&gt; &#x27;TreeNode&#x27;:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root <span class="keyword">or</span> root == p <span class="keyword">or</span> root == q:</span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">    left = self.lowestCommonAncestor(root.left, p, q)</span><br><span class="line">    right = self.lowestCommonAncestor(root.right, p, q)</span><br><span class="line">    <span class="keyword">if</span> left <span class="keyword">and</span> right:</span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> left:</span><br><span class="line">        <span class="keyword">return</span> right</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> right:</span><br><span class="line">        <span class="keyword">return</span> left</span><br></pre></td></tr></table></figure></p><h2 id="987-Vertical-Order-Traversal-of-a-Binary-Tree"><a href="#987-Vertical-Order-Traversal-of-a-Binary-Tree" class="headerlink" title="987. Vertical Order Traversal of a Binary Tree"></a>987. Vertical Order Traversal of a Binary Tree</h2><p>Use Hashmap to log node coordinate. If in the same y level, sort it.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">verticalTraversal</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span></span><br><span class="line">    <span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line">    coordinates = defaultdict(<span class="keyword">lambda</span>: defaultdict(<span class="built_in">list</span>))</span><br><span class="line">    res = []</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">searchInorder</span>(<span class="params">node, x, y</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> node:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        coordinates[x][y].append(node.val)</span><br><span class="line">        searchInorder(node.left, x-<span class="number">1</span>, y-<span class="number">1</span>)</span><br><span class="line">        searchInorder(node.right, x+<span class="number">1</span>, y-<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    </span><br><span class="line">    searchInorder(root, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">sorted</span>(coordinates.keys()):</span><br><span class="line">        cur = []</span><br><span class="line">        levels = coordinates[x]</span><br><span class="line">        <span class="keyword">for</span> y <span class="keyword">in</span> <span class="built_in">sorted</span>(levels.keys(), reverse=<span class="literal">True</span>):</span><br><span class="line">            cur += <span class="built_in">sorted</span>(levels[y])</span><br><span class="line">        res.append(cur)</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></p><h2 id="103-Binary-Tree-Zigzag-Level-Order-Traversal"><a href="#103-Binary-Tree-Zigzag-Level-Order-Traversal" class="headerlink" title="103. Binary Tree Zigzag Level Order Traversal"></a>103. Binary Tree Zigzag Level Order Traversal</h2><p>Classic BFS.<br>Odd level: left -&gt; right<br>Even level: right -&gt; left<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">zigzagLevelOrder</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span></span><br><span class="line">    res = []</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    q = [(root, <span class="number">1</span>)]</span><br><span class="line">    <span class="keyword">while</span> q:</span><br><span class="line">        node, level = q.pop(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(res) &lt; level:</span><br><span class="line">            res.append([])</span><br><span class="line">        <span class="comment"># odd level: left -&gt; right</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">bool</span>(level % <span class="number">2</span>):</span><br><span class="line">            res[level - <span class="number">1</span>].append(node.val)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            res[level - <span class="number">1</span>] = [node.val] + res[level - <span class="number">1</span>] </span><br><span class="line">        <span class="keyword">if</span> node.left:</span><br><span class="line">            q.append((node.left, level + <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">if</span> node.right:</span><br><span class="line">            q.append((node.right, level + <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Tree </tag>
            
            <tag> BFS </tag>
            
            <tag> DFS </tag>
            
            <tag> Hash Table </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Tree (1)</title>
      <link href="2020/12/02/al-tree-1/"/>
      <url>2020/12/02/al-tree-1/</url>
      
        <content type="html"><![CDATA[<p>Leetcode Tree problem collection (1)</p><ul><li>104.Maximum Depth of Binary Tree</li><li>98.Validate Binary Search Tree</li><li>101.Symmetric Tree</li><li>102.Binary Tree Level Order Traversal</li><li>108.Convert Sorted Array to Binary Search Tree</li></ul><p>Inorder (Left, Root, Right)<br>Preorder (Root, Left, Right)<br>Postorder (Left, Right, Root)<br><span id="more"></span></p><h2 id="104-Maximum-Depth-of-Binary-Tree"><a href="#104-Maximum-Depth-of-Binary-Tree" class="headerlink" title="104. Maximum Depth of Binary Tree"></a>104. Maximum Depth of Binary Tree</h2><p>DFS:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maxDepth</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    left, right = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> root.left:</span><br><span class="line">        left = self.maxDepth(root.left)</span><br><span class="line">    <span class="keyword">if</span> root.right:</span><br><span class="line">        right = self.maxDepth(root.right)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">max</span>(left, right) + <span class="number">1</span></span><br></pre></td></tr></table></figure></p><p>BFS:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maxDepth</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="built_in">int</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    q = [(root, <span class="number">1</span>)]</span><br><span class="line">    depth = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> q:</span><br><span class="line">        cur, d = q.pop()</span><br><span class="line">        depth = <span class="built_in">max</span>(d, depth)</span><br><span class="line">        <span class="keyword">if</span> cur.left:</span><br><span class="line">            q.append((cur.left, d + <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">if</span> cur.right:</span><br><span class="line">            q.append((cur.right, d + <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">return</span> depth</span><br></pre></td></tr></table></figure></p><h2 id="98-Validate-Binary-Search-Tree"><a href="#98-Validate-Binary-Search-Tree" class="headerlink" title="98. Validate Binary Search Tree"></a>98. Validate Binary Search Tree</h2><p>This one is interesting<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isValidBST</span>(<span class="params">self, root: TreeNode,  floor=<span class="built_in">float</span>(<span class="params"><span class="string">&#x27;-inf&#x27;</span></span>), ceil = <span class="built_in">float</span>(<span class="params"><span class="string">&#x27;inf&#x27;</span></span>)</span>) -&gt; <span class="built_in">bool</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">if</span> floor &lt; root.val &lt; ceil:</span><br><span class="line">        <span class="keyword">return</span> self.isValidBST(root.left, floor, root.val) <span class="keyword">and</span> self.isValidBST(root.right, root.val, ceil)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure></p><h2 id="101-Symmetric-Tree"><a href="#101-Symmetric-Tree" class="headerlink" title="101. Symmetric Tree"></a>101. Symmetric Tree</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isSymmetric</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="built_in">bool</span>:</span></span><br><span class="line">    q = [root, root]</span><br><span class="line">    <span class="keyword">while</span> q:</span><br><span class="line">        right = q.pop()</span><br><span class="line">        left = q.pop()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># empty sub tree</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> left <span class="keyword">and</span> <span class="keyword">not</span> right:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="keyword">if</span> (left <span class="keyword">and</span> <span class="keyword">not</span> right) <span class="keyword">or</span> (<span class="keyword">not</span> left <span class="keyword">and</span> right) <span class="keyword">or</span> (left.val != right.val):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            </span><br><span class="line">        <span class="comment"># mirror check</span></span><br><span class="line">        q += [left.left, right.right, left.right, right.left]</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure><h2 id="102-Binary-Tree-Level-Order-Traversal"><a href="#102-Binary-Tree-Level-Order-Traversal" class="headerlink" title="102. Binary Tree Level Order Traversal"></a>102. Binary Tree Level Order Traversal</h2><h3 id="BFS"><a href="#BFS" class="headerlink" title="BFS"></a>BFS</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">levelOrder</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span> []</span><br><span class="line">    </span><br><span class="line">    q = [root]</span><br><span class="line">    cur_nodes = <span class="number">1</span></span><br><span class="line">    child_nodes = <span class="number">0</span></span><br><span class="line">    res = []</span><br><span class="line">    cur = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> q:</span><br><span class="line">        node = q.pop(<span class="number">0</span>)</span><br><span class="line">        cur_nodes  -= <span class="number">1</span></span><br><span class="line">        cur.append(node.val)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> node.left:</span><br><span class="line">            q.append(node.left)</span><br><span class="line">            child_nodes += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> node.right:</span><br><span class="line">            q.append(node.right)</span><br><span class="line">            child_nodes += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> cur_nodes == <span class="number">0</span>:</span><br><span class="line">            res.append(cur)</span><br><span class="line">            cur = []</span><br><span class="line">            cur_nodes = child_nodes</span><br><span class="line">            child_nodes = <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><h3 id="DFS"><a href="#DFS" class="headerlink" title="DFS"></a>DFS</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">levelOrder</span>(<span class="params">self, root: TreeNode</span>) -&gt; <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]:</span></span><br><span class="line">    levels = []</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span> levels</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dfs</span>(<span class="params">node, level</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(levels) == level:</span><br><span class="line">            levels.append([])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># append the current node value</span></span><br><span class="line">        levels[level].append(node.val)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># process child nodes for the next level</span></span><br><span class="line">        <span class="keyword">if</span> node.left:</span><br><span class="line">            dfs(node.left, level + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> node.right:</span><br><span class="line">            dfs(node.right, level + <span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">    dfs(root, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> levels</span><br></pre></td></tr></table></figure><h2 id="108-Convert-Sorted-Array-to-Binary-Search-Tree"><a href="#108-Convert-Sorted-Array-to-Binary-Search-Tree" class="headerlink" title="108. Convert Sorted Array to Binary Search Tree"></a>108. Convert Sorted Array to Binary Search Tree</h2><p>Typical DFS<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sortedArrayToBST</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; TreeNode:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    i = <span class="built_in">int</span>(<span class="built_in">len</span>(nums) / <span class="number">2</span>)</span><br><span class="line">    node = TreeNode(nums[i])</span><br><span class="line">    node.left = self.sortedArrayToBST(nums[: i])</span><br><span class="line">    node.right = self.sortedArrayToBST(nums[i + <span class="number">1</span>: ])</span><br><span class="line">    <span class="keyword">return</span> node</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Data Structure </tag>
            
            <tag> Tree </tag>
            
            <tag> BFS </tag>
            
            <tag> DFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Algorithm - Linked List (1)</title>
      <link href="2020/12/01/al-linked-list-1/"/>
      <url>2020/12/01/al-linked-list-1/</url>
      
        <content type="html"><![CDATA[<p>Leetcode linked list problem collection (1)</p><ul><li>19.Remove Nth Node From End of List</li><li>206.Reverse Linked List</li><li>21.Merge Two Sorted Lists</li><li>234.Palindrome Linked List</li><li>141.Linked List Cycle</li><li>203.Remove Linked List Elements</li><li>83.Remove Duplicates from Sorted List</li><li>2.Add Two Numbers</li><li>876.Middle of the Linked List</li><li>369.Plus One Linked List</li></ul><span id="more"></span><h2 id="19-Remove-Nth-Node-From-End-of-List"><a href="#19-Remove-Nth-Node-From-End-of-List" class="headerlink" title="19. Remove Nth Node From End of List"></a>19. Remove Nth Node From End of List</h2><p>Two pointers solution: right pointer is <code>n</code> step behind left pointer. When right pointer reache the end of the linked list, <code>left.next</code> is the node that should be removed.<br>Hint: Dummy node usually very useful in linked list algorithms.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">removeNthFromEnd</span>(<span class="params">self, head: ListNode, n: <span class="built_in">int</span></span>) -&gt; ListNode:</span></span><br><span class="line">    dummy = ListNode(<span class="built_in">next</span>=head)       </span><br><span class="line">    left = dummy</span><br><span class="line">    right = left</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        right = right.<span class="built_in">next</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> right.<span class="built_in">next</span>:</span><br><span class="line">        right = right.<span class="built_in">next</span></span><br><span class="line">        left = left.<span class="built_in">next</span></span><br><span class="line">    </span><br><span class="line">    left.<span class="built_in">next</span> = left.<span class="built_in">next</span>.<span class="built_in">next</span></span><br><span class="line">    <span class="keyword">return</span> dummy.<span class="built_in">next</span></span><br></pre></td></tr></table></figure><h2 id="206-Reverse-Linked-List"><a href="#206-Reverse-Linked-List" class="headerlink" title="206. Reverse Linked List"></a>206. Reverse Linked List</h2><h3 id="Iterative"><a href="#Iterative" class="headerlink" title="Iterative"></a>Iterative</h3><ul><li>None -&gt; 1 -&gt; 2</li><li>None &lt;- 1    2</li><li>None &lt;- 1 &lt;- 2</li></ul><p>The key is use a pointer to track <code>2</code> while adjusting <code>1.next</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">reverseList</span>(<span class="params">self, head: ListNode</span>) -&gt; ListNode:</span></span><br><span class="line">        pre = <span class="literal">None</span></span><br><span class="line">        cur = head</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> cur:</span><br><span class="line">            nex = cur.<span class="built_in">next</span></span><br><span class="line">            cur.<span class="built_in">next</span> = pre</span><br><span class="line">            pre = cur</span><br><span class="line">            cur = nex</span><br><span class="line">        <span class="keyword">return</span> pre</span><br></pre></td></tr></table></figure></p><h3 id="Recursive"><a href="#Recursive" class="headerlink" title="Recursive"></a>Recursive</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reverseList</span>(<span class="params">self, head: ListNode</span>) -&gt; ListNode:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">reverse</span>(<span class="params">pre: ListNode, cur:ListNode</span>) -&gt; ListNode:</span>    </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> cur:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        nex = cur.<span class="built_in">next</span></span><br><span class="line">        cur.<span class="built_in">next</span> = pre</span><br><span class="line">        reverse(cur, nex)  </span><br><span class="line">        <span class="keyword">return</span> cur</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> head:</span><br><span class="line">        <span class="keyword">return</span> head</span><br><span class="line">    tail = head</span><br><span class="line">    <span class="keyword">while</span> tail.<span class="built_in">next</span>:</span><br><span class="line">        tail = tail.<span class="built_in">next</span></span><br><span class="line">    </span><br><span class="line">    reverse(<span class="literal">None</span>, head)</span><br><span class="line">    <span class="keyword">return</span> tail</span><br></pre></td></tr></table></figure><h2 id="21-Merge-Two-Sorted-Lists"><a href="#21-Merge-Two-Sorted-Lists" class="headerlink" title="21. Merge Two Sorted Lists"></a>21. Merge Two Sorted Lists</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mergeTwoLists</span>(<span class="params">self, l1: ListNode, l2: ListNode</span>) -&gt; ListNode:</span></span><br><span class="line">    cur = ListNode()</span><br><span class="line">    dummy = cur</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> l1 <span class="keyword">and</span> l2:</span><br><span class="line">        cur.<span class="built_in">next</span> = ListNode()</span><br><span class="line">        cur = cur.<span class="built_in">next</span></span><br><span class="line">        <span class="keyword">if</span> l1.val &lt; l2.val:</span><br><span class="line">            cur.val = l1.val</span><br><span class="line">            l1 = l1.<span class="built_in">next</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            cur.val = l2.val</span><br><span class="line">            l2 = l2.<span class="built_in">next</span></span><br><span class="line">    </span><br><span class="line">    cur.<span class="built_in">next</span> = l1 <span class="keyword">if</span> l1 <span class="keyword">else</span> l2</span><br><span class="line">    <span class="keyword">return</span> dummy.<span class="built_in">next</span></span><br></pre></td></tr></table></figure><h2 id="234-Palindrome-Linked-List"><a href="#234-Palindrome-Linked-List" class="headerlink" title="234. Palindrome Linked List"></a>234. Palindrome Linked List</h2><p>O(n) time<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isPalindrome</span>(<span class="params">self, head: ListNode</span>) -&gt; <span class="built_in">bool</span>:</span></span><br><span class="line">    vals = []</span><br><span class="line">    l = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> head:</span><br><span class="line">        l += <span class="number">1</span></span><br><span class="line">        vals.append(head.val)</span><br><span class="line">        head = head.<span class="built_in">next</span></span><br><span class="line">    a = vals[:l // <span class="number">2</span>]</span><br><span class="line">    b = vals[l // <span class="number">2</span> + l % <span class="number">2</span>:]</span><br><span class="line">    <span class="keyword">return</span> a == b[::-<span class="number">1</span>]</span><br></pre></td></tr></table></figure></p><h2 id="141-Linked-List-Cycle"><a href="#141-Linked-List-Cycle" class="headerlink" title="141. Linked List Cycle"></a>141. Linked List Cycle</h2><p>Technically is a hash table. tag visited.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hasCycle</span>(<span class="params">self, head: ListNode</span>) -&gt; <span class="built_in">bool</span>:</span></span><br><span class="line">    cur = ListNode(<span class="built_in">next</span>=head)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># set cur val to None if visited</span></span><br><span class="line">    <span class="keyword">while</span> cur.<span class="built_in">next</span>:</span><br><span class="line">        cur = cur.<span class="built_in">next</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> cur.val:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        cur.val = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure></p><p>Two pointers solution<br>This solution is more like an intelligence test. 🙃</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hasCycle</span>(<span class="params">self, head: ListNode</span>) -&gt; <span class="built_in">bool</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> head:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    slow = head</span><br><span class="line">    fast = head.<span class="built_in">next</span></span><br><span class="line">    <span class="keyword">while</span> (slow != fast):</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> fast <span class="keyword">or</span> <span class="keyword">not</span> fast.<span class="built_in">next</span>:</span><br><span class="line">            <span class="comment"># reach an end</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        slow = slow.<span class="built_in">next</span></span><br><span class="line">        fast = fast.<span class="built_in">next</span>.<span class="built_in">next</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure><h2 id="203-Remove-Linked-List-Elements"><a href="#203-Remove-Linked-List-Elements" class="headerlink" title="203. Remove Linked List Elements"></a>203. Remove Linked List Elements</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">removeElements</span>(<span class="params">self, head: ListNode, val: <span class="built_in">int</span></span>) -&gt; ListNode:</span></span><br><span class="line">    dummy = ListNode(<span class="built_in">next</span>=head)</span><br><span class="line">    pre = dummy</span><br><span class="line">    cur = head</span><br><span class="line">    <span class="keyword">while</span> cur:</span><br><span class="line">        <span class="keyword">if</span> cur.val == val:</span><br><span class="line">            pre.<span class="built_in">next</span> = cur.<span class="built_in">next</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            pre = pre.<span class="built_in">next</span></span><br><span class="line">        cur = pre.<span class="built_in">next</span></span><br><span class="line">    <span class="keyword">return</span> dummy.<span class="built_in">next</span></span><br></pre></td></tr></table></figure><h2 id="83-Remove-Duplicates-from-Sorted-List"><a href="#83-Remove-Duplicates-from-Sorted-List" class="headerlink" title="83. Remove Duplicates from Sorted List"></a>83. Remove Duplicates from Sorted List</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">deleteDuplicates</span>(<span class="params">self, head: ListNode</span>) -&gt; ListNode:</span></span><br><span class="line">    dummy = ListNode(<span class="built_in">next</span>=head)</span><br><span class="line">    pre, cur = dummy, head</span><br><span class="line">    val = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">while</span> cur:</span><br><span class="line">        <span class="keyword">if</span> val == <span class="literal">None</span> <span class="keyword">or</span> cur.val != val:</span><br><span class="line">            val = cur.val</span><br><span class="line">            pre = cur</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            pre.<span class="built_in">next</span> = cur.<span class="built_in">next</span></span><br><span class="line">        cur = cur.<span class="built_in">next</span></span><br><span class="line">    <span class="keyword">return</span> dummy.<span class="built_in">next</span></span><br></pre></td></tr></table></figure><h2 id="2-Add-Two-Numbers"><a href="#2-Add-Two-Numbers" class="headerlink" title="2. Add Two Numbers"></a>2. Add Two Numbers</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addTwoNumbers</span>(<span class="params">self, l1: ListNode, l2: ListNode</span>) -&gt; ListNode:</span></span><br><span class="line">    dummy = ListNode()</span><br><span class="line">    cur = dummy</span><br><span class="line">    carry = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> l1 <span class="keyword">or</span> l2:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> l1:</span><br><span class="line">            l1 = ListNode(<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> l2:</span><br><span class="line">            l2 = ListNode(<span class="number">0</span>)</span><br><span class="line">        val = l1.val + l2.val + carry</span><br><span class="line">        carry = val // <span class="number">10</span>            </span><br><span class="line">        cur.<span class="built_in">next</span> = ListNode(val % <span class="number">10</span>)</span><br><span class="line">        cur = cur.<span class="built_in">next</span></span><br><span class="line">        l1 = l1.<span class="built_in">next</span></span><br><span class="line">        l2 = l2.<span class="built_in">next</span></span><br><span class="line">    <span class="keyword">if</span> carry:</span><br><span class="line">        cur.<span class="built_in">next</span> = ListNode(carry)</span><br><span class="line">    <span class="keyword">return</span> dummy.<span class="built_in">next</span></span><br></pre></td></tr></table></figure><h2 id="876-Middle-of-the-Linked-List"><a href="#876-Middle-of-the-Linked-List" class="headerlink" title="876. Middle of the Linked List"></a>876. Middle of the Linked List</h2><p>O(n) time<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">middleNode</span>(<span class="params">self, head: ListNode</span>) -&gt; ListNode:</span></span><br><span class="line">    l = <span class="number">0</span></span><br><span class="line">    mid = head</span><br><span class="line">    cur = head</span><br><span class="line">    <span class="keyword">while</span> cur:</span><br><span class="line">        l += <span class="number">1</span></span><br><span class="line">        cur = cur.<span class="built_in">next</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> l % <span class="number">2</span>:</span><br><span class="line">            mid = mid.<span class="built_in">next</span></span><br><span class="line">    <span class="keyword">return</span> mid</span><br></pre></td></tr></table></figure></p><h2 id="369-Plus-One-Linked-List"><a href="#369-Plus-One-Linked-List" class="headerlink" title="369. Plus One Linked List"></a>369. Plus One Linked List</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">plusOne</span>(<span class="params">self, head: ListNode</span>) -&gt; ListNode:</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">helper</span>(<span class="params">node</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> node:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> node.<span class="built_in">next</span>:</span><br><span class="line">            val = node.val + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            val = node.val + helper(node.<span class="built_in">next</span>)</span><br><span class="line">        node.val = val % <span class="number">10</span></span><br><span class="line">        <span class="keyword">return</span> val // <span class="number">10</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> ListNode(<span class="number">1</span>, head) <span class="keyword">if</span> helper(head) <span class="keyword">else</span> head</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Algorithm </tag>
            
            <tag> Python </tag>
            
            <tag> Leetcode </tag>
            
            <tag> Linked List </tag>
            
            <tag> Two Pointers </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker Container</title>
      <link href="2020/10/22/docker-1/"/>
      <url>2020/10/22/docker-1/</url>
      
        <content type="html"><![CDATA[<p>I heard the words, <em>container</em>, and <em>docker</em> a lot. I know they refer to a tool related to Dev/Ops, but I never use one before. Recently I am writing a tool to find the best apartment (rent goes down since COVID19). Then I I think probably I should use docker in the apt finder project. This article is the first glimpse of docker. I would say it’s magical. </p><span id="more"></span><h2 id="What’s-Docker"><a href="#What’s-Docker" class="headerlink" title="What’s Docker?"></a>What’s Docker?</h2><p>Container is a solution of isolating &amp; running different applications on the same infrasturcture.<br><a href="https://www.docker.com/resources/what-container">https://www.docker.com/resources/what-container</a></p><p>Docker is a type of containers.</p><h2 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h2><p>Full tutorial: <a href="https://www.docker.com/101-tutorial">https://www.docker.com/101-tutorial</a></p><h3 id="Getting-Start-Container"><a href="#Getting-Start-Container" class="headerlink" title="Getting Start Container"></a>Getting Start Container</h3><ol><li><p>Create Dockerfile</p><p>A Dockerfile is simply a text-based script of instructions that is used to create a container image.</p></li><li><p>Run it!</p><p>Running the new container in “detached” mode (in the background) and creating a mapping between the host’s port 3000 to the container’s port 3000. </p></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker build -t &lt;app name&gt; .</span><br><span class="line">docker run -dp <span class="number">3000</span>:<span class="number">3000</span> &lt;app name&gt;</span><br></pre></td></tr></table></figure><h3 id="Updating-App"><a href="#Updating-App" class="headerlink" title="Updating App"></a>Updating App</h3><ol><li><p>Change source code. </p></li><li><p>Build new image. </p></li><li><p>Find the old container’s id, stop it, remove it. </p></li><li><p>Run the new image.</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker build -t &lt;app name&gt; .</span><br><span class="line"></span><br><span class="line">docker ps</span><br><span class="line">docker stop &lt;the-container-id&gt;</span><br><span class="line">docker rm &lt;the-container-id&gt;</span><br><span class="line"></span><br><span class="line">docker run -dp 3000:3000 docker-101</span><br></pre></td></tr></table></figure><h3 id="Sharing-App"><a href="#Sharing-App" class="headerlink" title="Sharing App"></a>Sharing App</h3><ol><li><p>Create repo on <a href="https://hub.docker.com/">https://hub.docker.com/</a> </p><p>for example, <em>101-todo-app</em></p></li><li><p>Login from local</p></li><li><p>Give image a new name</p></li><li><p>Push it.</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker tag docker-101 YOUR-USER-NAME/101-todo-app</span><br><span class="line">docker push YOUR-USER-NAME/101-todo-app</span><br></pre></td></tr></table></figure><ol><li>Running image on new instance</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 YOUR-USER-NAME/101-todo-app</span><br></pre></td></tr></table></figure><h3 id="Persisting-DB"><a href="#Persisting-DB" class="headerlink" title="Persisting DB"></a>Persisting DB</h3><p>to-do app as example. Docker will save data file on the host machine and make it available to the next container. Docker maintains the physical location on the disk and you only need to remember the name of the volume. </p><ol><li>create volume</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume create todo-db</span><br></pre></td></tr></table></figure><ol><li><p>stop the previous todo app container</p></li><li><p>Start a new todo app container with [<strong>-v</strong>]</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dp 3000:3000 -v todo-db:/etc/todos YOUR-USER-NAME/101-todo-app</span><br></pre></td></tr></table></figure><ol><li>add items into todo list. then stop and remove the container.</li><li><p>start a new container with the same <strong>run</strong> command above</p></li><li><p>use <code>docker volume inspect todo-db</code> to check The <code>Mountpoint</code> is the actual location on the disk where the data is stored.</p></li></ol><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul><li><p><a href="https://www.docker.com/101-tutorial">https://www.docker.com/101-tutorial</a></p></li><li><p><a href="https://medium.com/@saschagrunert/demystifying-containers-part-i-kernel-space-2c53d6979504">https://medium.com/@saschagrunert/demystifying-containers-part-i-kernel-space-2c53d6979504</a></p></li><li><a href="https://www.docker.com/resources/what-container">https://www.docker.com/resources/what-container</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> container </tag>
            
            <tag> devops </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Closure and Decorator in Python</title>
      <link href="2020/05/04/python1/"/>
      <url>2020/05/04/python1/</url>
      
        <content type="html"><![CDATA[<p>About Closure and Decorator in Python with examples.</p><span id="more"></span><h2 id="Closure"><a href="#Closure" class="headerlink" title="Closure"></a>Closure</h2><p>Closure means <strong>function wraps function</strong>. When you want to save the state of a function but don’t want to write a decent class, use closure.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">new_counter</span>():</span></span><br><span class="line">    total = <span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">count</span>():</span></span><br><span class="line">        <span class="keyword">nonlocal</span> total</span><br><span class="line">        total += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> total</span><br><span class="line">    <span class="keyword">return</span> count</span><br></pre></td></tr></table></figure><p>then you can use it to count student amount of different classes:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">math = new_counter()</span><br><span class="line">tennis = new_counter()</span><br><span class="line"></span><br><span class="line">math(), math(), math(), math(), math(), math()</span><br><span class="line">tennis(), tennis()</span><br></pre></td></tr></table></figure><p>When closure search a variables, Local -&gt; enclosing -&gt; global -&gt; builtin.<br>In the example, <code>total</code> stores in enclosing level.</p><h2 id="Decorator"><a href="#Decorator" class="headerlink" title="Decorator"></a>Decorator</h2><p>Decorator wraps a closure with extra function, but won’t change the inner function, it returns a closure.</p><h3 id="Example-Logger"><a href="#Example-Logger" class="headerlink" title="Example: Logger"></a>Example: Logger</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_logger</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;calling <span class="subst">&#123;func.__name__&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@my_logger</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_total</span>(<span class="params">ls</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span>(ls)</span><br><span class="line"></span><br><span class="line">ls = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line">get_total(ls)</span><br><span class="line"><span class="comment"># calling get_total</span></span><br><span class="line"><span class="comment"># 45</span></span><br></pre></td></tr></table></figure><p>But decorated function’s function will become pretty confused about its identity. <code>get_total.__name__</code> will return <code>&#39;wrapper&#39;</code>.<br>Use <code>@functools.wraps</code> to preserve original function info.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_logger</span>(<span class="params">func</span>):</span></span><br><span class="line"><span class="meta">    @functools.wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;calling <span class="subst">&#123;func.__name__&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> func(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@my_logger</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_total</span>(<span class="params">ls</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span>(ls)</span><br><span class="line"></span><br><span class="line">get_total.__name__  <span class="comment"># &#x27;get_total&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="Example-Fibonacci"><a href="#Example-Fibonacci" class="headerlink" title="Example: Fibonacci"></a>Example: Fibonacci</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCache</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, func</span>):</span></span><br><span class="line">        self.func = func</span><br><span class="line">        self.cache = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, *args</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> args <span class="keyword">in</span> self.cache:</span><br><span class="line">            self.cache[args] = self.func(*args)</span><br><span class="line">        <span class="keyword">return</span> self.cache[args]</span><br><span class="line"></span><br><span class="line"><span class="meta">@MyClass</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> n &lt;= <span class="number">1</span> <span class="keyword">else</span> fib(n - <span class="number">1</span>) + fib(n - <span class="number">2</span>)</span><br></pre></td></tr></table></figure><h3 id="Example-Singleton"><a href="#Example-Singleton" class="headerlink" title="Example: Singleton"></a>Example: Singleton</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">singleton</span>(<span class="params">cls</span>):</span></span><br><span class="line">    instances = &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">        <span class="keyword">if</span> cls <span class="keyword">not</span> <span class="keyword">in</span> instances:</span><br><span class="line">          instances[cls] = cls(*args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> instances[cls]</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@singleton</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">submit</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span> Submitted!!!&quot;</span></span><br><span class="line"></span><br><span class="line">c1 = MyClass(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">c2 = MyClass(<span class="string">&#x27;world&#x27;</span>)</span><br><span class="line"></span><br><span class="line">c1 == c2  <span class="comment"># True</span></span><br><span class="line">c1.name, c2.name  <span class="comment"># &#x27;hello&#x27;, &#x27;hello&#x27;</span></span><br></pre></td></tr></table></figure><p><em>So the next step, is refactoring my report &amp; log modules in the next sprint.</em></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第 1 篇 - 关于停更，状态更新，续更，和一些屁话</title>
      <link href="2020/04/29/beginagain/"/>
      <url>2020/04/29/beginagain/</url>
      
        <content type="html"><![CDATA[<p>10/26/20 update:<br>Legacy notes except Leetcode practices are recovered</p><hr><span id="more"></span><p>我回来了</p><h1 id="1-为什么停更"><a href="#1-为什么停更" class="headerlink" title="1. 为什么停更?"></a>1. 为什么停更?</h1><p><strong>因为博主电脑被偷啦！偷啦大半年！没钱买新电脑！文章也没有备份全丢啦！</strong></p><p>具体原因是其实是这样的：</p><p>1) 在GitHub page上保存的是用静态网页，用hexo将markdown转成html。之前的markdown都没备份！其实也有尝试过用一些html转md的工具想转回来，效果都挺差的，想说有空自己写一个轮子，结果一直拖到了现在。</p><p>2) 没钱买新的mbp（其实还有因为苹果竟然一直没有出新的13寸mbp就很气）。有一台平时用来打游戏的windows，什么环境都没有，懒得搞。</p><p>3) 之前的最后一篇blog是2019年7月23号，其实从那时候到现在一直都很忙。接下来会说到。</p><p>其实很遗憾的，毕竟之前的blog记录了我整个读master的过程（其实是刷题的过程）。写了42篇屁话，有空的话会写个小工具将它们恢复回来的。</p><h1 id="2-近况-从大学生到社畜的进化过程"><a href="#2-近况-从大学生到社畜的进化过程" class="headerlink" title="2. 近况 - 从大学生到社畜的进化过程"></a>2. 近况 - 从大学生到社畜的进化过程</h1><h3 id="06-2019"><a href="#06-2019" class="headerlink" title="06/2019"></a>06/2019</h3><p>2019年6月中旬硕士毕业。光荣地成为一名<strong>待业者</strong>。 陪家长来美国玩了一圈</p><p><img src="/images/1.jpg" alt="1"></p><h3 id="07-2019"><a href="#07-2019" class="headerlink" title="07/2019"></a>07/2019</h3><p>送走了家长，开始疯狂地改简历，投简历，面试，找工作。7/25面了Comcast，python临时工坑，当天就接了，然后就是等EAD</p><h3 id="08-2019"><a href="#08-2019" class="headerlink" title="08/2019"></a>08/2019</h3><p>看房子，看了好多房子，因为我没车，都在看城里的房子，步行距离能走到公司的那种。最后租了个美术馆附近的apartment，1b1b。</p><p>8/15正式上班。</p><h3 id="09-2019"><a href="#09-2019" class="headerlink" title="09/2019"></a>09/2019</h3><p>9/13中秋节，去了朋友家开趴。结束回家后现被偷啦~ 偷了钱包，里面有现金和卡，还有电脑，还有一些首饰。我住一楼，贼直接将空调挖出来爬进去了，据说当天同一条街上另一家也被偷了。神奇的是后来贼抓到了，警察通知我去领了一堆杂物，包括我大学的校园卡，市一医院的诊疗卡 =_=</p><p>刚tm住进来1个月就被偷啦！觉得太不安全了！两天后就签了比之前贵了很多的公寓！除了没有泳池，其他什么都有！除了贵没有缺点！但觉得贵不是它的缺点！是我的缺点！</p><p>上班每天都很开心，职场简直比我想的要开心太多了，每周日都想着周一要上班就很开心。每天上班都很开心。</p><h3 id="10-2019-12-2019"><a href="#10-2019-12-2019" class="headerlink" title="10/2019 - 12/2019"></a>10/2019 - 12/2019</h3><p>吃喝玩乐，工作，享受自己赚钱的生活。11月感恩节当然是去玩啦，在波多黎各考了潜水证。</p><p>12月圣诞节假期回国了一周。</p><h3 id="01-2020"><a href="#01-2020" class="headerlink" title="01/2020"></a>01/2020</h3><p>1/1从中国回到美国，然后开始上班，然后工作进入了不知道为什么这么忙的季节。每周都加班，有次加班到9点，从debug到当场发脾气，到完全没有脾气只想回家。</p><h3 id="02-2020-till-now"><a href="#02-2020-till-now" class="headerlink" title="02/2020 till now"></a>02/2020 till now</h3><p>COVID-19。1，2月担心国内家人的情况。3，4月到我这边。我从PA有第一起案例那一周开始已经完全WFH了，其他人大概比我要晚一两周左右。怕死。怕被病毒弄死，也怕路上被仇视Asian的人捅死。很烦，带刀出门。朋友说我带刀可能就overkill了，带个胡椒喷雾吧。然后买了三个胡椒喷雾，安心多了。虽然也不出门了。</p><h1 id="为什么续更？"><a href="#为什么续更？" class="headerlink" title="为什么续更？"></a>为什么续更？</h1><p>一句话总结：学了新东西想记录下来。</p><p>这是我真正意义上的第一份工作。学了很多东西，也还有很多需要学，因为covid19也终于有时间可以记下来学了什么。于是决定重新开始。</p><p>还有就是看了一些面试题，发现我啊除了python啥都不会的话真的很难跳槽。</p><p>噢还有我是叨逼叨话痨，就算没人听也想写下来。</p><h1 id="关于工作中的一些感想，以及一些屁话"><a href="#关于工作中的一些感想，以及一些屁话" class="headerlink" title="关于工作中的一些感想，以及一些屁话"></a>关于工作中的一些感想，以及一些屁话</h1><p>我们组程序员一个就4个：一个新招的专门搞DS和优化的，一个大佬负责数据处理和规划比较多的，真正写逻辑代码的大概只有我和一个印度妹同事，而因为COVID19，印度妹同事自从2/28回印度度假之后到现在都还没回到来。搞得只有我在写东西真的好累。写得越多，越发现自己写出来的东西竟然难以置信地垃圾！多么地脆弱！不堪一击！</p><p>很想重构整个项目，等这个季度过了就重构。要好好地设计，写框架。其实我们的底写得很好的，我刚进组的时候有个很好的工程师，后来他走了，我一直在他的基础上缝缝补补。最过分的是需求一直在改！！！以至于原来的框架已经支持不住了。所以又要开始学习啦。</p><p>差不多就这样了。噢还有，今年交了个男朋友。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 日常 </tag>
            
            <tag> Daily </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Bash Notes</title>
      <link href="2019/07/22/bash-notes/"/>
      <url>2019/07/22/bash-notes/</url>
      
        <content type="html"><![CDATA[<p>Bash stands for “<strong>B</strong>ourne <strong>A</strong>gain <strong>SH</strong>ell”, is a replacement/improvement of the original Bourne shell (sh).</p><span id="more"></span><p>Today finished a phone interview with Comcast and scheduled onsite. They asked me about Bash and OOD/P. </p><p>Then I think I should write a Bash Note so that I can easily look them up next time.</p><p>Cheatsheet: <a href="https://github.com/skywind3000/awesome-cheatsheets">https://github.com/skywind3000/awesome-cheatsheets</a></p><ul><li><p>pwd</p></li><li><p>ssh user@host</p></li><li><p>ssh -p port user@host</p></li><li><p>whoami # return current username</p></li><li><p>passwd # allow current user</p></li><li><p>finger username # Displays information about user.</p></li><li><p>uname -a # show kernel info</p></li><li><p>man command # show manual</p></li><li><p>df # show disk info</p></li><li><p>ps # show your processes</p></li><li><p>kill PID # kill process by process ID</p></li><li><p>killall processname # kill process by process name</p></li><li><p>top # show current process</p></li><li><p>whois domain # get domain info</p></li><li><p>dig domain # get DNS info of a domain</p></li><li><p>wget file # download file</p></li><li><p>scp source_file user@host:directory/target_file # copy file from local to remote</p></li><li><p>copy file from remote host to local</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp user@host:directory/source_file target_file</span><br><span class="line">scp -r user@host:directory/source_folder farget_folder</span><br></pre></td></tr></table></figure></li><li><p>also accepte port</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -P port user@host:directory/source_file target_file</span><br></pre></td></tr></table></figure></li></ul><h2 id="Example-of-Shell-programming"><a href="#Example-of-Shell-programming" class="headerlink" title="Example of Shell programming"></a>Example of Shell programming</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">str=<span class="string">&quot;hello world&quot;</span> <span class="comment"># no space before or after =</span></span><br><span class="line"><span class="keyword">function</span> hello &#123;</span><br><span class="line">   <span class="built_in">echo</span> <span class="variable">$1</span></span><br><span class="line">&#125;</span><br><span class="line">hello <span class="string">&quot;<span class="variable">$str</span>&quot;</span> <span class="comment"># use &quot;&quot; to ensure $str be passed as a full string</span></span><br><span class="line"><span class="comment"># some ways to assign variables</span></span><br><span class="line">array[0] = 9</span><br><span class="line">array[1] = 8</span><br><span class="line">array[2] = 7</span><br><span class="line">array=([2]=7 [0]=8 [1]=9)</span><br><span class="line">array(7 8 9)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;array[2]&#125;</span> <span class="comment"># show variables with specific index</span></span><br><span class="line"><span class="built_in">unset</span> array</span><br></pre></td></tr></table></figure><h3 id="IF"><a href="#IF" class="headerlink" title="IF"></a>IF</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [expression]; <span class="keyword">then</span></span><br><span class="line">    will execute only <span class="keyword">if</span> expression is <span class="literal">true</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    will execute <span class="keyword">if</span> expression is <span class="literal">false</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h3 id="case"><a href="#case" class="headerlink" title="case"></a>case</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> expression <span class="keyword">in</span></span><br><span class="line">    pattern1 )</span><br><span class="line">        statements ;;</span><br><span class="line">    pattern2 )</span><br><span class="line">        statements ;;</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><h3 id="Loop"><a href="#Loop" class="headerlink" title="Loop"></a>Loop</h3><p>3 kinds of loop</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> x := 1 to 10 <span class="keyword">do</span></span><br><span class="line">begin</span><br><span class="line">  statements</span><br><span class="line">end</span><br><span class="line"><span class="keyword">for</span> name [<span class="keyword">in</span> list]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  statements that can use <span class="variable">$name</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="keyword">for</span> (( initialisation ; ending condition ; update ))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">  statements...</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> condition; <span class="keyword">do</span></span><br><span class="line">  statements</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">until condition; <span class="keyword">do</span></span><br><span class="line">  statements</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="Debugging"><a href="#Debugging" class="headerlink" title="Debugging"></a>Debugging</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bash -n scriptname <span class="comment"># won&#x27;t run, grammer checking only</span></span><br><span class="line">bash -v scriptname</span><br><span class="line">bash -x scriptname</span><br></pre></td></tr></table></figure><h2 id="something-else"><a href="#something-else" class="headerlink" title="something else"></a>something else</h2><p>edit <strong>.bashrc</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$PS1</span> <span class="comment"># shown the current prompts</span></span><br><span class="line">ps1_old=<span class="variable">$PS1</span> <span class="comment"># back up</span></span><br><span class="line">PS1=<span class="string">&quot;😳 \w: &quot;</span></span><br></pre></td></tr></table></figure><p>Then run <strong>source ~/.bashrc</strong> to execute</p><p>If you want to auto load .bashrc when open a new terminal, edit <strong>.bash_profile</strong> (or <strong>.zshrc</strong> for me)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The next line enables shell include .bashrc if it exists</span></span><br><span class="line"><span class="keyword">if</span> [ -f <span class="string">&quot;<span class="variable">$HOME</span>/.bashrc&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">    . <span class="string">&quot;<span class="variable">$HOME</span>/.bashrc&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Bash </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MongoDB Notes</title>
      <link href="2019/06/02/mongodb/"/>
      <url>2019/06/02/mongodb/</url>
      
        <content type="html"><![CDATA[<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>MongoDB is from “Humongous”</p><p>A document-based NoSQL database by MongoDB, Inc.<br><span id="more"></span></p><ul><li>Data is stored in documents in JSON.</li><li>Documents of a similar type are stored in collections.</li><li>Related collections are stored in a database.</li><li>Schemaless</li></ul><p><img src="/images/mongo1.png" alt="mgdb"></p><h2 id="Syntactic-Rule"><a href="#Syntactic-Rule" class="headerlink" title="Syntactic Rule"></a>Syntactic Rule</h2><ul><li>Case-Sensitive – Capitalization matters.</li><li>Semi-colons are not required.</li><li>All <strong>string</strong> data being saved should be in <strong>double quotes</strong>.</li><li>Commands are <strong>space-independent</strong>.</li><li>Comments are indicated by <strong>//</strong></li><li>Data is displayed in the order of insertion order.</li><li>The field names cannot start with the <strong>$</strong> character.</li><li>The field names cannot contain the <strong>.</strong> character.</li></ul><p>Create a database command – “<strong>use</strong>”</p><ul><li>e.g. <strong>use EmployeeDB</strong></li></ul><p>Databases can be displayed by “<strong>show dbs</strong>” command.</p><ul><li><strong>Admin Database</strong> – Records data on database administration issues like users, roles, and privileges for the databases hosted on the server.</li><li><strong>Local Database</strong> – Stores data about the server’s start-up process and the server’s role in sharding operations.</li><li>The Admin and Local database will not store any end-user data.</li><li>use method <strong>db.getName()</strong> to display the database being used.</li></ul><p>Create a collection use <strong>createCollection()</strong> method:</p><ul><li>e.g. <strong>db.createCollection(“newproducts”)</strong></li></ul><p>Collections can be displayed by “<strong>show collections</strong>” command.</p><p>Dropping a collection use <strong>drop()</strong></p><p>e.g.</p><ul><li>Removes the collection “newproducts” along with all its documents: <strong>db.newproducts.drop()</strong></li><li>Delete all the documents in the collection: <strong>db.newproducts.remove({})</strong></li><li>Rename collections, use the method <strong>renameCollection()</strong></li></ul><h3 id="Common-Term-in-MongoDB"><a href="#Common-Term-in-MongoDB" class="headerlink" title="Common Term in MongoDB"></a>Common Term in MongoDB</h3><p><strong>Field</strong>: key-value pair in a document</p><p><strong>_id</strong>:</p><ul><li>mandatory field for every document. If you don;t assign a value, system will assign a random value this it.</li><li>serves as primary key.</li><li>unique valye in the collection</li></ul><h3 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h3><h4 id="Create"><a href="#Create" class="headerlink" title="Create"></a>Create</h4><ul><li>db.collection.insert(<em>document</em>)</li><li>db.collection.insertOne(<em>document</em>)</li><li>db.collection.insertMany([{d1}, {d2}.., {d3}] )</li><li>db.collection.save(<em>document</em>)</li><li>db.collection.update(<em>query ,update , { upsert: true }</em> )</li></ul><h4 id="Read"><a href="#Read" class="headerlink" title="Read"></a>Read</h4><ul><li>db.collection.find( <em>query, projection</em> )</li><li>db.collection.findOne(<em>query, projection</em> )</li></ul><h4 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h4><ul><li>db.collection.update(<em>query ,update, options</em>)</li><li>db.collection.updateOne(<em>query ,update, options</em>)</li><li>db.collection.updateMany(<em>query ,update, options</em>)</li><li>db.collection.replaceOne(<em>query ,replacement, options</em>)</li></ul><h4 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h4><ul><li>db.collection.remove(<em>query, justOne</em>)</li><li>db.collection.deleteOne( <em>query, options</em>)</li><li>db.collection.deleteMany( <em>query, options</em> )</li><li>db.collection.deleteMany({}) <em>// delete all documents</em></li></ul><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><ol><li><p>Download &amp; unzip source code to <strong>cd /usr/local</strong></p></li><li><p>Rename directory to <strong>mongodb</strong></p></li><li><p>Add to PATH</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=/usr/<span class="built_in">local</span>/mongodb/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure></li><li><p>Create a database directory</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /data/db</span><br><span class="line">sudo chown -R <span class="variable">$USER</span> /data/db</span><br></pre></td></tr></table></figure></li><li><p>Run mongodb</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo mongod</span><br><span class="line"><span class="comment"># if doesn&#x27;t set PATH, entry the following directory</span></span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/mongodb/bin</span><br><span class="line">sudo ./mongod</span><br></pre></td></tr></table></figure></li><li><p>Open another terminal:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /usr/<span class="built_in">local</span>/mongodb/bin </span><br><span class="line">$ ./mongo</span><br></pre></td></tr></table></figure></li><li><p><em>if your data directory not /data/db, assign it with —dbpath</em></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mongod --dbpath = /data/db</span><br></pre></td></tr></table></figure></li></ol><h2 id="Practice"><a href="#Practice" class="headerlink" title="Practice"></a>Practice</h2><h3 id="Basic-Manipulation"><a href="#Basic-Manipulation" class="headerlink" title="Basic Manipulation"></a>Basic Manipulation</h3><ol><li><p>Create a collection called “customers”, input data</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.customers.insert(&#123;id: &quot;1&quot;, name : &quot;Bill&quot;, productId: &quot;1&quot;, customerId: &quot;1&quot;, amount: <span class="number">20.00</span>, state: &quot;PA&quot;&#125;)</span><br><span class="line">db.customers.insert(&#123;id: &quot;2&quot;, name : &quot;Hillary&quot;, productId: &quot;2&quot;, customerId: &quot;2&quot;, amount: <span class="number">30.00</span>, state: &quot;DC&quot;&#125;)</span><br><span class="line">db.customers.insert(&#123;id: &quot;3&quot;, name : &quot;brian&quot;, productId: &quot;1&quot;, customerId: &quot;3&quot;, amount: <span class="number">25.00</span>, state: &quot;DC&quot;&#125;)</span><br><span class="line">db.customers.insert(&#123;id: &quot;4&quot;, name : &quot;Donald&quot;, productId: &quot;2&quot;, customerId: &quot;4&quot;, amount: <span class="number">50.00</span>, state: &quot;PA&quot;&#125;)</span><br></pre></td></tr></table></figure></li><li><p>Find the name and amount of all the customers whose state is PA</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.customers.find(&#123; state: &quot;PA&quot; &#125;, &#123; name: <span class="number">1</span>, _id: <span class="number">0</span> &#125;)</span><br></pre></td></tr></table></figure></li><li><p>Find the name and state of customers whose name begin with “B” or “b”</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.customers.find(&#123; name: <span class="operator">/</span><span class="operator">^</span>(B<span class="operator">|</span>b)<span class="operator">/</span> &#125;)</span><br></pre></td></tr></table></figure></li><li><p>Find the name of customers whose sale amount is greater or equal to 30 but lower than 40</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.customers.find( &#123; amount: &#123; $gte: <span class="number">30</span>, $lt: <span class="number">40</span> &#125; &#125; )</span><br></pre></td></tr></table></figure></li><li><p>For each state, find the number of customers and their total amount</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">db.customers.aggregate( [ </span><br><span class="line">&#123; $<span class="keyword">group</span>: &#123; </span><br><span class="line">_id: &quot;$state&quot;,</span><br><span class="line">total_amount: &#123; $sum: &quot;$amount&quot; &#125;,</span><br><span class="line">num_of_customers: &#123; $sum: <span class="number">1</span> &#125; </span><br><span class="line">&#125; </span><br><span class="line">&#125; </span><br><span class="line">] )</span><br></pre></td></tr></table></figure></li><li><p>To all the documents, increase the salesAmount by 10</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.customers.updateMany( &#123;&#125;, &#123; $inc: &#123; &quot;amount&quot;: <span class="number">10</span> &#125; &#125; )</span><br></pre></td></tr></table></figure></li><li><p>To all the documents, add the new field called “totalSaleAmount” whose value is defined by saleAmount*1.06 (i.e, add 6% tax)</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.customers.aggregate( [ &#123;$addFields: &#123;totalSaleAmount: &#123;$multiply: [&quot;$amount&quot;, <span class="number">1.06</span>] &#125; &#125; &#125; ] )</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>To all the documents whose state is PA, add the new field called “pastPurchase” as an array of products. Document 1 will have [“chair”, “desk”], while Document 4 will have [“chair”, “tablet”, “usb”]</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">db.customers.update(</span><br><span class="line">      &#123; id : &quot;1&quot; &#125;,</span><br><span class="line">      &#123; $<span class="keyword">set</span>: &#123; &quot;pastPurchase&quot; : [&quot;chair&quot;, &quot;desk&quot;] &#125; &#125;</span><br><span class="line">)</span><br><span class="line">db.customers.update(</span><br><span class="line">      &#123; id : &quot;4&quot; &#125;,</span><br><span class="line">      &#123; $<span class="keyword">set</span>: &#123; &quot;pastPurchase&quot; : [&quot;chair&quot;, &quot;tablet&quot;, &quot;usb&quot;] &#125; &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li></ol><h3 id="MapReduce-Implementation"><a href="#MapReduce-Implementation" class="headerlink" title="MapReduce Implementation"></a>MapReduce Implementation</h3><p>We need to find some aggregated data from a Grocery Store (Giant, ACME etc.,) by their shoppingCarts. The document structure is:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;_id&quot; : NumberLong(<span class="number">1</span>),</span><br><span class="line">&quot;name&quot;:&quot;Amelia Watson&quot;,</span><br><span class="line">&quot;shoppingCart&quot; : &quot;Eggs, Milk, Chicken, Bacon&quot;,</span><br><span class="line">&quot;discount&quot;: <span class="number">1.25</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li><p>Input data</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">db.grocery.insert(&#123;name: &quot;Bob&quot;, shoppingCart: &quot;Milk, Corn, Chocolates&quot;, discount: <span class="number">0.75</span>&#125;);</span><br><span class="line">db.grocery.insert(&#123;name: &quot;Alice&quot;, shoppingCart: &quot;Milk, Turkey, Apple&quot;, discount: <span class="number">0</span>&#125;);</span><br><span class="line">db.grocery.insert(&#123;name: &quot;Trudy&quot;, shoppingCart: &quot;Cheese, Corn, Tomatoes, Ginger, Juice, Pork&quot;, discount: <span class="number">1.50</span>&#125;);</span><br><span class="line">db.grocery.insert(&#123;name: &quot;Jacob”, shoppingCart: &quot;Ice Cream, Onions, Tomatoes, Vinegar, Chicken, Fish&quot;, discount: 2.60&#125;);</span><br><span class="line">db.grocery.insert(&#123;name: &quot;Paul&quot;, shoppingCart: &quot;Cheese, Chocolates, Fish, Bread&quot;&#125;);</span><br><span class="line">db.grocery.insert(&#123;name: &quot;Jack&quot;, shoppingCart: &quot;Milk, Corn, Fish&quot;, discount: 0.25&#125;);</span><br><span class="line">db.grocery.insert(&#123;name: &quot;Mary&quot;, shoppingCart: &quot;Milk, Turkey, Apple&quot;, discount: 0&#125;);</span><br><span class="line">db.grocery.insert(&#123;name: &quot;Kate&quot;, shoppingCart: &quot;Cheese, Apple, Corn, Juice, Pork&quot;, discount: 3.50&#125;);</span><br><span class="line">db.grocery.insert(&#123;name: &quot;Chris&quot;, shoppingCart: &quot;Ice Cream&quot;&#125;);</span><br></pre></td></tr></table></figure></li><li><p>Add the fact that you purchased the following items {Apple, Ice Cream, Chocolates} with the discount of $1.25. That is, use your first name as the name of the new document</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.grocery.insert(&#123;name: &quot;Celine&quot;, shoppingCart: &quot;Milk, Corn, Chocolates&quot;, discount: <span class="number">1.25</span>&#125;);</span><br></pre></td></tr></table></figure></li><li><p>Use Map/Reduce function to count all the people who got any discount at all. Show the complete code and output</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.grocery.find().pretty()</span><br></pre></td></tr></table></figure></li><li><p>Use Map/Reduce function to count all the people who got any discount at all. Show the complete code and output</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">db.grocery.mapReduce(</span><br><span class="line"><span class="keyword">function</span>() &#123;</span><br><span class="line">if(this.discount <span class="operator">!=</span> undefined <span class="operator">&amp;&amp;</span> this.discount <span class="operator">&gt;</span> <span class="number">0</span>)&#123;</span><br><span class="line">emit(&quot;count&quot;, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;, <span class="operator">/</span><span class="operator">/</span> mapper</span><br><span class="line"><span class="keyword">function</span>(key,<span class="keyword">values</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> Array.<span class="built_in">sum</span>(<span class="keyword">values</span>);</span><br><span class="line">&#125;, <span class="operator">/</span><span class="operator">/</span> reducer</span><br><span class="line">&#123; <span class="keyword">out</span>: &quot;discounts&quot; &#125; <span class="operator">/</span><span class="operator">/</span> output</span><br><span class="line">).find();</span><br></pre></td></tr></table></figure></li></ol><ol><li><p>Use Map/Reduce function to count the total value of discounts of all the customers. Show the complete code and output</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">db.grocery.mapReduce(</span><br><span class="line"><span class="keyword">function</span>() &#123;</span><br><span class="line">if(this.discount <span class="operator">!=</span> undefined <span class="operator">&amp;&amp;</span> this.discount <span class="operator">&gt;</span> <span class="number">0</span>)&#123;</span><br><span class="line">emit(&quot;sum&quot;,this.discount);</span><br><span class="line">&#125;</span><br><span class="line">&#125;, <span class="operator">/</span><span class="operator">/</span> mapper</span><br><span class="line"><span class="keyword">function</span>(key,<span class="keyword">values</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> Array.<span class="built_in">sum</span>(<span class="keyword">values</span>);</span><br><span class="line">&#125;, <span class="operator">/</span><span class="operator">/</span> reducer</span><br><span class="line">&#123; <span class="keyword">out</span>: &quot;discounts&quot; &#125; <span class="operator">/</span><span class="operator">/</span> output</span><br><span class="line">).find();</span><br></pre></td></tr></table></figure></li><li><p>Use Map/Reduce function to find the number of times an item appears in the cart.</p><p>For example, if Chicken was inserted in 5 documents (5 different Carts), the key value pair generated after map reduce should look like: {Chicken: 5}</p><p>Display the top 5 items most sold:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">db.grocery.mapReduce(</span><br><span class="line"><span class="keyword">function</span>() &#123;</span><br><span class="line">if(this.shoppingCart <span class="operator">!=</span> undefined) &#123; </span><br><span class="line">this.shoppingCart.split(<span class="string">&#x27;,&#x27;</span>).forEach(</span><br><span class="line"><span class="keyword">function</span> (v) &#123;</span><br><span class="line">emit(v.<span class="built_in">trim</span>(), <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">);</span><br><span class="line">&#125;</span><br><span class="line">&#125;, </span><br><span class="line"><span class="keyword">function</span>(key,<span class="keyword">values</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> Array.<span class="built_in">sum</span>(<span class="keyword">values</span>);</span><br><span class="line">&#125;, </span><br><span class="line">&#123; <span class="keyword">out</span>: &quot;top5Sellers&quot; &#125;</span><br><span class="line">).find().sort(&#123;<span class="keyword">value</span>: <span class="number">-1</span>&#125;).limit(<span class="number">5</span>);</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Database </tag>
            
            <tag> NoSQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NoSQL Notes</title>
      <link href="2019/05/25/nosql/"/>
      <url>2019/05/25/nosql/</url>
      
        <content type="html"><![CDATA[<p>NoSQL = Not Only SQL</p><span id="more"></span><p><strong>ACID</strong> - Atomic, Consistent, Isolated, Durable</p><p><strong>BASE</strong> - Basic Availability, Soft-state, Eventual consistency</p><h2 id="CAP-Theroem"><a href="#CAP-Theroem" class="headerlink" title="CAP Theroem"></a>CAP Theroem</h2><ul><li>Consistency: Every read receives the most recent value</li><li>Availability: Every request receives a (non-error) response without the guarantee that it contains the most recent write. no downtime.</li><li>Partition Tolerance: The system continues to operate despite an arbitrary number of nodes being dropped.</li></ul><p><img src="/images/cap.png" alt="cap"></p><h2 id="NoSQL-Database"><a href="#NoSQL-Database" class="headerlink" title="NoSQL Database"></a>NoSQL Database</h2><div class="table-container"><table><thead><tr><th style="text-align:left"></th><th style="text-align:left">Key-value Store</th><th style="text-align:left">Column Store</th><th style="text-align:left">Document Store</th><th style="text-align:left">Graph Store</th></tr></thead><tbody><tr><td style="text-align:left">Usage</td><td style="text-align:left">- image stores <br />- Key-tased file systems <br />- Object cache <br />- System designed to scale</td><td style="text-align:left">- Web crawler results <br />- Big data problem with relaxed consistency riles</td><td style="text-align:left">- High variability data <br />- Document search <br />- Web content management <br />- Publishing</td><td style="text-align:left">- Social network <br />- Fraud detection <br />- Relationship heavy data</td></tr><tr><td style="text-align:left">Example</td><td style="text-align:left">Memcache Redis Riak</td><td style="text-align:left">Hbase Cassandra Hypertable</td><td style="text-align:left">MongoDB CoutchDB CouchBase</td><td style="text-align:left">Neo4J InfinteGraph(Objectively)</td></tr></tbody></table></div><h3 id="NoSQL-Models-Key-Value-Systems"><a href="#NoSQL-Models-Key-Value-Systems" class="headerlink" title="NoSQL Models: Key/Value Systems"></a>NoSQL Models: Key/Value Systems</h3><ul><li>A store of two fields: (Key, Value) pairs.</li><li>Only one way to access the data through hashing(Key) = value</li><li>No query language: only get/put/delete/update</li><li>Limited multi-record transactional consistency</li><li>Each row has timestemp</li></ul><h4 id="API"><a href="#API" class="headerlink" title="API"></a>API</h4><ul><li>lookup(key) -&gt; value</li><li>lookup(key range) -&gt; value</li><li>getNext -&gt; value</li><li>insert(key, value)</li><li>delete(key)</li></ul><h4 id="Use-Cases"><a href="#Use-Cases" class="headerlink" title="Use Cases"></a>Use Cases</h4><ul><li>Storing data for customer preferences and profiles</li><li>Customized product recommendations, Ads, coupons</li><li>User profiles</li><li>Using cache to accelerate application responses</li><li>As a cache for heavily accessed but rarely updated data</li></ul><h3 id="NoSQL-Models-Column-Store"><a href="#NoSQL-Models-Column-Store" class="headerlink" title="NoSQL Models: Column Store"></a>NoSQL Models: Column Store</h3><ul><li>Motivated by Google’s BigTable</li><li>Extension of the K/V system, where columns can have a complex structure, rather than a blob value</li><li>Supports complex modeling structure (nested tables, repeating groups, set, list, etc.)</li><li>Big Table, Cassandra, HBase, Vertica, Accumulo, Hypertable, etc</li></ul><h3 id="NoSQL-Models-Document-Store"><a href="#NoSQL-Models-Document-Store" class="headerlink" title="NoSQL Models: Document Store"></a>NoSQL Models: Document Store</h3><ul><li>Similar to Key-value store, but the value is a complete document, such as JSON, XML, etc.</li><li>Any collection of documents such as maps, collections, and scalar values.</li></ul><h3 id="NoSQL-Models-Graph-Databases"><a href="#NoSQL-Models-Graph-Databases" class="headerlink" title="NoSQL Models: Graph Databases"></a>NoSQL Models: Graph Databases</h3><ul><li>Models data in terms of nodes and connections</li><li>Useful for inter-connected data such as communication patterns, social networks, bio interactions.</li><li>Allows us to ask deeper and more complex questions</li><li>Difficult to distribute components of a graph among a network of servers as graphs become larger.</li></ul><h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><div class="table-container"><table><thead><tr><th style="text-align:left">Advantages</th><th style="text-align:left">Disadvantages</th></tr></thead><tbody><tr><td style="text-align:left">- Utilize the scale-out architecture that supports scalability, fault tolerance, and high availability <br />- Rapid insertion of arbitrary heterogeneous data with schema-on-read <br />- High performance of sequential scan (good for batch-oriented job such as OLAP workload)</td><td style="text-align:left">- Lack of ACID - Not adequate for OLTP workload that requires random access and ACID <br />- Lack of high-level functionality such as SQL, schemas, and secondary indexes</td></tr></tbody></table></div>]]></content>
      
      
      
        <tags>
            
            <tag> Big Data </tag>
            
            <tag> Database </tag>
            
            <tag> NoSQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MapReduce Overview</title>
      <link href="2018/08/22/map-reduce/"/>
      <url>2018/08/22/map-reduce/</url>
      
        <content type="html"><![CDATA[<p>MapReduce is a high-level programming model and implementation for processing large scale parallel data.</p><span id="more"></span><p>Imaging you need to count the frequency of words across a tremendous amount of documents. It may take years to calculate the result on a single computer. In fact, you can slice all documents into small pieces of words and put all those small segments of documents into a word counting program, which is what we called Mapper. Lots of mappers run on different computational environment in parallel then output every word’s frequency. The next step is to shuffle all different word key pairs and load them onto adders, which is the reducer. Finally, we will get what we want.</p><p><img src="/images/mapreduce1.png" alt="md"></p><h2 id="Implementation"><a href="#Implementation" class="headerlink" title="Implementation"></a>Implementation</h2><p>There are 2 phase in MapReduce</p><h3 id="Map-Phase"><a href="#Map-Phase" class="headerlink" title="Map Phase"></a>Map Phase</h3><p>User provides the <strong>MAP</strong> function:</p><p>Input: <strong>(input key, value)</strong></p><p>Ouput: bag of <strong>(intermediate key, value)</strong></p><p>System applies the map function in parallel to all <strong>(input key, value)</strong> pairs in the input file.</p><h3 id="Reduce-Phase"><a href="#Reduce-Phase" class="headerlink" title="Reduce Phase"></a>Reduce Phase</h3><p>User provides the <strong>REDUCE</strong> function:</p><p>Input: <strong>(intermediate key, bag of values)</strong></p><p>Output: bag of output <strong>(values)</strong></p><p>The system will group all pairs with the same intermediate key, and passes the bag of values to the REDUCE function</p><h2 id="Example-Matrix-Multiply-in-MapReduce"><a href="#Example-Matrix-Multiply-in-MapReduce" class="headerlink" title="Example: Matrix Multiply in MapReduce"></a>Example: Matrix Multiply in MapReduce</h2><p>A and B are matrix, </p><p>A has dimensions L,M, </p><p>B has dimensions M,N</p><p>Get output C = A * B</p><h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><h4 id="In-the-map-phase"><a href="#In-the-map-phase" class="headerlink" title="In the map phase"></a>In the map phase</h4><ul><li>for each element ( i , j ) of A, emit ( ( i , k ), A[ i , j ] ) for k in 1..N</li><li>for each element ( j , k ) of B, emit ( ( i , k ), B[ j , k ] ) for i in 1..L</li></ul><h4 id="In-the-reduce-phase-emit"><a href="#In-the-reduce-phase-emit" class="headerlink" title="In the reduce phase, emit"></a>In the reduce phase, emit</h4><ul><li>key = ( i , k )</li><li>value = Sumj ( A [ i , j ] * B [ j , k ] )</li></ul><h3 id="test-case"><a href="#test-case" class="headerlink" title="test case"></a>test case</h3><script type="math/tex; mode=display">A = \begin{pmatrix} 1 & 2 \\3 & 4 \\ 5 & 6 \\ \end{pmatrix}B = \begin{pmatrix} 0 & 2 \\3 & 4 \\  \end{pmatrix} \\A * B = \begin{pmatrix}1 * 0 + 2 * 3 & 1 * 2 + 2 * 4 \\3 * 0 + 4 * 3 & 3 * 2 + 4 * 4 \\5 * 0 + 6 * 3 & 5 * 2 + 6 * 4\end{pmatrix}=\begin{pmatrix}6 & 8 \\12 & 22 \\18 & 34\end{pmatrix}</script><p>L = 3, M = 2, N = 2</p><p>In computer, it usaully input as a sequence of list [i, j, value]:</p><p>A: <code>[1, 1, 1], [1, 2, 2], [2, 1, 3], [2, 2, 4], [3, 1, 5], [3, 2, 6]</code></p><p>B: <code>[1, 2, 2], [2, 1, 3], [2, 2, 4]</code></p><h4 id="Map-Phase-1"><a href="#Map-Phase-1" class="headerlink" title="Map Phase"></a>Map Phase</h4><div class="table-container"><table><thead><tr><th>A</th><th></th><th>B</th><th></th></tr></thead><tbody><tr><td>key (i, k)</td><td>value</td><td>key (i, k)</td><td>value ()</td></tr><tr><td>(1,1)</td><td>[A(1, 1), 1]</td><td>(1,2)</td><td>[B(1, 2), 2]</td></tr><tr><td>(1,2)</td><td>[A(1, 1), 1]</td><td>(2,2)</td><td>[B(1, 2), 2]</td></tr><tr><td>(1,1)</td><td>[A(1, 2), 2]</td><td>(3,2)</td><td>[B(1, 2), 2]</td></tr><tr><td>(1,2)</td><td>[A(1, 2), 2]</td><td>(1,1)</td><td>[B(2, 1), 3]</td></tr><tr><td>(2,1)</td><td>[A(2, 1), 3]</td><td>(2,1)</td><td>[B(2, 1), 3]</td></tr><tr><td>(2,2)</td><td>[A(2, 1), 3]</td><td>(3,1)</td><td>[B(2, 1), 3]</td></tr><tr><td>(2,1)</td><td>[A(2, 2), 4]</td><td>(1,2)</td><td>[B(2, 2), 4]</td></tr><tr><td>(2,2)</td><td>[A(2, 2), 4]</td><td>(2,2)</td><td>[B(2, 2), 4]</td></tr><tr><td>(3,1)</td><td>[A(3, 1), 5]</td><td>(3,2)</td><td>[B(2, 2), 4]</td></tr><tr><td>(3,2)</td><td>[A(3, 1), 5]</td><td>(1, 1)</td><td>[B(1, 1), 0]</td></tr><tr><td>(3,1)</td><td>[A(3, 2), 6]</td><td>(2, 1)</td><td>[B(1, 1), 0]</td></tr><tr><td>(3,2)</td><td>[A(3, 2), 6]</td><td>(3, 1)</td><td>[B(1, 1), 0]</td></tr></tbody></table></div><h4 id="Shuffle"><a href="#Shuffle" class="headerlink" title="Shuffle"></a>Shuffle</h4><div class="table-container"><table><thead><tr><th style="text-align:left">(1, 1)</th><th style="text-align:left">[A(1, 1), 1]</th><th style="text-align:left">[B(1, 1), 0]</th></tr></thead><tbody><tr><td style="text-align:left"></td><td style="text-align:left">[A(1, 2), 2]</td><td style="text-align:left">[B(2, 1), 3]</td></tr><tr><td style="text-align:left">(1, 2)</td><td style="text-align:left">[A(1, 1), 1]</td><td style="text-align:left">[B(1, 2), 2]</td></tr><tr><td style="text-align:left"></td><td style="text-align:left">[A(1, 2), 2]</td><td style="text-align:left">[B(2, 2), 4]</td></tr><tr><td style="text-align:left">(2, 1)</td><td style="text-align:left">[A(2, 1), 3]</td><td style="text-align:left">[B(1, 1), 0]</td></tr><tr><td style="text-align:left"></td><td style="text-align:left">[A(2, 2), 4]</td><td style="text-align:left">[B(2, 1), 3]</td></tr><tr><td style="text-align:left">(2, 2)</td><td style="text-align:left">[A(2, 1), 3]</td><td style="text-align:left">[B(1, 2), 2]</td></tr><tr><td style="text-align:left"></td><td style="text-align:left">[A(2, 2), 4]</td><td style="text-align:left">[B(2, 2), 4]</td></tr><tr><td style="text-align:left">(3, 1)</td><td style="text-align:left">[A(3, 1), 5]</td><td style="text-align:left">[B(1, 1), 0]</td></tr><tr><td style="text-align:left"></td><td style="text-align:left">[A(3, 2), 6]</td><td style="text-align:left">[B(2, 1), 3]</td></tr><tr><td style="text-align:left">(3, 2)</td><td style="text-align:left">[A(3, 1), 5]</td><td style="text-align:left">[B(1, 2), 2]</td></tr><tr><td style="text-align:left"></td><td style="text-align:left">[A(3, 2), 6]</td><td style="text-align:left">[B(2, 2), 4]</td></tr></tbody></table></div><h4 id="Reduce-Phase-1"><a href="#Reduce-Phase-1" class="headerlink" title="Reduce Phase"></a>Reduce Phase</h4><p>(1,1): 2 * 3 = 6</p><p>(1,2): 1 <em> 2 + 2 </em> 4 = 10</p><p>(2,1): 4 * 3 = 12</p><p>(2,2): 3 <em> 2 + 4 </em> 4 = 22</p><p>(3,1): 6 * 3 = 18</p><p>(3,2): 5 <em> 2 + 6 </em> 4 = 34</p><script type="math/tex; mode=display">C = \begin{pmatrix} 6 & 10 \\12 & 22 \\ 18 & 34 \\ \end{pmatrix}</script><h2 id="Application-Distributes-File-System-DFS"><a href="#Application-Distributes-File-System-DFS" class="headerlink" title="Application - Distributes File System(DFS)"></a>Application - Distributes File System(DFS)</h2><ul><li>For very large files: TBs, PBs</li><li>Each file is partitioned into chunks, typically 64MB</li><li>Each chunk is replicated several times (≥3), on different racks, for fault tolerance</li></ul><p>Implementations:</p><p>• Google’s DFS: GFS, proprietary • Hadoop’s DFS: HDFS, open source</p><h2 id="Extensions-amp-Contemporaries"><a href="#Extensions-amp-Contemporaries" class="headerlink" title="Extensions &amp; Contemporaries"></a>Extensions &amp; Contemporaries</h2><ul><li>Pig: Relational Algebra over Hadoop</li><li>HIVE: SQL over Hadoop</li><li>Impala: SQL over HDFS (uses some HIVE code)</li><li>Cascading: Relational Algebra</li></ul><h2 id="Something-else"><a href="#Something-else" class="headerlink" title="Something else"></a>Something else</h2><p>Finally complete the online course - <a href="https://www.coursera.org/learn/data-manipulation">Data Manipulation at Scale: Systems and Algorithms</a></p><p>Here’s my solution in mapreduce assignment (Week 3 assignment)</p><p><a href="https://github.com/testsiling/Data-Science-at-Scale-Solution">https://github.com/testsiling/Data-Science-at-Scale-Solution</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Data Science </tag>
            
            <tag> Big Data </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Decision Tree</title>
      <link href="2018/05/17/decision-tree/"/>
      <url>2018/05/17/decision-tree/</url>
      
        <content type="html"><![CDATA[<p>Decision Tree algorithm with example.</p><span id="more"></span><h2 id="Basic-algorithm-greedy-algorithm"><a href="#Basic-algorithm-greedy-algorithm" class="headerlink" title="Basic algorithm (greedy algorithm)"></a>Basic algorithm (greedy algorithm)</h2><p>Tree is constructed in a top-down recursive divide-and-conquer manner.</p><p>At start, all the training examples are at the root.</p><p>Attributes are categorical (if continuous-valued, they are discretized in advance).</p><p>Examples are partitioned recursively based on selected attributes.</p><p>Test attributes are selected on the basis of a heuristic or statistical measure (e.g., information gain).</p><p>When all samples for a given node belong to a same class, or no remaining attributes for further partitioning, or no more samples left, partitioning end.</p><h2 id="Information-Gain-ID3-C4-5"><a href="#Information-Gain-ID3-C4-5" class="headerlink" title="Information Gain (ID3/C4.5)"></a>Information Gain (ID3/C4.5)</h2><p>Information Gain is a attribute selection measure.</p><p>The basic idea is to select the attribute with the highest information gain.</p><p><em>D</em> as a data partition</p><script type="math/tex; mode=display">p_i$$ as the probability that an arbitrary tuple in *D* which belongs to class $$C_i</script><script type="math/tex; mode=display">p_i=\frac{\lvert{C_{i,D}}\rvert}{\lvert{D}\rvert}</script><h4 id="Expected-information"><a href="#Expected-information" class="headerlink" title="Expected information"></a>Expected information</h4><p>(entropy) needed to classify a tuple in <em>D</em></p><script type="math/tex; mode=display">Info(D)=-\sum_{i=1}^{m}p_ilog_2(p_i)</script><h4 id="Information"><a href="#Information" class="headerlink" title="Information"></a>Information</h4><p>needed (after using <em>A</em> to split <em>D</em> into v partitions) to classify <em>D</em></p><script type="math/tex; mode=display">Info_A(D)=-\sum_{j=1}^{v}\frac{\lvert{D_j}\rvert}{\lvert{D}\rvert}*I(D_j)</script><h4 id="Information-gained"><a href="#Information-gained" class="headerlink" title="Information gained"></a>Information gained</h4><p>by branching on attribute <em>A</em></p><script type="math/tex; mode=display">Gain(A) = Info(D)-Info_A(D)</script><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><p>if we have a database below and want to build a decision tree for “who will buy the computer”</p><p><img src="/images/dt_1.png" alt="dt1"></p><p>Class N: buys_computer = “yes”</p><p>Class M: buys_computer = “no”</p><p>First, select a attribute to calculate the Gain. Here we choose age.</p><div class="table-container"><table><thead><tr><th style="text-align:left">Age</th><th style="text-align:left"><script type="math/tex">N_i</script></th><th style="text-align:left"><script type="math/tex">M_i</script></th><th style="text-align:left"><script type="math/tex">I(N_i, M_i)</script></th></tr></thead><tbody><tr><td style="text-align:left">&lt;= 30</td><td style="text-align:left">2</td><td style="text-align:left">3</td><td style="text-align:left">0.971</td></tr><tr><td style="text-align:left">31-40</td><td style="text-align:left">4</td><td style="text-align:left">0</td><td style="text-align:left">0</td></tr><tr><td style="text-align:left">&gt; 40</td><td style="text-align:left">3</td><td style="text-align:left">2</td><td style="text-align:left">0.971</td></tr><tr><td style="text-align:left"></td><td style="text-align:left">9</td><td style="text-align:left">5</td><td style="text-align:left">0.940</td></tr></tbody></table></div><script type="math/tex; mode=display">\begin{align}Info(D) &= I(9, 5)=-(\frac9{14}log_2(\frac9{14}) + \frac5{14}log_2(\frac5{14})) = 0.94 \\I(2, 3) &= -(\frac2{5}log_2(\frac2{5}) + \frac3{5}log_2(\frac3{5})) = 0.971\\I(4, 0) &= -(\frac4{4}log_2(\frac4{4}) + 0) = 0\\I(3, 2) &= -(\frac3{5}log_2(\frac3{5}) + \frac2{5}log_2(\frac2{5}) = 0.971\\Info_{age}(D) &= \frac5{14}I(2, 3) + \frac4{14}I(4, 0) + \frac5{14}I(3,2) = 0.694\end{align}</script><script type="math/tex; mode=display">\frac5{14}I(2,3)$$ means “age <= 30” has 5 out of 14 samples, with 2 yes and 3 no.Hence:$$Gain(age) = Info(D) - Info_age(D) = 0.94 - 0.694 = 0.246</script><p>Similarly, we have to calculate Gains of other attributes:</p><p>Gain(income) = 0.029</p><p>Gain(student) = 0.151</p><p>Gain(credit, rating) = 0.048</p><p>Finally we get a decision tree below.</p><p><img src="/images/dt_2.png" alt="dt1"></p><h2 id="Gain-Ratio-C4-5"><a href="#Gain-Ratio-C4-5" class="headerlink" title="Gain Ratio (C4.5)"></a>Gain Ratio (C4.5)</h2><p>Gain is another attribute selection measure</p><p>Information gain measure is biased towards attributes with a large number of values. C4.5 (a successor of ID3) uses <strong>gain ratio</strong> to overcome the problem (normalization to information gain)</p><script type="math/tex; mode=display">SplitInfo_A(D) &= -\sum_{j=1}^v(\frac{\lvert{D_j}\rvert}{D} * log_2(\frac{\lvert{D_j}\rvert}{D})) \\GainRatio(A) &= \frac{Gain(A)}{SplitInfo_A(D)}</script><p>For example:</p><script type="math/tex; mode=display">\begin{align}SplitInfo_{income}(D) &= -(\frac4{14}*log_2(\frac4{14}) + \frac6{14}*log_2(\frac6{14}) + \frac4{14}*log_2(\frac4{14})) = 0.926 \\GainRatio(income) &= 0.029/0.926 = 0.031\end{align}</script><p>The attribute with the <strong>maximum</strong> gain ratio is selected as the splitting attribute.</p><h2 id="Gini-index-CART-IBM-IntelligentMiner"><a href="#Gini-index-CART-IBM-IntelligentMiner" class="headerlink" title="Gini index (CART, IBM IntelligentMiner)"></a>Gini index (CART, IBM IntelligentMiner)</h2><p>If a data set <em>D</em> contains examples from n classes, and the <script type="math/tex">p_j</script> is the relative frequency of class j in <em>D</em>, the gini index, <em>gini(D)</em> is defined as <script type="math/tex">gini(D)=1-\sum_{j=1}^np_j^2</script></p><p>If a data set <em>D</em> is split on A into two subsets <em>D1</em> and <em>D2</em>, the gini index is defined as</p><script type="math/tex; mode=display">gini_A(D) = \frac{D_1}{D}gini(D_1)+\frac{D_2}{D}gini(D_2)</script><p>Reduction in impurity:</p><script type="math/tex; mode=display">\Delta gini(A) = gini(D)-gini_A(D)</script><p>The attribute that has the lowest <script type="math/tex">gini_{split}(D)</script> (or the greatest reduction in impurity) is chosen to split the node (need to enumerate all the possible splitting points for each attribute)</p><p>In the example above, <em>D</em> Has 9 tuples in buy_computer = “yes” and 5 in “no”</p><script type="math/tex; mode=display">gini(D) = 1-((\frac9{14})^2+(\frac5{14})^2) = 0.459</script><p>Suppose the attribute income partitions D into D1: {low, medium} = 10 and D2: {high} = 4</p><script type="math/tex; mode=display">\begin{equation}\begin{aligned}gini_{income\in\{low, medium\}}(D) &= \frac{10}{14}gini(D_1)+\frac4{14}gini(D_2) \\&=\frac{10}{14}(1-(\frac{6}{10})^2 - (\frac{4}{10})^2) + \frac{4}{14}(1-(\frac14)^2-(\frac34)^2) \\&= 0.450\\&= gini_{income\in\{high\}}\end{aligned}\end{equation}</script><p>However, <script type="math/tex">gini_{\{medium, high\}}</script> =0,30 ,which is the lowest thus the best.</p><p>All attributes are assumed continuous-valued</p><p>Sometimes we may need other tools, e.g., clustering, to get the possible split values</p><p>Can be modified for categorical attributes</p><h2 id="Comparison"><a href="#Comparison" class="headerlink" title="Comparison"></a>Comparison</h2><p>Information gain: Bias toward multivalued attributes.</p><p>Gain ratio: Tends to prefer unbalanced splits in which one partition is much smaller than the others</p><p>Gini index:</p><ul><li>Bias toward multivalued attributes.</li><li>Hard to deal with the dataset that has large number of classes.</li><li>Tends to favor tests that result in equal-sized partitions and purity in both partitions</li></ul><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>Han, J., Kamber, M., &amp; Pei, J. (2011). <em>Data Mining: Concepts and Techniques</em> (3rd ed.). Burlington: Elsevier Science.</p>]]></content>
      
      
      
        <tags>
            
            <tag> Data Science </tag>
            
            <tag> Data Mining </tag>
            
            <tag> Machine Learning </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Accuracy, Precision, Recall, F1</title>
      <link href="2018/05/17/evaluation/"/>
      <url>2018/05/17/evaluation/</url>
      
        <content type="html"><![CDATA[<p>Accuracy, precision, recall, and f1 are 4 common metrics in classification evaluation.</p><span id="more"></span><ul><li>True Negative (TN): case was negative and predicted negative</li><li>True Positive (TP): case was positive and predicted positive</li><li>False Negative (FN): case was positive but predicted negative</li><li>False Positive (FP): case was negative but predicted positive</li></ul><div class="table-container"><table><thead><tr><th></th><th><strong>Predicted Negative</strong></th><th><strong>Predicted Positive</strong></th></tr></thead><tbody><tr><td><strong>Negative Cases</strong></td><td>TN</td><td>FP</td></tr><tr><td><strong>Positive Cases</strong></td><td>FN</td><td>TP</td></tr></tbody></table></div><h2 id="Accuracy"><a href="#Accuracy" class="headerlink" title="Accuracy"></a>Accuracy</h2><p><strong>The percentage of successful prediction</strong></p><script type="math/tex; mode=display">\frac{TN + TP}{TN + FN + TP + FP}</script><h2 id="Precision"><a href="#Precision" class="headerlink" title="Precision"></a>Precision</h2><p><strong>How many seleted items are relevant</strong></p><script type="math/tex; mode=display">\frac{TP}{TP + FP}</script><h2 id="Recall"><a href="#Recall" class="headerlink" title="Recall"></a>Recall</h2><p><strong>How many relevant items are selected</strong></p><script type="math/tex; mode=display">\frac{TP}{TP + FN}</script><h2 id="Harmonic-score"><a href="#Harmonic-score" class="headerlink" title="Harmonic score"></a>Harmonic score</h2><p>Sometimes precision and recall is contradictory. For example, if we only found 1 case which is correctly predicted, the precision is 100% while the recall is probably running extremely low.</p><p>Therefore, we might use <strong>Harmonic score</strong>, for merging multiple measures.</p><script type="math/tex; mode=display">f(x_1...x_n) = \frac{n}{\frac1{x_1} + ... + \frac1{x_n}}</script><h3 id="F1-score"><a href="#F1-score" class="headerlink" title="F1 score"></a>F1 score</h3><script type="math/tex; mode=display">f(x, y) = \frac2{\frac1{x} + \frac1{y}}$$ is called harmonic sum.</script><p>F_1 = \frac2{\frac1{recall} + \frac1{precision}} = 2 * \frac{precision ∗ recall}{precision + recall}</p><p><script type="math/tex">symmetric, x,y are same important.</script>f\in(0, 1]<script type="math/tex">when</script>x, y\in [0, 1]$$. <strong>Either x or y increase, f increase</strong>.</p><p><img src="/images/f1.png" alt="f1"></p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>How Are Precision and Recall Calculated?. Retrieved from <a href="https://www.kdnuggets.com/faq/precision-recall.html">https://www.kdnuggets.com/faq/precision-recall.html</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Data Science </tag>
            
            <tag> Data Mining </tag>
            
            <tag> Machine Learning </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Apriori Algorithm</title>
      <link href="2018/05/08/apriori/"/>
      <url>2018/05/08/apriori/</url>
      
        <content type="html"><![CDATA[<p>Apriori Algorithm (Agrawal &amp; Srikant, 1994) is one of scalable methods for mining frequent patterns.</p><p>It is a Candidate Generation and Test Approach</p><p>According to the downward closure property of frequent patterns: <strong>If there is any itemset which is infrequent, its superset should not be generated/tested</strong> (Apriori pruning principle)</p><span id="more"></span><h2 id="Apriori-Algorithm-Example"><a href="#Apriori-Algorithm-Example" class="headerlink" title="Apriori Algorithm Example"></a>Apriori Algorithm Example</h2><p><img src="/images/Apriori.png" alt="apriori"></p><p>{B, C, E} is generated from {B, C} and {C, E}</p><p>{A, B, C}, {A, B, E}, {A, C, E} will bot be generated because {A, B} and {A, E} is not popular and have been removed from <script type="math/tex">L_2</script></p><p><script type="math/tex">C_k</script>: Candidate itemset of size k</p><p><script type="math/tex">L_k</script> : frequent itemset of size k</p><h2 id="Challenges"><a href="#Challenges" class="headerlink" title="Challenges"></a>Challenges</h2><ul><li>Multiple scans of transaction database (Slow, high cost)</li><li>Huge number of candidates (a 2000 itemset might generate 200 popular rules.)</li><li>Tedious workload of support counting for candidates.</li></ul><h2 id="Improvement"><a href="#Improvement" class="headerlink" title="Improvement"></a>Improvement</h2><ul><li>Partition: Scan Database Only Twice (A. Savasere, E. Omiecinski, and S. Navathe. An efficient algorithm for mining association in large databases. In VLDB’95 )</li><li>Hash: Reduce the Number of Candidates (J. Park, M. Chen, and P. Yu. An effective hash-based algorithm for mining association rules. In SIGMOD’95 )</li><li>Sampling for Frequent Patterns (H. Toivonen. Sampling large databases for association rules. In VLDB’96 )</li><li>DIC: Reduce Number of Scans (S. Brin R. Motwani, J. Ullman, and S. Tsur. Dynamic itemset counting and implication rules for market basket data. In SIGMOD’97 )</li><li>FP-Growth</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Data Science </tag>
            
            <tag> Data Mining </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Frequent Patterns and Association Rules</title>
      <link href="2018/05/08/freq-pat/"/>
      <url>2018/05/08/freq-pat/</url>
      
        <content type="html"><![CDATA[<p>Frequent pattern is a pattern (a set of items, subsequences, substructures, etc.) that occurs frequently in a data set. It used for finding inherent regularities in data.</p><span id="more"></span><p>Ex. What products were often purchased together? - Beer and diapers (fact) ?!</p><p>Because blue collars usually buy beers on Friday night after work. At that time, their wives will ask them buy some diapers by the way.</p><h2 id="Frequent-Patterns-and-Association-Rules"><a href="#Frequent-Patterns-and-Association-Rules" class="headerlink" title="Frequent Patterns and Association Rules"></a>Frequent Patterns and Association Rules</h2><p>Itemset <script type="math/tex">X = \{x_1, …, x_k\}</script></p><p>Find all the rules X -&gt; Y with minimum support and confidence</p><ul><li>Support s, probability that a transaction contains <script type="math/tex">X \cup Y</script>. Support define the rule is popular or not.</li><li>Confidence c, conditional probability that a transaction having X also contains Y</li></ul><p>Example:</p><div class="table-container"><table><thead><tr><th style="text-align:left">Transaction-id</th><th style="text-align:left">Items bought</th></tr></thead><tbody><tr><td style="text-align:left">10</td><td style="text-align:left">A, B, D</td></tr><tr><td style="text-align:left">20</td><td style="text-align:left">A, C, D</td></tr><tr><td style="text-align:left">30</td><td style="text-align:left">A, D, E</td></tr><tr><td style="text-align:left">40</td><td style="text-align:left">B, E, F</td></tr><tr><td style="text-align:left">50</td><td style="text-align:left">B, C, D, E, F</td></tr></tbody></table></div><p>Frequent Patterns: { A:3, B:3, D:4, D:4, E:3, AD:3 }</p><p>We Define <script type="math/tex">sup_{min}=50\%, conf_{min}=50\%</script></p><p>Association rules:</p><ul><li>A -&gt; D: ( s = 3/5, c = 3/3 ) = ( 60% , 100% )</li><li>D -&gt; A: ( s = 3/5, c = 3/4 ) = ( 60% , 75% )</li><li>Therefore, A and D is strongly associated.</li></ul><p>The downward closure property of frequent patterns:<br><strong>Any subset of a frequent itemset must be frequent</strong></p><h2 id="major-scalable-mining-methods"><a href="#major-scalable-mining-methods" class="headerlink" title="major scalable mining methods"></a>major scalable mining methods</h2><ol><li><a href="https://xianyu.life/2018/05/09/Apriori/">Apriori Algorithm (Agrawal &amp; Srikant, 1994)</a></li><li>Freq. pattern growth (Han, Pei &amp; Yin, 2000)</li><li>Vertical data format approach (Zaki &amp; Gouda, 2003)</li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Data Science </tag>
            
            <tag> Data Mining </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DFA &amp; NFA</title>
      <link href="2018/04/18/dfa/"/>
      <url>2018/04/18/dfa/</url>
      
        <content type="html"><![CDATA[<p>A note of Drexel CS520 - CS Foundations</p><ul><li>Deterministic Finite Automaton (DFA)</li><li>Nondeterministic Finite Automaton (NFA)</li></ul><span id="more"></span><h2 id="Deterministic-Finite-Automaton-DFA"><a href="#Deterministic-Finite-Automaton-DFA" class="headerlink" title="Deterministic Finite Automaton (DFA)"></a>Deterministic Finite Automaton (DFA)</h2><p>Deterministic Finite Automaton (DFA) is a theoretical model of Computation</p><p>a DFA is a 5-tuple M = (Q,Σ,δ,q,F)</p><ul><li>Q is a finite set of states.</li><li>Σ is a finite set of symbols called the alphabet .</li><li>δ is set of transitions between states.</li><li>q is the start state.</li><li>F a set of accept states. F is a subset of Q.</li></ul><p>A DFA is said to accept and input if it exits in an accept state.</p><p><strong>The DFA’s memory is limited to its states. It cannot solve problems that require more memory.</strong></p><h3 id="Regular-Languages"><a href="#Regular-Languages" class="headerlink" title="Regular Languages"></a>Regular Languages</h3><ul><li>Languages that DFA can accept are called regular languages</li><li>Infinite Regular Languages must have a repeating component.</li><li>This repetition can be done forever because the DFA has a loop.</li></ul><h2 id="Nondeterministic-Finite-Automaton-NFA"><a href="#Nondeterministic-Finite-Automaton-NFA" class="headerlink" title="Nondeterministic Finite Automaton (NFA)"></a>Nondeterministic Finite Automaton (NFA)</h2><p>Nondeterminism: The ability of a machine to have multiple behaviors given the same input. A NFA can have multiple outgoing edges with the same values. It may have missing edges which are assumed to reject. It may have ε edges that are taken without reading any symbols.</p><p><strong>All NFA can be converted to DFA</strong></p><ol><li>Create new states for every combination of original states</li><li>Create a new reject state</li><li>Follow every edge<ul><li>If the edges goes into two states, use the new combination states</li><li>If the edges doesn’t exist, point it to the new reject state</li></ul></li><li>Remove any states that were never used.</li><li>Make accept states</li></ol><p><img src="/images/NFA.png" alt="nfa"></p><p><img src="/images/DFA.png" alt="nfa"></p><h2 id="Regular-Expressions-RegExp"><a href="#Regular-Expressions-RegExp" class="headerlink" title="Regular Expressions (RegExp)"></a>Regular Expressions (RegExp)</h2><p>Regular Expressions are a simple language to explain text patterns.</p><p>Basic Regular Expressions have four components</p><ul><li>Symbols: a single letter to be matched</li><li>Concatenation: Two regexp next to each other need to be found in order</li><li>Union: The | symbol means select either of the two values</li><li>Kleene Star: The ∗ symbol means 0 or more repetitions</li></ul><p>A Regular Expression makes a DFA.</p><p>Order of Operations: ∗, |, concat</p><p>Parenthesis may be used.</p><p><strong>All Regular Expressions are DFA</strong></p><h3 id="RegExp-Examples"><a href="#RegExp-Examples" class="headerlink" title="RegExp Examples"></a>RegExp Examples</h3><ul><li>a|b either a or b</li><li>abb only accepts abb</li><li>(a|b)aa accepts aaa or baa</li><li>a*cc accepts cc,acc,aacc,aaacc,aaaaaacc, etc</li><li>(0|1)<em> 101 (1|0)</em> accepts any binary string containing 101</li></ul><h2 id="Exercises"><a href="#Exercises" class="headerlink" title="Exercises"></a>Exercises</h2><h3 id="Accepts-any-binary-string-containing-exactly-three-1"><a href="#Accepts-any-binary-string-containing-exactly-three-1" class="headerlink" title="Accepts any binary string containing exactly three 1"></a>Accepts any binary string containing exactly three 1</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># This DFA Accepts the Language</span><br><span class="line"># L=&#123; Accepts any binary string containing exactly three 1s &#125;</span><br><span class="line"># Define DFA Properties</span><br><span class="line">symbols=(0,1)</span><br><span class="line">states=(q1,q2,q3,q4,q5)</span><br><span class="line">start=q1</span><br><span class="line">accept=(q4)</span><br><span class="line"># Define Transition Table</span><br><span class="line">if q1 and 0 then q1</span><br><span class="line">if q1 and 1 then q2</span><br><span class="line">if q2 and 0 then q2</span><br><span class="line">if q2 and 1 then q3</span><br><span class="line">if q3 and 0 then q3</span><br><span class="line">if q3 and 1 then q4</span><br><span class="line">if q4 and 0 then q4</span><br><span class="line">if q4 and 1 then q5</span><br><span class="line">if q5 and 0 then q5</span><br><span class="line">if q5 and 1 then q5</span><br></pre></td></tr></table></figure><p><img src="/images/Q1.png" alt="q1"></p><h3 id="Accepts-any-binary-string-whose-length-is-a-multiple-of-3-0-3-6-9-…"><a href="#Accepts-any-binary-string-whose-length-is-a-multiple-of-3-0-3-6-9-…" class="headerlink" title="Accepts any binary string whose length is a multiple of 3. (0,3,6,9,…)"></a>Accepts any binary string whose length is a multiple of 3. (0,3,6,9,…)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># L=&#123; Accepts any binary string containing exactly three 1s &#125;</span><br><span class="line"># Define DFA Properties</span><br><span class="line">symbols=(0,1)</span><br><span class="line">states=(q1,q2,q3,q4,q5)</span><br><span class="line">start=q1</span><br><span class="line">accept=(q4)</span><br><span class="line"># Define Transition Table</span><br><span class="line">if q1 and 0 then q1</span><br><span class="line">if q1 and 1 then q2</span><br><span class="line">if q2 and 0 then q2</span><br><span class="line">if q2 and 1 then q3</span><br><span class="line">if q3 and 0 then q3</span><br><span class="line">if q3 and 1 then q4</span><br><span class="line">if q4 and 0 then q4</span><br><span class="line">if q4 and 1 then q5</span><br><span class="line">if q5 and 0 then q5</span><br><span class="line">if q5 and 1 then q5</span><br></pre></td></tr></table></figure><p><img src="/images/Q2.png" alt="q1"></p><h3 id="Accepts-any-binary-string-that-does-not-contain-the-substring-110"><a href="#Accepts-any-binary-string-that-does-not-contain-the-substring-110" class="headerlink" title="Accepts any binary string that does not contain the substring 110"></a>Accepts any binary string that does not contain the substring 110</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># L=&#123;Accepts any binary string that does not contain the substring 110.&#125;</span><br><span class="line">symbols=(0,1)</span><br><span class="line">states=(q0,q1,q2,q3)</span><br><span class="line">start=q0</span><br><span class="line">accept=(q0,q1,q2)</span><br><span class="line"># Define Transition Table</span><br><span class="line">if q0 and 0 then q0</span><br><span class="line">if q0 and 1 then q1</span><br><span class="line">if q1 and 0 then q0</span><br><span class="line">if q1 and 1 then q2</span><br><span class="line">if q2 and 0 then q3</span><br><span class="line">if q2 and 1 then q2</span><br><span class="line">if q3 and 0 then q3</span><br><span class="line">if q3 and 1 then q3</span><br></pre></td></tr></table></figure><p><img src="/images/Q3.png" alt="q1"></p><h3 id="Accepts-any-binary-string-that-begins-with-a-1-and-ends-with-a-0"><a href="#Accepts-any-binary-string-that-begins-with-a-1-and-ends-with-a-0" class="headerlink" title="Accepts any binary string that begins with a 1 and ends with a 0"></a>Accepts any binary string that begins with a 1 and ends with a 0</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># This DFA Accepts the Language</span><br><span class="line"># L=&#123;Accepts any binary string that begins with a 1 and ends with a 0.&#125;</span><br><span class="line">symbols=(0,1)</span><br><span class="line">states=(q0,q1,q2,q3,q4)</span><br><span class="line">start=q0</span><br><span class="line">accept=(q3)</span><br><span class="line"># Define Transition Table</span><br><span class="line">if q0 and 0 then q1</span><br><span class="line">if q0 and 1 then q2</span><br><span class="line">if q1 and 0 then q1</span><br><span class="line">if q1 and 1 then q1</span><br><span class="line">if q2 and 0 then q3</span><br><span class="line">if q2 and 1 then q2</span><br><span class="line">if q3 and 0 then q3</span><br><span class="line">if q3 and 1 then q4</span><br><span class="line">if q4 and 0 then q3</span><br><span class="line">if q4 and 1 then q4</span><br></pre></td></tr></table></figure><p><img src="/images/Q4.png" alt="q1"></p>]]></content>
      
      
      
        <tags>
            
            <tag> DFA </tag>
            
            <tag> Computer Science </tag>
            
            <tag> NFA </tag>
            
            <tag> RegExp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Machine Learning(2) Linear Regression</title>
      <link href="2018/03/03/ml-lr/"/>
      <url>2018/03/03/ml-lr/</url>
      
        <content type="html"><![CDATA[<p>Linear Regression<br><span id="more"></span></p><h2 id="Linear-regresssion-with-one-variable"><a href="#Linear-regresssion-with-one-variable" class="headerlink" title="Linear regresssion with one variable."></a>Linear regresssion with one variable.</h2><p>Hypothesis:  <script type="math/tex">hθ(x)=θ_0+θ_1x</script></p><p>Choose and so that is close to y for out training example(x,y)</p><h2 id="Cost-Function"><a href="#Cost-Function" class="headerlink" title="Cost Function"></a>Cost Function</h2><script type="math/tex; mode=display">J(θ_0,θ_1)=\frac1{2m}\sum_{i=1}^n(hθ(x^i)−y^i)</script><p>m = number of training example.</p><p>h = my hypothesis</p><p>y = actual</p><p>Goal: minimize <script type="math/tex">J(θ_0,θ_1)</script></p><p>cost function look like this:</p><p><img src="/images/costFunction.jpg" alt=""></p><h2 id="Gradient-Descent"><a href="#Gradient-Descent" class="headerlink" title="Gradient Descent"></a>Gradient Descent</h2><p>start with <script type="math/tex">\theta_0,\theta_1</script>. Changing <script type="math/tex">\theta_0,\theta_1</script> to reduce the <script type="math/tex">J(\theta_0,\theta_1)</script>, until we hopefully end up at a minimum.</p><script type="math/tex; mode=display">\begin{align*}repeat\ until\ convergence \{ \\\theta_j := \theta_j - \alpha\frac{d}{d\theta_j}J(θ_0,θ_1) \\(for j=0 and j=1) \\\}\ Simultaneously\ update\ \theta_0\ and\ \theta_1\end{align*}</script><p>α means learning rate. if α is too small, gradient descent can be slow, if α is too large, gradient descent can overshoot the minimum. It mat fail to converge.</p><p><img src="/images/gradientDescent_1.jpg" alt=""></p><h2 id="Feature-Scaling"><a href="#Feature-Scaling" class="headerlink" title="Feature Scaling"></a>Feature Scaling</h2><p>Make sure features are on a similar scale, or else gradient descent will take a long time.<br>Processing every feature into approximately a [-1, 1] range. ( [-3, 3] might also works. )</p><h3 id="Mean-Normalization"><a href="#Mean-Normalization" class="headerlink" title="Mean Normalization"></a>Mean Normalization</h3><p>Replace <script type="math/tex">X_i</script> with <script type="math/tex">\frac{X_i - \mu}{S}</script><br>μ is average value of X<br>S is range ( max - min ), or standard deviation.</p><h2 id="Learning-Rate-α"><a href="#Learning-Rate-α" class="headerlink" title="Learning Rate α"></a>Learning Rate α</h2><ul><li>if α is too small: slow canvergence</li><li>if α is too large: <script type="math/tex">J(\theta)</script> may not decrease on every iteration, may not converge (miss the local optimum).<br>Hence, try α<br>0.001 -&gt; 0.003 -&gt; 0.01 -&gt; 0.03 -&gt; 0.1 -&gt; 0.3 ….<h2 id="Normal-Equation"><a href="#Normal-Equation" class="headerlink" title="Normal Equation"></a>Normal Equation</h2></li></ul><p>Normal equation is a method to solve for θ analytically.</p><script type="math/tex; mode=display">\theta = (X^TX)^{-1}X^Ty</script><p>octave code: pinv(X’ * X) * X’ * y</p><p>If you use normal equation, you don’t need to do feature scaling actually.</p><p><strong>The matrix transpose is very expensive <script type="math/tex">(X^TX)^{−1}</script>​​ needs <script type="math/tex">O(n^3)</script>. Therefore, if the n is large, might be greater than 10000, you should consider gradient descent.</strong></p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>Andrew Ng. <a href="https://www.coursera.org/learn/machine-learning">https://www.coursera.org/learn/machine-learning</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Data Science </tag>
            
            <tag> Machine Learning </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Machine Learning(1) Overview</title>
      <link href="2018/03/02/ml-overview/"/>
      <url>2018/03/02/ml-overview/</url>
      
        <content type="html"><![CDATA[<p>Just a overview<br><span id="more"></span></p><p>Machine Learning definition: Field of study that gives computers the ability to learn without being explicitly programmed (Arthur Samuel, 1959).</p><p>Well-posed Learning Problem: A computer program is said to learn from experience E with respect to some task T and some performance measure P, if its performance on T, as measured by P, improves with experience E (Tom Mitchell, 1998)</p><p>Machine learning algorithms:</p><ul><li>Supervised Learning</li><li>Unsupervised Learning</li><li>Others: Reinforcement learning, recommender systems.</li></ul><h2 id="Supervised-Learning"><a href="#Supervised-Learning" class="headerlink" title="Supervised Learning"></a>Supervised Learning</h2><p>Means that you already know the right answer, you train the computer to give you the answer that match to the right answer.<br><strong>Supervised Learning Has Labels.</strong></p><ul><li>Regression: Predict continuous valued output, i.e., predicts unknown or missing values</li><li>Classification: Discrete valued output (0, or 1, or 2 …..)<br>trying to map the input variable into discrete categories</li></ul><h2 id="Unsupervised-Learning"><a href="#Unsupervised-Learning" class="headerlink" title="Unsupervised Learning"></a>Unsupervised Learning</h2><p><strong>The class labels of training data is unknown</strong></p><ul><li>Clustering</li><li>Non-clustering</li></ul><h2 id="ML-Based-Data-Mining"><a href="#ML-Based-Data-Mining" class="headerlink" title="ML-Based Data Mining"></a>ML-Based Data Mining</h2><p>Simple theory hierarchy of ML-based quantitative data mining</p><p><img src="images/MLandDM.png" alt="ml"></p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>Andrew Ng. <a href="https://www.coursera.org/learn/machine-learning">https://www.coursera.org/learn/machine-learning</a></p><p>Han, J., Kamber, M., &amp; Pei, J. (2011). Data Mining: Concepts and Techniques (3rd ed.). Burlington: Elsevier Science.</p>]]></content>
      
      
      
        <tags>
            
            <tag> Data Science </tag>
            
            <tag> Machine Learning </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Three Searching Methods</title>
      <link href="2017/11/18/search-methods/"/>
      <url>2017/11/18/search-methods/</url>
      
        <content type="html"><![CDATA[<p>Three ‘guess and check’ methods to search square root and cube root.</p><ol><li>Exhaustive Enumeration</li><li>Bisection Search</li><li>Newton-Raphson (for root finding)</li></ol><span id="more"></span><p><em>Sample Code</em></p><h2 id="Exhaustive-Enumeration"><a href="#Exhaustive-Enumeration" class="headerlink" title="Exhaustive Enumeration"></a>Exhaustive Enumeration</h2><h3 id="Cube-Root"><a href="#Cube-Root" class="headerlink" title="Cube Root"></a>Cube Root</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cube = -<span class="number">64</span></span><br><span class="line">epsilon = <span class="number">0.01</span></span><br><span class="line">guess = <span class="number">0.0</span></span><br><span class="line">increment = <span class="number">0.0001</span></span><br><span class="line">num_guesses = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">abs</span>(guess**<span class="number">3</span> - cube) &gt;= epsilon <span class="keyword">and</span> <span class="built_in">abs</span>(guess) &lt;= <span class="built_in">abs</span>(cube):</span><br><span class="line">    <span class="keyword">if</span> cube &lt; <span class="number">0</span>:</span><br><span class="line">        guess -= increment</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        guess += increment</span><br><span class="line">    num_guesses += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;num_guesses = &#x27;</span>, num_guesses)</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">abs</span>(guess**<span class="number">3</span> - cube) &gt;= epsilon:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Failed on cube root of&#x27;</span>, cube)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Cube root of &#x27;</span> + <span class="built_in">str</span>(cube) + <span class="string">&#x27; is &#x27;</span> + <span class="built_in">str</span>(guess))</span><br></pre></td></tr></table></figure><h2 id="Bisction-search"><a href="#Bisction-search" class="headerlink" title="Bisction search"></a>Bisction search</h2><h3 id="Square-Root"><a href="#Square-Root" class="headerlink" title="Square Root"></a>Square Root</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">25</span></span><br><span class="line">epsilon = <span class="number">0.01</span></span><br><span class="line">numGuesses = <span class="number">0</span></span><br><span class="line">low = <span class="number">1.0</span></span><br><span class="line">high = x</span><br><span class="line">ans = (low + high) / <span class="number">2.0</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">abs</span>(ans**<span class="number">2</span> - x) &gt;= epsilon:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;low = &#x27;</span> + <span class="built_in">str</span>(low) + <span class="string">&#x27; high = &#x27;</span> + <span class="built_in">str</span>(high) + <span class="string">&#x27; ans = &#x27;</span> + <span class="built_in">str</span>(ans))</span><br><span class="line">    numGuesses += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> ans**<span class="number">2</span> &lt; x:</span><br><span class="line">        low = ans</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        high = ans</span><br><span class="line">    ans = (low + high) / <span class="number">2.0</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;numGuesses: &#x27;</span> + <span class="built_in">str</span>(numGuesses))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>(ans) + <span class="string">&#x27; is close to square root of &#x27;</span> + <span class="built_in">str</span>(x))</span><br></pre></td></tr></table></figure><h3 id="Cube-Root-1"><a href="#Cube-Root-1" class="headerlink" title="Cube Root"></a>Cube Root</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">cube = -<span class="number">27</span></span><br><span class="line">epsilon = <span class="number">0.01</span></span><br><span class="line">numGuesses = <span class="number">0</span></span><br><span class="line"><span class="keyword">if</span> cube &gt;= <span class="number">0</span>:</span><br><span class="line">    low = <span class="number">0</span></span><br><span class="line">    high = cube</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    low = cube</span><br><span class="line">    high = <span class="number">0</span></span><br><span class="line">guess = (low + high) / <span class="number">2.0</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">abs</span>(guess**<span class="number">3</span> - cube) &gt;= epsilon:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;low = &#x27;</span> + <span class="built_in">str</span>(low) + <span class="string">&#x27; high = &#x27;</span> + <span class="built_in">str</span>(high) + <span class="string">&#x27; guess = &#x27;</span> + <span class="built_in">str</span>(guess))</span><br><span class="line">    <span class="keyword">if</span> guess**<span class="number">3</span> &lt; cube:</span><br><span class="line">        low = guess</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        high = guess</span><br><span class="line">    guess = (low + high) / <span class="number">2.0</span></span><br><span class="line">    numGuesses += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;numGuesses: &#x27;</span> + <span class="built_in">str</span>(numGuesses))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">str</span>(guess) + <span class="string">&#x27; is close to square root of &#x27;</span> + <span class="built_in">str</span>(cube))</span><br></pre></td></tr></table></figure><h2 id="Newton-Raphson"><a href="#Newton-Raphson" class="headerlink" title="Newton-Raphson"></a>Newton-Raphson</h2><h3 id="Square-Root-1"><a href="#Square-Root-1" class="headerlink" title="Square Root"></a>Square Root</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Find the square root of 24</span></span><br><span class="line">epsilon = <span class="number">0.01</span></span><br><span class="line">y = <span class="number">24.0</span></span><br><span class="line">guess = y/<span class="number">2.0</span></span><br><span class="line">numGuesses = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">abs</span>(guess**<span class="number">2</span> - y) &gt;= epsilon:</span><br><span class="line">numGuesses += <span class="number">1</span></span><br><span class="line">guess = guess - ( (guess**<span class="number">2</span> - y) / (<span class="number">2</span> * guess) )</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;numGuesses = &#x27;</span> + <span class="built_in">str</span>(numGuesses))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Square root of &#x27;</span> + <span class="built_in">str</span>(y) + <span class="string">&#x27; is about &#x27;</span> + <span class="built_in">str</span>(guess))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>当我重学Database -- 范式(Normal Form)</title>
      <link href="2017/11/10/normalform/"/>
      <url>2017/11/10/normalform/</url>
      
        <content type="html"><![CDATA[<p>Note of Drexel INFO605. </p><span id="more"></span><h2 id="Why-do-we-need-Database-Normalization"><a href="#Why-do-we-need-Database-Normalization" class="headerlink" title="Why do we need Database Normalization?"></a>Why do we need Database Normalization?</h2><p><strong>注意：Normalization这个词只限于本篇，现实生活中人们不会这样叫的</strong></p><p>一般的DB设计是先根据事实，主观地理解，然后画出ERD，然后再将ERD转化成DB schema.</p><p>This design approach thus far has been largely intuitive, reliant upon the intuition and common sense of the database designer. So we need a formal criteria that can unambiguously (or at least less ambiguously) determine why some schemas are better than others.</p><p>也就是，噔噔噔噔～～<strong>范式(Normal Form)</strong>～～</p><p>ER modeling and resulting translations to relational schemas are both <strong>top-down</strong> intuitive database design approaches.</p><p>范式就是相反的，<strong>自下而上</strong>的设计DB的方法啦。通常现实中，程序员先用intuitive approaches设计DB，然后检查设计是否符合范式。</p><h2 id="What-is-the-goal-of-Normalization"><a href="#What-is-the-goal-of-Normalization" class="headerlink" title="What is the goal of Normalization?"></a>What is the goal of Normalization?</h2><ol><li>消除冗余啊！(最最最重要的,占99%)</li><li>让表和属性的含义更清晰</li><li>减少空值</li></ol><p>Any given fact recorded in our database should be stored in only one authoritative location. Maintenance of such facts is thereby eased, as we create / modify / delete them one time and in one place, with none of the problems that can result from keeping multiple copies of the same data.</p><p>当然消除冗余出了能避免各种增删改查的异常外，还能减少硬盘用量，还有数据库也能跑得快一点。</p><p><em>突然想起以前写课程设计，有的人的数据库，插入一个数据需要跑数据库几百遍。不过老师也不管的啦能动就行啦，弄一个Fancy的界面什么的就能高分 (摊手</em></p><h2 id="How-to-Normalize-database"><a href="#How-to-Normalize-database" class="headerlink" title="How to Normalize database?"></a>How to Normalize database?</h2><p>范式有第12345范式，不过一般符合到第三范式(3nd Normal Form)就行了。是向上兼容的，也就是符合第二范式的肯定符合第一范式，符合第三范式的也符合第二第一范式，如此类推。通常只要符合第三范式就够了。不过，有时因为性能问题，你也可以违反第三范式的啦。</p><p><em>Steve说如果遇到第四第五范式的请务必打电话给他，太稀有了他要写进案例。</em></p><h3 id="Functional-Dependency"><a href="#Functional-Dependency" class="headerlink" title="Functional Dependency"></a>Functional Dependency</h3><p>The majority of normalization is based on the concept of <strong>functional dependency</strong>.</p><p>我们用X ➔ Y 来表示Y依赖于X，或者说，X决定Y。也就是，如果确定了X值，就能推出唯一的Y值。</p><p>举例，每一个身份证号的值对应一个人名的姓。例如确定身份证号 “1122” 所对应的人的姓是 “陈” 。相反，姓 “陈” 的并不能对应唯一的身份证号。身份证号就是X，姓就是Y。</p><p>Functional dependencies can involve multiple attributes on the left hand (determining) side:</p><p> Building, Room ➔ SeatingCapacity</p><p><strong>左端，要保持最简化。不要增加非必要的属性。</strong></p><p><strong>右端，只写一种属性。</strong>例如：</p><p>Drexel_Id ➔ LastName</p><p>Drexel_Id ➔ FirstName</p><p><strong>不要</strong>合并写成： Drexel_Id ➔ LastName, FirstName</p><p><strong>Remember that FDs are related to schemas (meanings of attributes) and not the extensions (data instances) available at any given time.</strong></p><p>也就是就算你不知道年收入 (例如Salary为Null)，不代表 SSN ➔ Salary 这个依赖关系不存在。</p><h3 id="Keys"><a href="#Keys" class="headerlink" title="Keys"></a>Keys</h3><p>Some further consideration of <strong>keys</strong> is necessary to fully explain the 1st, 2nd and 3rd normal forms</p><p><em>下面这段不想写的，可是我怕自己回头忘了留个底吧。可以不看，直接跳到举例说明</em></p><ul><li><strong>Superkey</strong>: a set of attributes in a relation that will never have the same value acrosstuples (i.e., that can be used to uniquely identify a tuple)</li><li><strong>Key</strong>: aminimal superkey – if it lost any more attributes, it would no longer be a superkey (would no longer be a unique identifier)</li><li>Any key that could be used as the primary key of a relation schema is called a <strong>candidate key</strong></li><li>The designer chooses one key to be the primary key, and all candidate keys not chosen to be the primary key become known as <strong>alternate keys</strong>.</li><li><strong>Prime attribute</strong>: member of some candidate key in a relation</li><li><strong>Non-prime attribute</strong>: not a member of some candidate key</li></ul><p>Example relation (assume that all students have SSNs):</p><p><strong>Student</strong> (DrexelNumber, SSN, FirstName, LastName)</p><p><strong>Superkeys</strong> : {DrexelNumber, SSN, FirstName, LastName}, {SSN, LastName}, {DrexelNumber}, {SSN},. . .</p><p><strong>Candidate Keys</strong> : {DrexelNumber}, {SSN}</p><p><strong>Primary Key</strong> : {DrexelNumber}</p><p><strong>Alternate Key</strong> :{SSN}</p><p><strong>Prime attribute</strong> : DrexelNumber, SSN</p><p><strong>Non-prime attribute</strong> : FirstName, LastName</p><h2 id="Normal-Form"><a href="#Normal-Form" class="headerlink" title="Normal Form"></a>Normal Form</h2><p>We say that a relation is normalized to the form of the highest normal form that is not violated by the structure of the relation. To remove a violation, we decompose the relation (split it vertically, breaking some columns into a separate table)</p><h3 id="1st-Normal-Form"><a href="#1st-Normal-Form" class="headerlink" title="1st Normal Form"></a>1st Normal Form</h3><p>Relations in 1NF do not have <strong>repeating groups</strong>!</p><p>For example: <strong>Athlete (Bib#, FirstName, LastName, Event1, Event2, Event3, Event4)</strong></p><p>‘Event’ attributes is a repeating group.</p><p>We need to move the repeating group to a separate table (one for each repeating group) along with a copy of the Pirmary Key from the original relation.</p><p><strong>Athlete (Bib#, FirstName, LastName)</strong></p><p><strong>AthleteEvents (Bib#, Event) (note composite PK)</strong></p><p>If a relation does not have a repeating group to start with, then it is already in 1NF </p><h3 id="2nd-Normal-Form"><a href="#2nd-Normal-Form" class="headerlink" title="2nd Normal Form"></a>2nd Normal Form</h3><p>First criterion of 2NF is that the relation meets 1NF.</p><p>2NFdepends upon the concept of full functional dependency which means that we can’t remove any attribute from the lefthand side of the dependency and still have the dependency hold for theremaining attributes.</p><p>前面说过candidate key就是那些可以选做PK的属性，都是唯一标志属性。</p><p>举例，有这样的关系 <strong>Room (Building, RoomNum, SeatingCapacity, ZipCode)</strong></p><p>这样写的话就代表有以下Functional Dependency:</p><p>Building,RoomNum ➔ SeatingCapacity (这是full functional dependency)</p><p>Building,RoomNum ➔ ZipCode (这不是)</p><p>因为事实上，只要有Building就能确定ZipCode，不需要RoomNum，所以不是full functional dependency</p><p>改成符合2NF的话要拆分成两个表，将ZipCode和Building拆出来成另一个表：</p><p><strong>Building (Building, ZipCode)</strong></p><p><strong>Room (Building, RoomNum, SeatingCapacity)</strong></p><p>Building 是 Room表的外键</p><p>Rule: Normalize a relation to 2NF by moving attributes that are not fully functionally dependent on all candidate keys out to a separate relation, along with copies of the prime attributes on which they are dependent (now the PK of the new relation).</p><p>The PK of the new relation leaves a corresponding foreign key in the original relation (Building, in example above)</p><h3 id="3nd-Normal-Form"><a href="#3nd-Normal-Form" class="headerlink" title="3nd Normal Form"></a>3nd Normal Form</h3><p>First criterion of 3NF is that the relation is in 2NF</p><p>3NF relies upon the concept of transitive dependency</p><p>也就是存在关系X ➔ Y，Y ➔ Z，而且Y是non-prime attribute，就存在X ➔ Z（很好理解嘛）</p><p>例如 <strong>Employee(SSN, LastName, DateofBirth, DeptNumber, DeptMgr)</strong></p><p>假设存在 DeptNumber ➔ DeptMgr</p><p>那丛SSN就能得到DeptNumber，就能的得到DeptMgr。</p><p>所以改成符合3NF的关系的话：</p><p>将DeptManager (这是non-prime attributes) 分到一个独立的表，这个表的PK为DeptNumber (中间值)</p><p><strong>Employee (SSN, LastName, DateofBirth, DeptNumber)</strong></p><p><strong>Department (DeptNumber, DeptManager)</strong></p><p>DeptNumber 是 Employee表的外键</p><p>Rule: Normalize a relation to 3NF by moving non-prime attributes that are transitively dependent on any candidate key out to a separate relation, along with copies of the attributes upon which they are non-transitively dependent (these become the PK of the new relation).</p><p>The“Y” (hop) becomes a foreign key in the original relation and points at the PKof the new relation</p><hr><p>Here is a mnemonic: <strong>“The key, the whole key, and nothing but the key.”</strong></p><p>当然有时候我们是需要Denormalization，可以提高读数据库的性能。一般建议先将DB设计成符合3NF的，再按需Denormalization.</p><h2 id="Exercise"><a href="#Exercise" class="headerlink" title="Exercise"></a>Exercise</h2><p>尝试一步步将下面关系写到符合1NF，2NF，3NF。</p><p>Flight (Route#, Flight#, DestinationAirport, DepartureDate, DepartureTime, Pilot1, Pilot2, Pilot3, PlaneSerial#, Capacity, LastServicedDate)</p><p>Route#, Flight# ➔ (any non-prime attribute in this relation, but maybe transitively)</p><p>Route# ➔ DestinationAirport</p><p>PlaneSerial# ➔ Capacity</p><p>PlaneSerial# ➔ LastServicedDate</p><h3 id="Answer"><a href="#Answer" class="headerlink" title="Answer"></a>Answer</h3><p>我就不将外键表示出来了。在Markdown很难画我又懒得插图。</p><h4 id="1NF"><a href="#1NF" class="headerlink" title="1NF:"></a>1NF:</h4><p>Flight (Route#, Flight#, DestinationAirport, DepartureDate, DepartureTime, PlaneSerial#, Capacity, LastServicedDate)</p><p>FlightPilot (Route#, Flight#,Pilot)</p><h4 id="2NF"><a href="#2NF" class="headerlink" title="2NF:"></a>2NF:</h4><p>Flight (Route#, Flight#, DepartureDate, DepartureTime, PlaneSerial#, Capacity, LastServicedDate)</p><p>FlightPilot (Route#, Flight#, Pilot)</p><p>Route (Route#, DestinationAirport)</p><h4 id="3NF"><a href="#3NF" class="headerlink" title="3NF:"></a>3NF:</h4><p>Flight (Route#, Flight#, DepartureDate, DepartureTime, PlaneSerial#)</p><p>FlightPilot (Route#, Flight#, Pilot)</p><p>Route (Route#, DestinationAirport)</p><p>Plane (PlaneSerial#, Capacity, LastServicedDate)</p>]]></content>
      
      
      
        <tags>
            
            <tag> Database </tag>
            
            <tag> Relational Database </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
